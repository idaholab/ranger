{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyMi0wNi0xNVQxMDozNjoyMS0wNjowMM4APzib"
    },
    "edges": [
      {
        "node": {
          "title": "Problem with downloaded mumps using update_and_rebuild_petsc.sh",
          "author": {
            "login": "TheBEllis"
          },
          "bodyText": "I'm currently trying to build MOOSE in an ubuntu WSL environment, and am running into issues with the petsc build script. The error I get at the moment is this. I can build MOOSE fine in my actual Linux install, just wsl that is giving me issues at the moment.\nInstalling Mumps; this may take several minutes\nTESTING: check from config.libraries(config/BuildSystem/config/libraries.py:157)\nUNABLE to CONFIGURE with GIVEN OPTIONS    (see configure.log for details):\nDownloaded mumps could not be used. Please check install in /home/bill/projects/moose/petsc/arch-moose\nI have uploaded the configure.log here.\nconfiglog.txt\nAny help greatly appreciated :)",
          "url": "https://github.com/idaholab/moose/discussions/21335",
          "updatedAt": "2022-06-20T10:59:39Z",
          "publishedAt": "2022-06-17T10:54:50Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nIn a WSL environment you do not really want to use the manual installation of petsc and libmesh, it's much easier to use the conda build:\nhttps://mooseframework.inl.gov/getting_started/installation/conda.html\nbtw did you look at the initial instructions for wsl:\nhttps://mooseframework.inl.gov/getting_started/installation/windows10.html\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21335#discussioncomment-2972736",
                  "updatedAt": "2022-06-17T15:40:42Z",
                  "publishedAt": "2022-06-17T15:40:41Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "TheBEllis"
                          },
                          "bodyText": "Apologies I did not see the windows instructions, I just went to use the linux ones out of habit! Thank you so much, I will give them a go!",
                          "url": "https://github.com/idaholab/moose/discussions/21335#discussioncomment-2985117",
                          "updatedAt": "2022-06-20T10:59:40Z",
                          "publishedAt": "2022-06-20T10:59:39Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "MOOSE Installation",
          "author": {
            "login": "Gallasd"
          },
          "bodyText": "My installation process is stuck at this step (Ubuntu)\n\"make -j 4\"\nI follow the troubleshooting to solve my problem\n\"conda activate moose\"\nThe above has been successful\n\"conda update --all\"\nthis warning appears\uff1a\n\n_\u201cWARNING: A newer version of conda exists. <==\n  current version: 4.12.0\n  latest version: 4.13.0\nPlease update conda by running\n    $ conda update -n base conda\n# All requested packages already installed.\u201d\n\nthen\uff0cI run this code\u201cconda update -n base conda\u201d\uff0cstill the same problem.\nI had no choice, so I run\u201cmamba update --all\u201d,it's no problem.\n\nNext, I do the following\uff1a\n\u201ccd moose\ngit checkout master\ngit clean -xfd\n<output snipped>\ngit fetch upstream\ngit pull\ngit submodule update --init\u201d\n\nin running this line of code\u201cgit fetch upstream\u201d\uff0ca fatal error occurred\uff1a\n\n\"fatal: 'upstream' does not appear to be a git repository\nfatal: Could not read from remote repository.\nPlease make sure you have the correct access rights\nand the repository exists.\"\n\nI don't know how to solve this problem.\nIt must be noted that if i ignore these codes and run the following a hello world example directly, there is no problem\nthe result we want\uff1a\n\u201cHello world from processor my_hostname, rank 0 out of 4 processors\nHello world from processor my_hostname, rank 1 out of 4 processors\nHello world from processor my_hostname, rank 3 out of 4 processors\nHello world from processor my_hostname, rank 2 out of 4 processors\u201d\n\nI hope you can help me solve this problem, my English is not good, if the expression is not clear, please forgive me, thank you very much",
          "url": "https://github.com/idaholab/moose/discussions/21347",
          "updatedAt": "2022-06-25T05:43:15Z",
          "publishedAt": "2022-06-19T05:23:26Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThis line failed:\ngit fetch upstream\n\nprobably because upstream is not defined.\nCould you please give us the output of git remote -v? This will tell us which repository you are tracking and under what name\nAlso you should try the workflow again but with\ngit fetch origin\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21347#discussioncomment-2980373",
                  "updatedAt": "2022-06-19T14:47:45Z",
                  "publishedAt": "2022-06-19T14:47:44Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Gallasd"
                          },
                          "bodyText": "Thank you very much for your reply\nThank you for helping me a lot\uff0cI use the code you provided and it continues to work.",
                          "url": "https://github.com/idaholab/moose/discussions/21347#discussioncomment-2984373",
                          "updatedAt": "2022-06-20T09:02:08Z",
                          "publishedAt": "2022-06-20T09:02:07Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "[Multiapps][3D -> 2D]",
          "author": {
            "login": "coskrrb2002"
          },
          "bodyText": "Dear Moose users,\nRecently, I am trying to use both 3D and 2D geometry.\nThe 2D geometry is the same as a projection of 3D in the x-y plane.\nI tried to transfer temperature values from the 3D to the 2D mesh.\nBut, it does not work well.\nThe temperature was not transferred from the 3D mesh to the 2D mesh at all.\nI am using TransientMultiApp like below with Transfers:\n[MultiApps]\n  [sub_app] #App name that you can create in here!\n    type = TransientMultiApp\n    app_type = corrosionApp\n    positions = '0 0 1' #x y z coordinates\n    input_files = '2DTest.i'\n    clone_master_mesh = false # Different mesh\n    execute_on = 'TIMESTEP_END'\n    catch_up = true\n  []\n[]\n\n[Transfers]\n  [tosub]\n    type = MultiAppProjectionTransfer\n    execute_on = 'TIMESTEP_END'\n    to_multi_app = sub_app\n    source_variable = 'T'\n    variable = 'T'\n  []\n[]\n\n\nAre there any mistakes in here?\nBest regards",
          "url": "https://github.com/idaholab/moose/discussions/21210",
          "updatedAt": "2022-06-20T08:58:05Z",
          "publishedAt": "2022-06-03T05:41:54Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThe projection transfer is not a geometrical projection across dimensions, it s a projection between different meshes and finite element basis that still share the same geometrical space.\nFrom the 3D to the 2D, there is not a unique mapping. Are you trying to average the 3D temperatures axially? Or pick a slice in the 3D system?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21210#discussioncomment-2879316",
                  "updatedAt": "2022-06-03T15:35:05Z",
                  "publishedAt": "2022-06-03T15:34:59Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "coskrrb2002"
                          },
                          "bodyText": "Thank you for your answer,\nI am trying to pick a slice in the 3D system (surface) and moved the calculated data to the 2D model.\nIs there any other way to do this?\nNakkyu",
                          "url": "https://github.com/idaholab/moose/discussions/21210#discussioncomment-2888776",
                          "updatedAt": "2022-06-06T06:19:35Z",
                          "publishedAt": "2022-06-06T06:19:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "do the two meshes overlap?\nWhat is the extent of the 2D mesh? of the 3D mesh?",
                          "url": "https://github.com/idaholab/moose/discussions/21210#discussioncomment-2891095",
                          "updatedAt": "2022-06-08T15:58:03Z",
                          "publishedAt": "2022-06-06T14:14:38Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "coskrrb2002"
                          },
                          "bodyText": "I would like to do the following things (transient model - time dependent):\nCalculate temperature profile in a 3D mesh. (A box shape)\nTransfer temperature into a 2D mesh. (One of the plane on the box)\nCalculate the temperature dependent physics in the 2D mesh.\nI know if I apply the temperature dependent physics only on the surface, then I don't have to calculate seperately (3D and 2D).\nHowever, in my case, I have to use different coordinate systems. 2D mesh: cylindrical coordinate and 3D mesh: cartesian coordiante.\nThat's why I want to seperate into 3D and 2D mesh.\nIf there any other methods in MOOSE, probably I can extract temperature profile from 3D mesh and apply to 2D mesh as boundary conditions...",
                          "url": "https://github.com/idaholab/moose/discussions/21210#discussioncomment-2903508",
                          "updatedAt": "2022-06-08T07:22:35Z",
                          "publishedAt": "2022-06-08T07:22:34Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "hello\nSince you have a coordinate transfer change in there as well, you will want to use this PR:\n#20451\nIt also provides additional documentation on dimensional transfers. I m not sure 3D-2D RZ is allowed currently\nGuillaume",
                          "url": "https://github.com/idaholab/moose/discussions/21210#discussioncomment-2907983",
                          "updatedAt": "2022-06-08T18:08:26Z",
                          "publishedAt": "2022-06-08T18:08:25Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "coskrrb2002"
                          },
                          "bodyText": "Thank you for your advice!",
                          "url": "https://github.com/idaholab/moose/discussions/21210#discussioncomment-2984336",
                          "updatedAt": "2022-06-20T08:58:05Z",
                          "publishedAt": "2022-06-20T08:58:05Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "The problem of lithium ion diffusivity input in different directions",
          "author": {
            "login": "biaogxb"
          },
          "bodyText": "I want to use the phase field model to simulate the growth of dendrites,and I have some problems when I input the anisotropic mobility of lithium ions.\nI use \u2018MatDiffusion\u2019 to simulate the migration of lithium ions, as shown in the following code\n [./Diffusion1]\n type = MatDiffusion\n variable=w\n D_name=D\n [../]\n[./Mobility_coefficient]\n type = DerivativeParsedMaterial\nfunction = '-M0*(1-h)*cl*(1-h)'   f_name = D   args = 'eta w'   derivative_order = 1   material_property_names = ' M0 cl:=D[f1,w] h'   [../]`\nWhere M0 represents diffusion coefficient of li+ in electricity.At first I set a constant, but now I want to change M0 to the following form\uff1a\n\nwhere, the diagonal components represent mobility coefficients in x and y directions.\nIn a word, I want to change the previous constant diffusion coefficient of li+ in electricity into the tensor as shown in the figure and use it to calculate \u2019D\u2018\uff0cfinally I bring D into the diffusion equation. How can I achieve it\uff1f\n\nI add a \u2018Mobility_tensor\u2019 block  and then change the place where M0 is used to M directly.I don't know if this modification is correct.\nThe code is as follows\uff1a\n[./Diffusion1]\ntype = MatAnisoDiffusion\n diffusivity = D\n variable = w\n [../]\n[./Mobility_tensor]\n type = ConstantAnisotropicMobility\n M_name = M\n tensor = '317.9 0 0 317.9'\n [../]\n [./Mobility_coefficient]\n type = DerivativeParsedMaterial\nfunction = '-M*(1-h)*cl*(1-h)' \n f_name = D\n args = 'eta w'\n derivative_order = 1\n material_property_names = ' M cl:=D[f1,w] h'\n [../]\nCan someone help me? Thank you\uff01",
          "url": "https://github.com/idaholab/moose/discussions/21317",
          "updatedAt": "2022-06-20T03:45:01Z",
          "publishedAt": "2022-06-16T03:42:01Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThe derivative parsed material does not handle the matrix material property I think.\nIf you need a custom expression for an anisotropic diffusion coefficient, I think you will want to make a custom object.\nUnless there are other XXXAnisotropicMobility objects you can use\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21317#discussioncomment-2967720",
                  "updatedAt": "2022-06-17T00:06:43Z",
                  "publishedAt": "2022-06-17T00:06:43Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "biaogxb"
                          },
                          "bodyText": "OK, thanks. I'll study this further",
                          "url": "https://github.com/idaholab/moose/discussions/21317#discussioncomment-2982682",
                          "updatedAt": "2022-06-20T03:45:02Z",
                          "publishedAt": "2022-06-20T03:45:01Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "For Automatic Periodic Boundary Detection, can it use AuxVariables? It is only Variables System.",
          "author": {
            "login": "snugook1108"
          },
          "bodyText": "Reason\nFor Automatic Periodic Boundary Detection, can it use the AuxVariables? It is only for the Variables System.\nDesign\n[BCs]\n  [./Periodic]\n    [./all]\n      variable = u\n      auto_direction = 'x y'\n    [../]\n  [../]\n[]\n\nThe variable is u so if it is possible, the variable can use  AuxVariables?\nImpact",
          "url": "https://github.com/idaholab/moose/discussions/21354",
          "updatedAt": "2022-06-25T05:44:08Z",
          "publishedAt": "2022-05-31T19:47:30Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "We dont set boundary conditions to auxvariables. AuxVariables are computed by AuxKernels, they are not solved for. If you want to make a periodic one, you can code this into the AuxKernel definition\nbtw we use the Discussions forum for such questions, not issues",
                  "url": "https://github.com/idaholab/moose/discussions/21354#discussioncomment-2981829",
                  "updatedAt": "2022-06-19T22:49:08Z",
                  "publishedAt": "2022-06-19T22:49:07Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "ld: library not found for -lemutls_w",
          "author": {
            "login": "jianqixi"
          },
          "bodyText": "As a beginner of MOOSE, I have one error when installing the MOOSE in my Macbook. it showed that the library of -lemutls_w is missed, and then showed the following errors: clang-12: error: linker command failed with exit code 1 (use -v to see invocation). Thank you for your help,",
          "url": "https://github.com/idaholab/moose/discussions/21351",
          "updatedAt": "2022-07-21T23:30:46Z",
          "publishedAt": "2022-06-19T20:55:53Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nPlease attach the full compilation log that shows the error.\nAlso if you could run the diagonistics script in moose/scripts and attach the output\nbtw, we use Github Discussions for such issues, please use this instead of issues.\nThanks\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21351#discussioncomment-2981794",
                  "updatedAt": "2022-06-19T22:38:01Z",
                  "publishedAt": "2022-06-19T22:37:40Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Build issues in libmesh: Undefined reference to HDF components",
          "author": {
            "login": "abarun22"
          },
          "bodyText": "Hello all,\nStrangely the build of libmesh throws the following undefined references even after the inclusion of HDF modules in my environment.\n/home/abalasub/Working/Projects/moose/libmesh/build/contrib/netcdf/v4/liblib/.libs/libnetcdf.so: undefined reference to `H5Pset_all_coll_metadata_ops'\n/home/abalasub/Working/Projects/moose/libmesh/build/contrib/netcdf/v4/liblib/.libs/libnetcdf.so: undefined reference to `H5Pset_dxpl_mpio'\n/home/abalasub/Working/Projects/moose/libmesh/build/contrib/netcdf/v4/liblib/.libs/libnetcdf.so: undefined reference to `H5Pset_coll_metadata_write'\n/home/abalasub/Working/Projects/moose/libmesh/build/contrib/netcdf/v4/liblib/.libs/libnetcdf.so: undefined reference to `H5Pset_fapl_mpio'\n/home/abalasub/Working/Projects/moose/petsc/arch-moose/lib/libpetsc.so: undefined reference to `H5Pget_dxpl_mpio'\n\nWe have hdf5 versions 1.8.13 and 1.12 - inclusion of both of them did not help solve this problem. This is noticed only in the recent sources of MOOSE and not in the older versions. Any references here will be much appreciated.\nKind regards,\nArun",
          "url": "https://github.com/idaholab/moose/discussions/21336",
          "updatedAt": "2022-06-25T05:44:29Z",
          "publishedAt": "2022-06-17T11:37:44Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nHow are you including these HDF5 libraries? Are you setting an environment variable?\nIs there ANY other HDF5 libraries that are loaded at the same time?\nI'd wipe the libmesh directory once to make sure there is not some linking to an old HDF5 library around\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21336#discussioncomment-2972702",
                  "updatedAt": "2022-06-17T15:37:03Z",
                  "publishedAt": "2022-06-17T15:37:03Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "abarun22"
                  },
                  "bodyText": "Hi Guillaume,\nI was including the HDF5 libraries in my environment through the modules. I\nhad to initially remove the inclusion of HDF5 during petsc build due to the\nfact that it was not passing the build checks. When I tried to build\nlibmesh further it throwed undefined references to HDF5 components. I\nthought I could reinstate the HDF5 libraries this time and see if I can\nbuild both petsc and libmesh. It eventually builds OK and also passes the\ntests. I've no idea why it did not pass petsc build initially.\nIn any case it works fine.\nKind regards,\nArun\n\u2026\nOn Fri, Jun 17, 2022 at 4:37 PM Guillaume Giudicelli < ***@***.***> wrote:\n Hello\n\n How are you including these HDF5 libraries? Are you setting an environment\n variable?\n Is there ANY other HDF5 libraries that are loaded at the same time?\n\n I'd wipe the libmesh directory once to make sure there is not some linking\n to an old HDF5 library around\n\n Guillaume\n\n \u2014\n Reply to this email directly, view it on GitHub\n <#21336 (comment)>,\n or unsubscribe\n <https://github.com/notifications/unsubscribe-auth/AJSA256INO474ZK7CEQZKOLVPSLSVANCNFSM5ZCAHCOQ>\n .\n You are receiving this because you authored the thread.Message ID:\n ***@***.***>",
                  "url": "https://github.com/idaholab/moose/discussions/21336#discussioncomment-2973186",
                  "updatedAt": "2022-06-17T16:52:56Z",
                  "publishedAt": "2022-06-17T16:52:55Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Ah that's great news. HDF5 can be a little finicky, one definitely has to be extremely consistent throughout the build, same as for compilers.",
                          "url": "https://github.com/idaholab/moose/discussions/21336#discussioncomment-2978372",
                          "updatedAt": "2022-06-18T22:58:41Z",
                          "publishedAt": "2022-06-18T22:58:41Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Installation Problem",
          "author": {
            "login": "styyokuda"
          },
          "bodyText": "MOOSE Team,\nI have not used MOOSE for a long time.\nI am trying to install MOOSE on my old MacBook Pro running with macOS Catalina.\nAttached are the error messages.\nPlease help!\nS. Thomas\ninstallation_message.docx",
          "url": "https://github.com/idaholab/moose/discussions/21327",
          "updatedAt": "2022-06-25T05:44:34Z",
          "publishedAt": "2022-06-16T22:03:41Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nNo need to try to run the test suite the mamba installation failed.\nSeems to be some SSL certificate error. Can you temporarily disable SSL verification, install moose packages then re-enable it?\nuse conda config --set ssl_verify false\nthen true\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21327#discussioncomment-2967530",
                  "updatedAt": "2022-06-16T23:14:01Z",
                  "publishedAt": "2022-06-16T23:14:00Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I would also love to know why Conda thinks we're using a self-signed certificate for https://conda.software.inl.gov. If you have a moment, can you try and report what the following results with?:\ncurl -v https://conda.software.inl.gov/public",
                          "url": "https://github.com/idaholab/moose/discussions/21327#discussioncomment-2967735",
                          "updatedAt": "2022-06-17T00:10:45Z",
                          "publishedAt": "2022-06-17T00:10:44Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "styyokuda"
                          },
                          "bodyText": "Thank you, Guillaume and Milljm,\nPlease see the attached file and let me know what I can do.\nS.Thomas\nInstallaion_messages2.docx",
                          "url": "https://github.com/idaholab/moose/discussions/21327#discussioncomment-2968039",
                          "updatedAt": "2022-06-17T01:46:32Z",
                          "publishedAt": "2022-06-17T01:46:32Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "styyokuda"
                          },
                          "bodyText": "Guillaume and Milljm,\nDespite more than 50 tests failed, the example problem of \"ex01\" runs correctly.\nPlease let me know if my installation has been done acceptably.\nS. Thomas",
                          "url": "https://github.com/idaholab/moose/discussions/21327#discussioncomment-2973699",
                          "updatedAt": "2022-06-17T18:24:03Z",
                          "publishedAt": "2022-06-17T18:24:02Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Hello\nNo 50 test failures is excessive.\nCould you please attach the log with all the failures? It's usually easy to see what is going wrong from which tests failed\nGuillaume",
                          "url": "https://github.com/idaholab/moose/discussions/21327#discussioncomment-2978328",
                          "updatedAt": "2022-06-18T22:30:13Z",
                          "publishedAt": "2022-06-18T22:30:12Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Specify Euler angles for the three-grain model",
          "author": {
            "login": "PengWei97"
          },
          "bodyText": "Dear MOOSE experts,\nRecently, I modified the initial model of Tricrystal2CircleGrains based on poly_grain_growth_2D_eldrforce.i. And the input file is\ntri_grain_growth_2D_eldrforce.txt\nI want to specify a fixed Euler angle for each grain, but the input file I write now uses a tex file to give the Euler angle different match. Is there any way to specify the Euler angle for each grain?\nThis is the specific content of the tex file\uff0c\nTexture File\nFile generated from MATLAB\nB 3\n   30.00   0.00   0.00   1.00\n   45.00   0.00   0.00   1.00\n   90.00   0.00   0.00   1.00\n\nThe three-grain model and Euler angle are as follows\n\nAny suggestions or recommendations to fix these problems would be greatly appreciated.\nThank you\nWei Peng",
          "url": "https://github.com/idaholab/moose/discussions/17196",
          "updatedAt": "2022-06-18T22:22:21Z",
          "publishedAt": "2021-03-03T02:37:41Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "ngrilli"
                  },
                  "bodyText": "Dear @PengWei97\nSome of the examples in moose use the GrainPropertyReadFile object\nto read the Euler angles element by element,\nso each line of the Euler angle file corresponds to the angles in one element.\nI have developed some simple modifications to assign the Euler angles\nto different grains instead. This is done by considering different grains as different blocks.\nYou can see an example here with four grains:\nhttps://github.com/ngrilli/c_pfor_am/tree/main/test/tests/polycrystal\nYou can use this strategy to generate polycrystals with neper\nand assign corresponding Euler angles grain by grain, as done here:\nhttps://github.com/ngrilli/c_pfor_am/tree/main/test/tests/neper\nTrust this helps\nBest Regards,\nNicol\u00f2",
                  "url": "https://github.com/idaholab/moose/discussions/17196#discussioncomment-434230",
                  "updatedAt": "2022-06-17T20:13:09Z",
                  "publishedAt": "2021-03-05T19:00:52Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Dear @ngrilli\nThank you very much for your enthusiastic answers and the learning materials you provided. I have found the answer to this question. The problem lies in the *.tex file. Because the first Euler angle of the *.tex file I wrote is on the fourth line, this is a line that moose ignores, resulting in actually only two Euler angles specified, and the third Euler angle is assigned randomly. That's the problem.\nBest Regards,\nWei Peng",
                          "url": "https://github.com/idaholab/moose/discussions/17196#discussioncomment-435056",
                          "updatedAt": "2022-06-17T20:13:09Z",
                          "publishedAt": "2021-03-06T02:12:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "latmarat"
                          },
                          "bodyText": "Hi Nicol\u00f2:\nCould you please comment how MOOSE orders the elements? That is, when you write the text file with the euler angles, how do you make sure it corresponds to the right element in the mesh? Does MOOSE sort elements such that element label increases first along x, then along y, then along z?\nThanks,\nMarat",
                          "url": "https://github.com/idaholab/moose/discussions/17196#discussioncomment-2974153",
                          "updatedAt": "2022-06-17T20:17:23Z",
                          "publishedAt": "2022-06-17T20:17:22Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Hello\n\nif you are generating your mesh in MOOSE using the mesh generators, then there is some sort of ordering based on the direction, depending on the mesh generators you are using\nif you are generating your mesh outside of MOOSE, MOOSE does not re-order the elements (unless it is running in parallel. This should be disabled by passing allow_mesh_renumbering = false if you plan to set Euler angles by element). You should generate your Euler angles at the same time as you are generating your mesh to make sure the numbering match.\n\nGuillaume",
                          "url": "https://github.com/idaholab/moose/discussions/17196#discussioncomment-2978316",
                          "updatedAt": "2022-06-18T22:22:22Z",
                          "publishedAt": "2022-06-18T22:22:21Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Variable scaling",
          "author": {
            "login": "Edward-Eth"
          },
          "bodyText": "I am running a coupled physics simulation, and having some convergence issues. These are my per-variable residuals at the start and end of a converged timestep:\nStart:\ndisp_x: 0.0207124\ndisp_y: 0.0538449\ndisp_z: 0.0559112\nT:      1213.58\nEnd:\ndisp_x: 1.03655e-07\ndisp_y: 6.19961e-08\ndisp_z: 2.02929e-07\nT:      2.23613e-12\nAccording to the \"Troubleshooting failed solves\" page, my residuals should be within 1 order of magnitude of each other. These obviously aren't, but at the start of the step (initial guess) T is much larger, and at the end it is much smaller. Which do I scale for? Should I multiply T by ~10^4 so that when converged it is a similar magnitude to the other variables, or should I times disp_x,y,z, by ~10^5 to bring initial guess in line with each other?\nAdditionally, here are the residuals for a failed time step:\nInitial:\ndisp_x: 1.92706e-08\ndisp_y: 8.08506e-09\ndisp_z: 1.65146e-08\nT:      54.5449\nEnd:\ndisp_x: 4.41008e-05\ndisp_y: 2.61794e-05\ndisp_z: 4.3757e-05\nT:      5.39617e-12\nAgain. at the start the T contribution is much larger, but by the end (after 20 NL iterations and failing to converge), T is much smaller.",
          "url": "https://github.com/idaholab/moose/discussions/21297",
          "updatedAt": "2022-06-25T05:46:03Z",
          "publishedAt": "2022-06-14T11:09:56Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "hugary1995"
                  },
                  "bodyText": "You could try automatic scaling which scales the variables such that the Jacobian is close to unity in sup-norm. If you were using Newton and non-AD kernels, the results suggest that the displacements and temperature converge at different rates, and the Jacobian for the displacement subproblem (or its coupling with temperature) might be off. You could try the new mechanics system which should provide you with a perfect Jacobian.\nAnyways, automatic scaling (or maybe reference residual problem) + Newton + perfect Jacobian should resolve this issue.",
                  "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2946881",
                  "updatedAt": "2022-06-14T12:47:12Z",
                  "publishedAt": "2022-06-14T12:47:11Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "Hi, I'm already using AD and automatic scaling here.",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2947017",
                          "updatedAt": "2022-06-14T13:07:10Z",
                          "publishedAt": "2022-06-14T13:07:10Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "More specifically, I am using newton solve, AD for TensorMechanics and all relevant material properties, AD for Heat Conduction and Heat Conduction time derivative (and all relevant materials properties), and am coupling using AD compute thermal expansion eigenstrain.",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2947246",
                          "updatedAt": "2022-06-14T13:32:13Z",
                          "publishedAt": "2022-06-14T13:32:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "Okay, I would then check if everything in your input file is AD, do you mind pasting the input file here? If the jacobian is perfect and you are taking more than 20 nl iterations as you mentioned, the time step you are taking might be too large that the initial guess is outside the basin of a traction.",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2947785",
                          "updatedAt": "2022-06-14T14:29:40Z",
                          "publishedAt": "2022-06-14T14:29:38Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "Not sure I will be able to post the input file, but all of my BCs, materials and kernels are AD. The only things not AD are an element activator user object,  a property read file user object, and functions, none of which can be AD to the best of my knowledge.",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2948003",
                          "updatedAt": "2022-06-14T14:50:27Z",
                          "publishedAt": "2022-06-14T14:50:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "As for the time step, that is after it is cut down to less than 1 second, which should definitely be stable :/",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2948012",
                          "updatedAt": "2022-06-14T14:50:58Z",
                          "publishedAt": "2022-06-14T14:50:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "This isn't a scaling issue, it's a wrong jacobian issue.",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2951788",
                          "updatedAt": "2022-06-15T01:31:37Z",
                          "publishedAt": "2022-06-15T01:31:36Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "Is there any way to track down where the incorrect jacobian contributions are coming from? The only \"loading\" in the structural/tensor mechanics part of the model is from thermal expansion, so is that the most likely source of the issue?",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2953954",
                          "updatedAt": "2022-06-15T08:29:54Z",
                          "publishedAt": "2022-06-15T08:29:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "Am I correct in thinking that if the issue is with the Jacobian, then a Jacobian free solve (PJFNK) will in theory not be affected? Running one now to see anyway but I would be interested in your thoughts on that approach.",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2954076",
                          "updatedAt": "2022-06-15T08:47:25Z",
                          "publishedAt": "2022-06-15T08:47:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "First, if you can manage to reduce the size of the problem to a few elements, you'll be able to check the accuracy of the jacobian by passing the command line argument -snes_test_jacobian, which can give us some idea about the quality of the jacobian.\nNext, you'll need to tell us whether the non AD objects introduce material properties that depend on nonlinear variables. If so, that's likely gonna be the source of inaccurate jacobian.",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2955167",
                          "updatedAt": "2022-06-15T11:24:50Z",
                          "publishedAt": "2022-06-15T11:24:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "A JFNK solve does not depend on the Jacobian. A PJFNK solve will use the Jacobian to precondition the system, so if the Jacobian is wrong it will still impact the solve.\nGary is right that you should check your implementation at this point. Use the jacobian tester, and verify that you are consistently using AD or have implemented Diagonal and off-diagonal contributions to the Jacobian correctly",
                          "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2957568",
                          "updatedAt": "2022-06-15T16:36:25Z",
                          "publishedAt": "2022-06-15T16:36:21Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nso you could try manually scaling the equations, but you ll have to use the scaling factors appropriate for the final state not the initial state. It seems the compared scale of the residuals is inverted between the two.\nautomatic_scaling is a good idea too. I think this is one of the cases where you will want to update the scaling factors.\nso add compute_scaling_once = false to the Executioner block.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2948885",
                  "updatedAt": "2022-06-14T16:22:06Z",
                  "publishedAt": "2022-06-14T16:22:02Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "mangerij"
                  },
                  "bodyText": "Another suggestion: sometimes going to a different unit system can help convergence. It usually doesn't make sense to have materials coefficients of one part of the coupled problem that are like 1e-15 and then materials coefficients of another part of the coupled problem that are, for example 1e15.",
                  "url": "https://github.com/idaholab/moose/discussions/21297#discussioncomment-2949039",
                  "updatedAt": "2022-06-14T16:43:39Z",
                  "publishedAt": "2022-06-14T16:43:39Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}