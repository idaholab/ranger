{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyNS0wMS0wM1QwMzozMjozNC0wNzowMM4AdpuE"
    },
    "edges": [
      {
        "node": {
          "title": "I need to enable Fortran support during PETSc installation",
          "author": {
            "login": "ddmoa"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n I have consulted the Posting Guidelines.\n I have searched the Discussions Forum and MOOSE Framework Troubleshooting and have not found what I was looking for\n Q&A Getting Started is the most appropriate category for my question (trouble installing, beginner user, ...)\n\nIssue or question about MOOSE\nHello! I want to install PETSc with Fortran support when running the Moose installation script. I modified the configure_petsc.sh file by setting --with-fortran-bindings=1, but it doesn't seem to work. The final PETSc installation directory does not contain the petsc/finclude directory. How should I modify the configuration?",
          "url": "https://github.com/idaholab/moose/discussions/29561",
          "updatedAt": "2025-01-08T17:22:57Z",
          "publishedAt": "2024-12-17T08:17:33Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "lindsayad"
                  },
                  "bodyText": "Either delete the line --with-sowing=0 or change it to --with-sowing=1",
                  "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11598002",
                  "updatedAt": "2024-12-17T20:32:37Z",
                  "publishedAt": "2024-12-17T20:32:37Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "ddmoa"
                          },
                          "bodyText": "I followed your suggestions, but it still isn't working. What confuses me is that the petsc/arc-moose/include directory in MOOSE doesn't contain header files like petsc.h or petscao.h , even though these files are present in the standalone PETSc installation.\nI copied all these header files directly into the MOOSE directory, but I'm not sure if this will work. Could you give me some advice?",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11604698",
                          "updatedAt": "2024-12-18T11:54:52Z",
                          "publishedAt": "2024-12-18T11:52:02Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "The following does not seem to create an finclude directory either:\ngit clone -b release https://gitlab.com/petsc/petsc.git petsc\ncd petsc/\ngit co v3.22.1\n./configure --with-64-bit-indices \\\n      --with-cxx-dialect=C++17 \\\n      --with-debugging=no \\\n      --with-fortran-bindings=1 \\\n      --with-mpi=1 \\\n      --with-openmp=1 \\\n      --with-strict-petscerrorcode=1 \\\n      --with-shared-libraries=1 \\\n      --with-sowing=1 \\\n      --download-fblaslapack=1 \\\n      --download-hpddm=1 \\\n      --download-hypre=1 \\\n      --download-metis=1 \\\n      --download-mumps=1 \\\n      --download-ptscotch=1 \\\n      --download-parmetis=1 \\\n      --download-scalapack=1 \\\n      --download-slepc=1 \\\n      --download-strumpack=1 \\\n      --download-superlu_dist=1 \\\n      --prefix=/data/milljm/petsc_installed\nmake PETSC_DIR=/data/milljm/projects/petsc PETSC_ARCH=arch-linux-c-opt all\nmake PETSC_DIR=/data/milljm/projects/petsc PETSC_ARCH=arch-linux-c-opt install\nWhat is supposed to happen? This is a clone directly from PETSc. No use of MOOSE at all here.",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11606259",
                          "updatedAt": "2024-12-18T14:30:04Z",
                          "publishedAt": "2024-12-18T14:30:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "doesn't contain header files like petsc.h or petscao.h\n\nThese files are in $PETSC_DIR/include, not $PETSC_DIR/$PETSC_ARCH/include. When building with a PETSC_ARCH like is done when running the update_and_rebuild_petsc.sh script, you will not see all the files arranged such as you would see for a classic installation. C headers independent of configuration will be in $PETSC_DIR/include (moose/petsc/include) while headers dependent on configuration will be in $PETSC_DIR/$PETSC_ARCH/include (moose/petsc/arch-moose/include)",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11613330",
                          "updatedAt": "2024-12-19T05:59:12Z",
                          "publishedAt": "2024-12-19T05:58:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ddmoa"
                          },
                          "bodyText": "Sorry, I don't understand how the configuration-dependent headers and configuration-independent headers are set.\nMaybe I need to clarify the points I mentioned above about the headers. I downloaded PETSc version 3.21.5 and configured it using only the following command: ./configure --prefix=/xx/build --with-mpi-dir=/xx/build --download-fblaslapack=1 After installation, the build directory contains a include/petsc/finclude directory, and inside it, there are headers like petsc.h.",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11613941",
                          "updatedAt": "2024-12-19T07:28:20Z",
                          "publishedAt": "2024-12-19T07:27:06Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "that is definitely different from what I expected based on your OP from which I thought you only modified the fortran configuration in configure_petsc.sh. So you are running your configure command in the PETSc root directory?",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11622021",
                          "updatedAt": "2024-12-19T20:57:36Z",
                          "publishedAt": "2024-12-19T20:57:34Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ddmoa"
                          },
                          "bodyText": "Yes, I ran the command directly in the root directory. I don't think there's any fundamental difference between this and using the script.",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11623613",
                          "updatedAt": "2024-12-20T01:56:23Z",
                          "publishedAt": "2024-12-20T01:56:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "If you had been running our script then you would have been brining along a lot of configure arguments, so that's a substantial difference, and we do not use --prefix which is another substantial difference",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11660428",
                          "updatedAt": "2024-12-24T22:16:21Z",
                          "publishedAt": "2024-12-24T22:15:10Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "I don't understand at this point what's not working. When running your own configure command you are not getting fortran bindings?",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11660438",
                          "updatedAt": "2024-12-24T22:18:11Z",
                          "publishedAt": "2024-12-24T22:18:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ddmoa"
                          },
                          "bodyText": "It seems that the --prefix option is what makes the difference. For the PETSc I installed myself, if I don't use the --prefix option to set a custom installation path, those header files I mentioned earlier do not exist. However, if I use --prefix to set the installation directory to build, then build/include will contain petsc/finclude.\nIf I add the --prefix option to the PETSc installation script in MOOSE and specify another location, will MOOSE still work properly?",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11705157",
                          "updatedAt": "2024-12-31T11:44:22Z",
                          "publishedAt": "2024-12-31T11:44:21Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "Yes. You just will need to set PETSC_DIR to that location and make sure PETSC_ARCH is not set",
                          "url": "https://github.com/idaholab/moose/discussions/29561#discussioncomment-11752544",
                          "updatedAt": "2025-01-06T18:39:18Z",
                          "publishedAt": "2025-01-06T18:39:18Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Convergence problem of creep model",
          "author": {
            "login": "lucuo"
          },
          "bodyText": "Hello Moose Development Team,\nI am trying a creep model, but when the creep strain is large, the program always one step converge and then one step error Encountered inf or nan in material return mapping iterations. At element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0 In 1000 iterations the residual went from -11.8316 to -nan in 'creep'.. Could you please advise on how to improve convergence under large strains? Below are the relevant settings from my input file.\n[Physics/SolidMechanics/QuasiStatic]\n  [all]\n    strain = FINITE\n    incremental = true\n    add_variables = true\n    generate_output = 'stress_yy strain_yy creep_strain_yy '\n  []\n[]\n[Materials]\n  [elasticity_tensor]\n    type = ComputeIsotropicElasticityTensor\n    youngs_modulus = 5e11\n    poissons_ratio = 0.3\n  []\n [./creep]\n  type = Creepmodel\n  temperature = temp\n  coefficients = '2.5e-5 6e-8'\n  activation_energys = '18000 10000'\n[../]\n[./creep_plas]\n  type = ComputeMultipleInelasticStress\n  tangent_operator = elastic\n  inelastic_models = 'creep '\n  max_iterations = 50\n  absolute_tolerance = 1e-02\n[../]\n[]\n[BCs]\n\n  [u_bottom_fix]\n    type = DirichletBC\n    variable = disp_y\n    boundary = bottom\n    value = 0.0\n  []\n  [u_yz_fix]\n    type = DirichletBC\n    variable = disp_x\n    boundary = left\n    value = 0.0\n  []\n  [u_xy_fix]\n    type = DirichletBC\n    variable = disp_z\n    boundary = back\n    value = 0.0\n  []\n  [temp_fix]\n    type = DirichletBC\n    variable = temp\n    boundary = 'bottom top'\n    value = 1000.0\n  []\n  [./Pressure]\n    [./pressure]\n      boundary = 'top'\n      factor = -100e6\n    [../]\n  [../]\n[]\n\nHere is part of the program output.\nFramework Information:\nMOOSE Version:           git commit 4107adf72d on 2024-08-28\nLibMesh Version:         \nPETSc Version:           3.21.4\nSLEPc Version:           3.21.1\nCurrent Time:            Wed Jan  8 22:48:45 2025\nExecutable Timestamp:    Wed Jan  8 22:24:35 2025\n\nCheckpoint:\n  Wall Time Interval:      Every 3600 s\n  User Checkpoint:         Disabled\n  # Checkpoints Kept:      2\n  Execute On:              TIMESTEP_END \n\nParallelism:\n  Num Processors:          1\n  Num Threads:             1\n\nMesh: \n  Parallel Type:           replicated\n  Mesh Dimension:          3\n  Spatial Dimension:       3\n  Nodes:                   8\n  Elems:                   1\n  Num Subdomains:          1\n\nNonlinear System:\n  Num DOFs:                32\n  Num Local DOFs:          32\n  Variables:               { \"temp\" \"disp_x\" \"disp_y\" \"disp_z\" } \n  Finite Element Types:    \"LAGRANGE\" \n  Approximation Orders:    \"FIRST\" \n\nAuxiliary System:\n  Num DOFs:                11\n  Num Local DOFs:          11\n  Variables:               \"fast_neutron_flux\" { \"stress_yy\" \"strain_yy\" \"creep_strain_yy\" } \n  Finite Element Types:    \"LAGRANGE\" \"MONOMIAL\" \n  Approximation Orders:    \"FIRST\" \"CONSTANT\" \n\nExecution Information:\n  Executioner:             Transient\n  TimeStepper:             ConstantDT\n  TimeIntegrator:          ImplicitEuler\n  Solver Mode:             Preconditioned JFNK\n  PETSc Preconditioner:    lu mat_superlu_dist_fact: SamePattern  mat_superlu_dist_replacetinypivot: true \n\n\nTime Step 0, time = 0\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n+----------------+----------------+----------------+\n\n\nTime Step 1, time = 100000, dt = 100000\n 0 Nonlinear |R| = 5.000000e+07\n      0 Linear |R| = 5.000000e+07\n      1 Linear |R| = 3.944267e+07\n      2 Linear |R| = 1.637957e-06\n 1 Nonlinear |R| = 1.038691e+08\n      0 Linear |R| = 1.038691e+08\n      1 Linear |R| = 4.734065e+07\n      2 Linear |R| = 3.953094e-04\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -1654.13 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 1, time = 50000, dt = 50000\n 0 Nonlinear |R| = 5.000000e+07\n      0 Linear |R| = 5.000000e+07\n      1 Linear |R| = 3.826928e+07\n      2 Linear |R| = 9.195750e-07\n 1 Nonlinear |R| = 1.086685e+08\n      0 Linear |R| = 1.086685e+08\n      1 Linear |R| = 9.936241e+06\n      2 Linear |R| = 2.807456e-04\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -74.0775 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 1, time = 25000, dt = 25000\n 0 Nonlinear |R| = 5.000000e+07\n      0 Linear |R| = 5.000000e+07\n      1 Linear |R| = 3.640671e+07\n      2 Linear |R| = 2.675547e-06\n 1 Nonlinear |R| = 1.173146e+08\n      0 Linear |R| = 1.173146e+08\n      1 Linear |R| = 2.555997e+06\n      2 Linear |R| = 1.435902e-04\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.46939 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 1, time = 12500, dt = 12500\n 0 Nonlinear |R| = 5.000000e+07\n      0 Linear |R| = 5.000000e+07\n      1 Linear |R| = 3.393029e+07\n      2 Linear |R| = 3.391693e-07\n 1 Nonlinear |R| = 1.920391e+05\n      0 Linear |R| = 1.920391e+05\n      1 Linear |R| = 1.317353e+05\n      2 Linear |R| = 6.661266e-08\n 2 Nonlinear |R| = 4.183909e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 3.346897e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n+----------------+----------------+----------------+\n\n\nTime Step 2, time = 37500, dt = 25000\n 0 Nonlinear |R| = 2.762531e+07\n      0 Linear |R| = 2.762531e+07\n      1 Linear |R| = 7.143196e+03\n      2 Linear |R| = 6.244047e-06\n 1 Nonlinear |R| = 1.173032e+08\n      0 Linear |R| = 1.173032e+08\n      1 Linear |R| = 1.345613e+06\n      2 Linear |R| = 9.048020e-02\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 2, time = 25000, dt = 12500\n 0 Nonlinear |R| = 2.087095e+07\n      0 Linear |R| = 2.087095e+07\n      1 Linear |R| = 2.704644e+03\n      2 Linear |R| = 5.444010e-06\n 1 Nonlinear |R| = 1.556647e+05\n      0 Linear |R| = 1.556647e+05\n      1 Linear |R| = 5.730100e+04\n      2 Linear |R| = 7.099486e-05\n 2 Nonlinear |R| = 3.029730e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.424607e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n+----------------+----------------+----------------+\n\n\nTime Step 3, time = 50000, dt = 25000\n 0 Nonlinear |R| = 2.762283e+07\n      0 Linear |R| = 2.762283e+07\n      1 Linear |R| = 7.140029e+03\n      2 Linear |R| = 5.080629e-05\n 1 Nonlinear |R| = 1.172927e+08\n      0 Linear |R| = 1.172927e+08\n      1 Linear |R| = 1.345614e+06\n      2 Linear |R| = 1.282506e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 3, time = 37500, dt = 12500\n 0 Nonlinear |R| = 2.086908e+07\n      0 Linear |R| = 2.086908e+07\n      1 Linear |R| = 2.702685e+03\n      2 Linear |R| = 4.871648e-05\n 1 Nonlinear |R| = 1.556537e+05\n      0 Linear |R| = 1.556537e+05\n      1 Linear |R| = 5.729420e+04\n      2 Linear |R| = 2.581781e-04\n 2 Nonlinear |R| = 3.029417e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.424116e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n+----------------+----------------+----------------+\n\n\nTime Step 4, time = 62500, dt = 25000\n 0 Nonlinear |R| = 2.762035e+07\n      0 Linear |R| = 2.762035e+07\n      1 Linear |R| = 7.140039e+03\n      2 Linear |R| = 7.507184e-05\n 1 Nonlinear |R| = 1.172822e+08\n      0 Linear |R| = 1.172822e+08\n      1 Linear |R| = 1.345618e+06\n      2 Linear |R| = 9.754059e-02\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 4, time = 50000, dt = 12500\n 0 Nonlinear |R| = 2.086721e+07\n      0 Linear |R| = 2.086721e+07\n      1 Linear |R| = 2.702690e+03\n      2 Linear |R| = 6.907979e-05\n 1 Nonlinear |R| = 1.556427e+05\n      0 Linear |R| = 1.556427e+05\n      1 Linear |R| = 5.728751e+04\n      2 Linear |R| = 5.998405e-04\n 2 Nonlinear |R| = 3.029105e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.423635e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n|   5.000000e+04 |   7.189969e-04 |   9.189970e-04 |\n+----------------+----------------+----------------+\n\n\nTime Step 5, time = 75000, dt = 25000\n 0 Nonlinear |R| = 2.761787e+07\n      0 Linear |R| = 2.761787e+07\n      1 Linear |R| = 7.140123e+03\n      2 Linear |R| = 1.735079e-04\n 1 Nonlinear |R| = 1.172717e+08\n      0 Linear |R| = 1.172717e+08\n      1 Linear |R| = 1.345624e+06\n      2 Linear |R| = 1.619276e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 5, time = 62500, dt = 12500\n 0 Nonlinear |R| = 2.086534e+07\n      0 Linear |R| = 2.086534e+07\n      1 Linear |R| = 2.702732e+03\n      2 Linear |R| = 1.555194e-04\n 1 Nonlinear |R| = 1.556318e+05\n      0 Linear |R| = 1.556318e+05\n      1 Linear |R| = 5.728098e+04\n      2 Linear |R| = 1.631024e-03\n 2 Nonlinear |R| = 3.028796e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.423142e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n|   5.000000e+04 |   7.189969e-04 |   9.189970e-04 |\n|   6.250000e+04 |   8.987461e-04 |   1.098746e-03 |\n+----------------+----------------+----------------+\n\n\nTime Step 6, time = 87500, dt = 25000\n 0 Nonlinear |R| = 2.761539e+07\n      0 Linear |R| = 2.761539e+07\n      1 Linear |R| = 7.140077e+03\n      2 Linear |R| = 1.715144e-02\n 1 Nonlinear |R| = 1.172612e+08\n      0 Linear |R| = 1.172612e+08\n      1 Linear |R| = 1.345625e+06\n      2 Linear |R| = 1.265038e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 6, time = 75000, dt = 12500\n 0 Nonlinear |R| = 2.086347e+07\n      0 Linear |R| = 2.086347e+07\n      1 Linear |R| = 2.702736e+03\n      2 Linear |R| = 3.683948e-04\n 1 Nonlinear |R| = 1.556208e+05\n      0 Linear |R| = 1.556208e+05\n      1 Linear |R| = 5.727429e+04\n      2 Linear |R| = 3.772965e-03\n 2 Nonlinear |R| = 3.028476e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.422648e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n|   5.000000e+04 |   7.189969e-04 |   9.189970e-04 |\n|   6.250000e+04 |   8.987461e-04 |   1.098746e-03 |\n|   7.500000e+04 |   1.078495e-03 |   1.278495e-03 |\n+----------------+----------------+----------------+\n\n\nTime Step 7, time = 100000, dt = 25000\n 0 Nonlinear |R| = 2.761292e+07\n      0 Linear |R| = 2.761292e+07\n      1 Linear |R| = 7.140013e+03\n      2 Linear |R| = 8.744307e-03\n 1 Nonlinear |R| = 1.172507e+08\n      0 Linear |R| = 1.172507e+08\n      1 Linear |R| = 1.345627e+06\n      2 Linear |R| = 2.042160e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 7, time = 87500, dt = 12500\n 0 Nonlinear |R| = 2.086160e+07\n      0 Linear |R| = 2.086160e+07\n      1 Linear |R| = 2.702695e+03\n      2 Linear |R| = 4.448420e-03\n 1 Nonlinear |R| = 1.556099e+05\n      0 Linear |R| = 1.556099e+05\n      1 Linear |R| = 5.726742e+04\n      2 Linear |R| = 5.655096e-03\n 2 Nonlinear |R| = 3.028167e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.422181e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n|   5.000000e+04 |   7.189969e-04 |   9.189970e-04 |\n|   6.250000e+04 |   8.987461e-04 |   1.098746e-03 |\n|   7.500000e+04 |   1.078495e-03 |   1.278495e-03 |\n|   8.750000e+04 |   1.258245e-03 |   1.458245e-03 |\n+----------------+----------------+----------------+\n\n\nTime Step 8, time = 112500, dt = 25000\n 0 Nonlinear |R| = 2.761044e+07\n      0 Linear |R| = 2.761044e+07\n      1 Linear |R| = 7.140005e+03\n      2 Linear |R| = 1.648070e-03\n 1 Nonlinear |R| = 1.172402e+08\n      0 Linear |R| = 1.172402e+08\n      1 Linear |R| = 1.345631e+06\n      2 Linear |R| = 1.761336e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 8, time = 100000, dt = 12500\n 0 Nonlinear |R| = 2.085973e+07\n      0 Linear |R| = 2.085973e+07\n      1 Linear |R| = 2.702700e+03\n      2 Linear |R| = 8.285261e-03\n 1 Nonlinear |R| = 1.555989e+05\n      0 Linear |R| = 1.555989e+05\n      1 Linear |R| = 5.726074e+04\n      2 Linear |R| = 4.378199e-03\n 2 Nonlinear |R| = 3.027848e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.421676e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n|   5.000000e+04 |   7.189969e-04 |   9.189970e-04 |\n|   6.250000e+04 |   8.987461e-04 |   1.098746e-03 |\n|   7.500000e+04 |   1.078495e-03 |   1.278495e-03 |\n|   8.750000e+04 |   1.258245e-03 |   1.458245e-03 |\n|   1.000000e+05 |   1.437994e-03 |   1.637994e-03 |\n+----------------+----------------+----------------+\n\n\nTime Step 9, time = 125000, dt = 25000\n 0 Nonlinear |R| = 2.760797e+07\n      0 Linear |R| = 2.760797e+07\n      1 Linear |R| = 7.140087e+03\n      2 Linear |R| = 2.019849e-03\n 1 Nonlinear |R| = 1.172297e+08\n      0 Linear |R| = 1.172297e+08\n      1 Linear |R| = 1.345636e+06\n      2 Linear |R| = 1.212490e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 9, time = 112500, dt = 12500\n 0 Nonlinear |R| = 2.085786e+07\n      0 Linear |R| = 2.085786e+07\n      1 Linear |R| = 2.702714e+03\n      2 Linear |R| = 1.968096e-03\n 1 Nonlinear |R| = 1.555880e+05\n      0 Linear |R| = 1.555880e+05\n      1 Linear |R| = 5.725409e+04\n      2 Linear |R| = 8.983486e-03\n 2 Nonlinear |R| = 3.027538e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.421197e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n|   5.000000e+04 |   7.189969e-04 |   9.189970e-04 |\n|   6.250000e+04 |   8.987461e-04 |   1.098746e-03 |\n|   7.500000e+04 |   1.078495e-03 |   1.278495e-03 |\n|   8.750000e+04 |   1.258245e-03 |   1.458245e-03 |\n|   1.000000e+05 |   1.437994e-03 |   1.637994e-03 |\n|   1.125000e+05 |   1.617743e-03 |   1.817743e-03 |\n+----------------+----------------+----------------+\n\n\nTime Step 10, time = 137500, dt = 25000\n 0 Nonlinear |R| = 2.760550e+07\n      0 Linear |R| = 2.760550e+07\n      1 Linear |R| = 7.140022e+03\n      2 Linear |R| = 3.671282e-03\n 1 Nonlinear |R| = 1.172193e+08\n      0 Linear |R| = 1.172193e+08\n      1 Linear |R| = 1.345639e+06\n      2 Linear |R| = 2.377454e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 10, time = 125000, dt = 12500\n 0 Nonlinear |R| = 2.085599e+07\n      0 Linear |R| = 2.085599e+07\n      1 Linear |R| = 2.702691e+03\n      2 Linear |R| = 4.810857e-03\n 1 Nonlinear |R| = 1.555771e+05\n      0 Linear |R| = 1.555771e+05\n      1 Linear |R| = 5.724729e+04\n      2 Linear |R| = 1.579306e-02\n 2 Nonlinear |R| = 3.027224e+01\n Solve Converged!\n\nOutlier Variable Residual Norms:\n  disp_y: 2.420726e+01\n\nPostprocessor Values:\n+----------------+----------------+----------------+\n| time           | creep_strain_yy| strain_yy      |\n+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n|   1.250000e+04 |   1.797493e-04 |   3.797494e-04 |\n|   2.500000e+04 |   3.594985e-04 |   5.594986e-04 |\n|   3.750000e+04 |   5.392477e-04 |   7.392478e-04 |\n|   5.000000e+04 |   7.189969e-04 |   9.189970e-04 |\n|   6.250000e+04 |   8.987461e-04 |   1.098746e-03 |\n|   7.500000e+04 |   1.078495e-03 |   1.278495e-03 |\n|   8.750000e+04 |   1.258245e-03 |   1.458245e-03 |\n|   1.000000e+05 |   1.437994e-03 |   1.637994e-03 |\n|   1.125000e+05 |   1.617743e-03 |   1.817743e-03 |\n|   1.250000e+05 |   1.797492e-03 |   1.997492e-03 |\n+----------------+----------------+----------------+\n\n\nTime Step 11, time = 150000, dt = 25000\n 0 Nonlinear |R| = 2.760303e+07\n      0 Linear |R| = 2.760303e+07\n      1 Linear |R| = 7.139995e+03\n      2 Linear |R| = 2.400820e-02\n 1 Nonlinear |R| = 1.172088e+08\n      0 Linear |R| = 1.172088e+08\n      1 Linear |R| = 1.345641e+06\n      2 Linear |R| = 2.017448e-01\n\nEncountered inf or nan in material return mapping iterations.\nAt element 0 _qp=0 Coordinates (x,y,z)=(0.211325, 0.211325, 0.211325) block=0\nIn 1000 iterations the residual went from -5.4689 to -nan in 'creep'.\n\nTo recover, the solution will fail and then be re-attempted with a reduced time step.\n\n  Nonlinear solve did not converge due to DIVERGED_LINE_SEARCH iterations 1\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nTime Step 11, time = 137500, dt = 12500\n 0 Nonlinear |R| = 2.085412e+07\n      0 Linear |R| = 2.085412e+07\n      1 Linear |R| = 2.702677e+03\n      2 Linear |R| = 1.138983e-02\n 1 Nonlinear |R| = 1.555662e+05\n      0 Linear |R| = 1.555662e+05\n      1 Linear |R| = 5.724054e+04\n      2 Linear |R| = 2.217140e-02\n 2 Nonlinear |R| = 3.026916e+01\n Solve Converged!",
          "url": "https://github.com/idaholab/moose/discussions/29660",
          "updatedAt": "2025-01-09T02:44:14Z",
          "publishedAt": "2025-01-08T14:51:50Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nWe cannot take huge time steps sometimes. Simply because the element would be so deformed after such a step that it no longer makes geometrical sense.\nSo my recommendation is to maintain reasonable time steps through the simulation.\nSetting preset=false on displacements BCs can help if the deformed elements are near the boundary conditions",
                  "url": "https://github.com/idaholab/moose/discussions/29660#discussioncomment-11775824",
                  "updatedAt": "2025-01-08T16:34:01Z",
                  "publishedAt": "2025-01-08T16:34:00Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Computing gradient on both the reference and deformed configuration in the same kernel",
          "author": {
            "login": "TheGreatCid"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nHi all,\nIs it possible to a compute a gradient on the reference and on the deformed configuration in the same kernel?\nFor example, if I set use_displaced_mesh=false I want to compute a gradient on the reference configuration, and then I want to switch to computing a separate gradient on the displaced configuration.\nI normally compute gradients by just declaring a adcoupledgradient type, however I don't believe there is a way to specify the configuration in the declaration.\nAny insight is appreciated, thank you.",
          "url": "https://github.com/idaholab/moose/discussions/29655",
          "updatedAt": "2025-01-08T14:35:17Z",
          "publishedAt": "2025-01-07T18:44:26Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "maxnezdyur"
                  },
                  "bodyText": "Let's say you create a material class that computes the gradient. If in your input file you have two of these objects: one that has the use_displaced_mesh=false and the other true. Then you would have two materials that store the gradient information one for deformed and another for undeformed. From there you should be able to couple them into a kernel and perform any actions needed.",
                  "url": "https://github.com/idaholab/moose/discussions/29655#discussioncomment-11773849",
                  "updatedAt": "2025-01-08T13:55:23Z",
                  "publishedAt": "2025-01-08T13:55:22Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "TheGreatCid"
                          },
                          "bodyText": "Yea that's what I settled on. I just wanted to avoid having to do that because I am lazy.\nThanks!",
                          "url": "https://github.com/idaholab/moose/discussions/29655#discussioncomment-11774347",
                          "updatedAt": "2025-01-08T14:35:18Z",
                          "publishedAt": "2025-01-08T14:35:17Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "capillary pressure -another try",
          "author": {
            "login": "marinsiebert"
          },
          "bodyText": "Hello everyone,\nthis is a continuation of discussion #26790, so I guess one you guys @GiudGiud @cpgr @WilkAndy would be the ones to adress. So far I've been through the user manual and the available objects multiple times, however with no success. Maybe you can clarify this:\nThe sensitivity I am talking about in the discussion above does not seem to be related to wrong calculations in the capillary pressure as the approximation by van genuchten was chosen to fit available WRC-data.\nSince the capillary pressures are fine this must be related to either\na) insufficiently reproduced mass transport:\nin unsaturated porous media mass transport is often related to isothermal and thermal vapor  and liquid transport, such as described here in section 2.3.: https://acsess.onlinelibrary.wiley.com/doi/full/10.1002/vzj2.20173\nThis results in a equilibrium where water flows towards an area of increased temperature and vapor is transported away, up to a point where this equilibrium holds no longer such that no liquid flow occurs, leading to a dry area.\nI tried going a little bit in that direction using the ThermoDiffusion Kernel, which actually improved the results a little bit, however still not really satisfying:\n showing a lack of sensitivity but nicely repocing the shape\n showing kind of an inversed behaviour compared to the measured data (most likely due to drying front now progressing as fast) and also lack of sensitivity\nb) insufficiently reproduced phase change (evaporation):\nassuming that the capillary pressures are calculated correctly and mass transport is fine (more or less? see a)), maybe the amount of water evaporation due to increased temperature as calculated by IAWPS97 does not work properly (doubt that) or is simply not entirely applicable to unsaturated porous media?\nRight now I tend to think, that option a) is the likely candidate and that the mass transport equations are simply not appropiate for this type of problem.\nI would be very happy to hear your opinions on this.\nmarin",
          "url": "https://github.com/idaholab/moose/discussions/29379",
          "updatedAt": "2025-01-07T10:20:51Z",
          "publishedAt": "2024-12-08T16:35:12Z",
          "category": {
            "name": "Q&A Modules: Porous Flow"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "marinsiebert"
                  },
                  "bodyText": "It has been real quiet on this end and unfortunately I have no spare time left, so I will close the discussion as outdated.\nSome closing remarks on this if someone else tries to do something simila in the future:\nThe problem most likely lies in the fact, that thermodiffusion is not incorporated in the standard tool-box of porous flow. This can be done either by using a ThermoDiffusion or SoretDiffusion Kernel.\nAlternatively you can also populate a GenericMaterial with your own description of the thermal diffusion coefficients of your phases and then pass that to MatDiffusion, acting on your pressure, saturation or mass fraction (depending on the model you are using) and specifying you temperature variable as gradient.",
                  "url": "https://github.com/idaholab/moose/discussions/29379#discussioncomment-11595367",
                  "updatedAt": "2024-12-17T16:06:40Z",
                  "publishedAt": "2024-12-17T16:06:04Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Sorry I'm not actually a porous flow person so I could not help. You have the right experts tagged, they are likely just busy",
                          "url": "https://github.com/idaholab/moose/discussions/29379#discussioncomment-11595411",
                          "updatedAt": "2024-12-17T16:10:55Z",
                          "publishedAt": "2024-12-17T16:10:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "cpgr"
                          },
                          "bodyText": "Did you manage to get this working properly @marinsiebert?\nSorry I missed it last year but my end of year was hectic!",
                          "url": "https://github.com/idaholab/moose/discussions/29379#discussioncomment-11757197",
                          "updatedAt": "2025-01-07T05:13:54Z",
                          "publishedAt": "2025-01-07T05:13:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "marinsiebert"
                          },
                          "bodyText": "Unfortunately my contract ended and so has my time in research, so I was did not have the opportunity to delve in deeper, however, I am confident that the approach described above could work. I did a short simulation with the MatDiffusion Kernel together with the GenericMaterial, where the results were very good for the first heating, however, for subsequent heating phases the pressures show progressively increasing overshoot.\nThe diffusion coefficient in this case were based on De Vries (1958), so I guess they no not go well with the mass diffusion coefficients in my model. They may also not be applicable to this case with the generalised Darcy's law (As in the one PorousFlow uses if I am not mistaken), since De Vries does not explicitly describe the flow of the gaseous phase and uses Richards equation. .\nThis (MOYNE, C.; PERRE, P.. (1991). PROCESSES RELATED TO DRYING: PART I, THEORETICAL MODEL. , 9(5), 1135\u20131152. doi:10.1080/07373939108916746 ) might work, though.\nAnyhow, I think the module in the current state needs some tweaking to be applicable for the vadose zone (which makes sense, because I think it was initially developed for rock?)",
                          "url": "https://github.com/idaholab/moose/discussions/29379#discussioncomment-11759634",
                          "updatedAt": "2025-01-07T10:21:15Z",
                          "publishedAt": "2025-01-07T10:20:51Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Accessing _qp of a particular element",
          "author": {
            "login": "M16R24"
          },
          "bodyText": "How can the Gauss points associated with an element be accessed? How to get the elements that belong to a particular grain? Any source or documentation to understand the further mesh related functions can be highly useful.",
          "url": "https://github.com/idaholab/moose/discussions/29649",
          "updatedAt": "2025-01-07T00:43:51Z",
          "publishedAt": "2025-01-06T12:11:47Z",
          "category": {
            "name": "Q&A Meshing"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "ngrilli"
                  },
                  "bodyText": "@M16R24 if by \"grain\" you mean a region related to a single crystal in a polycrystal, then you can use neper to generate a mesh and MOOSE will be able to see each grain as a block. There is a related video here:\nhttps://www.youtube.com/watch?v=qG7EoX34hZ8&t=1123s\nOnce you have a grain as a block, there are plenty of things you can do, for instance postprocessors\nto process data on a single grain or assign a specific material to that grain.",
                  "url": "https://github.com/idaholab/moose/discussions/29649#discussioncomment-11748470",
                  "updatedAt": "2025-01-06T12:53:15Z",
                  "publishedAt": "2025-01-06T12:53:15Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "How can the Gauss points associated with an element be accessed?\n\nmost objects in moose (kernels, auxkernels) loop over element quadrature points, or are called during those loops (materials)\nThe inner routines of these objects, the ones that MOOSE users write (for example computeQpResidual for a kernel, computeQpProperties for a material), are called on every quadrature points. _current_elem is usually the name of the attribute for the element and _qp is the index of the current quadrature point. Then there are numerous class attributes (variables values, material properties, quadrature point locations as _q_point) that are indexed by quadrature points, and can be accessed with the index _qp within those inner routines",
                          "url": "https://github.com/idaholab/moose/discussions/29649#discussioncomment-11755823",
                          "updatedAt": "2025-01-07T00:43:52Z",
                          "publishedAt": "2025-01-07T00:43:51Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Modal Analysis and Component Mode Synthesis?",
          "author": {
            "login": "oldninja"
          },
          "bodyText": "Dear MOOSE Team,\nI am interested in performing modal analysis and component mode synthesis (CMS) using the moose framework. However, I looked for these terms in the documentation, and I could not find any information about them. That's why I opened this discussion to see if anyone could point me in the right direction. I'm more interested in performing the CMS part, sometimes referred as \"superelement\" in NASTRAN or \"substructure\" in Abaqus/CalculiX (more info here, here, or here). Any help would be greatly appreciated!\nThanks,",
          "url": "https://github.com/idaholab/moose/discussions/20174",
          "updatedAt": "2025-01-06T20:49:23Z",
          "publishedAt": "2022-01-29T17:54:34Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "@dschwen @somu15 do you know who might know about this?",
                  "url": "https://github.com/idaholab/moose/discussions/20174#discussioncomment-2093452",
                  "updatedAt": "2022-08-10T19:36:43Z",
                  "publishedAt": "2022-02-02T05:04:41Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "somu15"
                          },
                          "bodyText": "Tagging @cbolisetti and @lynnmunday. This may have something to do with Craig Bampton as per one of the shared documents.",
                          "url": "https://github.com/idaholab/moose/discussions/20174#discussioncomment-2093463",
                          "updatedAt": "2022-08-10T19:36:43Z",
                          "publishedAt": "2022-02-02T05:07:34Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "oldninja"
                          },
                          "bodyText": "Craig Bampton\n\nYes, that is usually the underlying method either in Abaqus or Nastran.",
                          "url": "https://github.com/idaholab/moose/discussions/20174#discussioncomment-2093478",
                          "updatedAt": "2022-08-10T19:36:43Z",
                          "publishedAt": "2022-02-02T05:11:31Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "cbolisetti"
                          },
                          "bodyText": "Yes, we have looked into implementing this in moose but never got funded. We don't have CMS/Craig Brampton right now, unfortunately.",
                          "url": "https://github.com/idaholab/moose/discussions/20174#discussioncomment-2093519",
                          "updatedAt": "2022-08-10T19:36:43Z",
                          "publishedAt": "2022-02-02T05:21:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "oldninja"
                          },
                          "bodyText": "I see, thank you for letting me know.",
                          "url": "https://github.com/idaholab/moose/discussions/20174#discussioncomment-2093598",
                          "updatedAt": "2022-08-10T19:44:08Z",
                          "publishedAt": "2022-02-02T05:56:54Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "lynnmunday"
                  },
                  "bodyText": "Here are some examples for modal anaylysis including eign analysis:\nhttps://mooseframework.inl.gov/modules/solid_mechanics/1d_elastic_waves.html\nIf you're still interested in this, we have added some capabilities to do reduced order models that could probably be used to for super elements.",
                  "url": "https://github.com/idaholab/moose/discussions/20174#discussioncomment-11753725",
                  "updatedAt": "2025-01-06T20:49:24Z",
                  "publishedAt": "2025-01-06T20:49:23Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Benchmarks for GPU speedup?",
          "author": {
            "login": "raguiar2"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nIs there a benchmark on how much faster GPU-based simulation is for different solvers? all I see in the official thread is that it will 'significantly speed up the simulation'.",
          "url": "https://github.com/idaholab/moose/discussions/29030",
          "updatedAt": "2025-01-04T09:52:09Z",
          "publishedAt": "2024-11-08T06:59:19Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThis is work in progress. We are currently able to assemble the system on the CPU and solve it on the GPU. Our next step is integrating both on the GPU.\nWhat do you need the benchmark for?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/29030#discussioncomment-11189467",
                  "updatedAt": "2024-11-08T13:57:18Z",
                  "publishedAt": "2024-11-08T13:57:17Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "raguiar2"
                          },
                          "bodyText": "I am choosing a tool for a set of Thermo-Mechanical Solves, and I wanted to test both MOOSE and MFEM on GPU. Just wanted to know if there was a baseline performance profile I could work off of.\nAlso happy to get involved in the discussion of integrating both on the GPU, if there's a thread you can point me to.",
                          "url": "https://github.com/idaholab/moose/discussions/29030#discussioncomment-11191465",
                          "updatedAt": "2024-11-08T17:05:18Z",
                          "publishedAt": "2024-11-08T17:05:17Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I think you'll find a lot more implemented CPU capability here than you will find with MFEM on the GPU. It depends of what you need in terms of physics & models.\nThere is no public project afaik, GPU support is being developed internally.",
                          "url": "https://github.com/idaholab/moose/discussions/29030#discussioncomment-11191493",
                          "updatedAt": "2024-11-08T17:09:06Z",
                          "publishedAt": "2024-11-08T17:09:05Z",
                          "isAnswer": true
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "So I would like to ask, will the GPU computing version based on MOOSE be made public? If yes, when will it be made public?\nBecause when I used phase field module, I found that the computing efficiency of GPU can reach 100~1000 times that of GPU.\nwei",
                          "url": "https://github.com/idaholab/moose/discussions/29030#discussioncomment-11731859",
                          "updatedAt": "2025-01-04T08:11:10Z",
                          "publishedAt": "2025-01-04T08:09:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "There is a pull request open now for integrating MFEM into moose. This will be our GPU capability",
                          "url": "https://github.com/idaholab/moose/discussions/29030#discussioncomment-11732203",
                          "updatedAt": "2025-01-04T09:10:40Z",
                          "publishedAt": "2025-01-04T09:10:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "PengWei97"
                          },
                          "bodyText": "Oh, that's great. Looking forward to having GPU acceleration in MOOSE. Could you provide the link of this pull request, so I can follow the development progress?",
                          "url": "https://github.com/idaholab/moose/discussions/29030#discussioncomment-11732350",
                          "updatedAt": "2025-01-04T09:46:08Z",
                          "publishedAt": "2025-01-04T09:46:07Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "#29633",
                          "url": "https://github.com/idaholab/moose/discussions/29030#discussioncomment-11732382",
                          "updatedAt": "2025-01-04T09:52:09Z",
                          "publishedAt": "2025-01-04T09:52:09Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "how to apply a shear load?",
          "author": {
            "login": "jessecarterMOOSE"
          },
          "bodyText": "Hi all, looking for an example or guidance on how to apply a shear load to a face. I've got an input file that contains the following:\n[BCs]\n  [load]\n    type = Pressure\n    boundary = top\n    function = load_ramp\n    variable = disp_x\n  []\n  [fix_x]\n    type = DirichletBC\n    boundary = bottom\n    value = 0\n    variable = disp_x\n  []\n  [fix_y]\n    type = DirichletBC\n    boundary = bottom\n    value = 0\n    variable = disp_y\n  []      \n[]\n\nBut no displacements occur. If I instead apply the Pressure to disp_y instead of disp_x, or alternatively take out the Pressure block and add a Pressure Action using the same function and boundary, I get the expected behavior, albeit a normal load rather than one applied tangent to the surface.",
          "url": "https://github.com/idaholab/moose/discussions/29631",
          "updatedAt": "2025-01-04T00:43:17Z",
          "publishedAt": "2025-01-02T18:45:50Z",
          "category": {
            "name": "Q&A Modules: Thermal Hydraulics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nCould that been it.\nDid you set displacements = 'disp_x disp_y disp_z' ?\nThe other problem I could see is the Qp residual of   return computeFactor() * (_normals[_qp](_component) * _test[_i][_qp]);\nwhich I think here means 0 for _normal(x). So maybe try using a NeumannBC instead?",
                  "url": "https://github.com/idaholab/moose/discussions/29631#discussioncomment-11724694",
                  "updatedAt": "2025-01-03T10:37:05Z",
                  "publishedAt": "2025-01-03T10:37:03Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "jessecarterMOOSE"
                          },
                          "bodyText": "Neumann BC seems to have the right effect. Does the magnitude of the value get interpreted the same way as Pressure BC?",
                          "url": "https://github.com/idaholab/moose/discussions/29631#discussioncomment-11729946",
                          "updatedAt": "2025-01-03T23:02:49Z",
                          "publishedAt": "2025-01-03T23:02:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "yes. the big difference is that when using the displaced mesh , the contribution to the Jacobian is the face stiffness for Pressure.\nthat and the normal factor I just mentioned",
                          "url": "https://github.com/idaholab/moose/discussions/29631#discussioncomment-11730372",
                          "updatedAt": "2025-01-04T00:43:17Z",
                          "publishedAt": "2025-01-04T00:43:17Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Periodic BC in FV",
          "author": {
            "login": "AdrienWehrle"
          },
          "bodyText": "Hi everyone,\nI'm working on an INSFV app and would need to apply periodic boundary conditions to test it on analytical solutions. I can't seem to find any example of the Periodic Action used in FV, and when I'm trying to add it in [BCs] it's simply being disregarded, (which was somehow expected).\nThe geometry is a simple 2D block so periodicity should be easy to catch.\nHere is my input file: https://github.com/AdrienWehrle/diuca/blob/PR_ViscousFlowFVTests/inputs/viscous_diuca/iceslab_fv_2d_SI_nv.i\nI'm on moose-libmesh 2024.12.02 and moose-tools 2024.11.13, and the latest version of moose on master.\nThanks a lot in advance for your help!",
          "url": "https://github.com/idaholab/moose/discussions/29537",
          "updatedAt": "2025-01-03T13:34:27Z",
          "publishedAt": "2024-12-13T12:20:37Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nWe have only implemented periodic BCs for nodal variables.\nFor FV, it would be possible to do it through the Functor system:\n\ncreate a new object deriving from the FVDirichletBC class\ncompute the geometrical transformation from the local face to the face where the value should be the same\ncreate a functor argument (FaceArg most likely) for that other face\nreturn the variable_functor(face arg, current state)\n\nThis would connect the value on one face to another",
                  "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11558001",
                  "updatedAt": "2024-12-13T14:47:13Z",
                  "publishedAt": "2024-12-13T14:47:12Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "AdrienWehrle"
                          },
                          "bodyText": "Should I base that new object on https://github.com/idaholab/moose/blob/cf0cd9d67ad6180c403df50ab5cfc220c9bfa6df/framework/src/actions/AddPeriodicBCAction.C ?",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11558474",
                          "updatedAt": "2024-12-13T15:21:24Z",
                          "publishedAt": "2024-12-13T15:21:16Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AdrienWehrle"
                          },
                          "bodyText": "While I understand your points 1, 3 and 4, I'm not sure I understand what you mean by geometrical transformation from the local face to the other. In principle I do, but in MOOSE terms, I don't really see how that would be implemented.",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11558520",
                          "updatedAt": "2024-12-13T15:25:35Z",
                          "publishedAt": "2024-12-13T15:25:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "no you should base it off of FVDirichletBC",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11558660",
                          "updatedAt": "2024-12-13T15:37:51Z",
                          "publishedAt": "2024-12-13T15:37:50Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "actually FVFunctorDirichletBC.\nI ll take a look today. This wont work in parallel for now",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11558680",
                          "updatedAt": "2024-12-13T15:39:32Z",
                          "publishedAt": "2024-12-13T15:39:32Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AdrienWehrle"
                          },
                          "bodyText": "I see! Thanks a lot!",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11558716",
                          "updatedAt": "2024-12-13T15:42:15Z",
                          "publishedAt": "2024-12-13T15:42:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "can you please try to use this\n#29540\nyou will need to define the geometric transformation between the two boundaries, create a new functor that is evaluated on the \"other boundary\" when called on the \"first\" boundary\nuse that functor in a FVDirichletBC",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11560750",
                          "updatedAt": "2024-12-13T18:32:01Z",
                          "publishedAt": "2024-12-13T18:32:00Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AdrienWehrle"
                          },
                          "bodyText": "Thanks for working on this! I'm trying to follow the steps but struggle a bit. I wrote the geometric transformations (very simple in my case since it's just a 2D block with regular mesh):\n[Functions]\n  [transform_x]\n    type = ParsedFunction\n    expression = 'length'\n    symbol_names = 'length'\n    symbol_values = '${length}'\n  []\n  [transform_y]\n    type = ParsedFunction\n    expression = '1'\n  []\n[]\n\nthen I passed them in the new object you created but I'm not sure that's actually right.\n[FunctorMaterials]\n  [ice]\n    type = FVIceMaterialSI\n    velocity_x = \"vel_x\"\n    velocity_y = \"vel_y\"\n    pressure = \"pressure\"\n    output_properties = 'mu_ice rho_ice eps_xx eps_yy sig_xx sig_yy eps_xy sig_xy'\n    outputs = \"out\"\n  []\n  [translate_vel_x]\n    type = ADFunctorTransformFunctorMaterial\n    prop_names = 'transformed_vel_x'\n    prop_values = 'vel_x'\n    x_functor = 'transform_x'\n    y_functor = 'transform_y'\n    z_functor = '0'\n  []\n  [translate_vel_y]\n    type = ADFunctorTransformFunctorMaterial\n    prop_names = 'transformed_vel_y'\n    prop_values = 'vel_y'\n    x_functor = 'transform_x'\n    y_functor = 'transform_y'\n    z_functor = '0'\n  []\n  [translate_pressure]\n    type = ADFunctorTransformFunctorMaterial\n    prop_names = 'transformed_pressure'\n    prop_values = 'pressure'\n    x_functor = 'transform_x'\n    y_functor = 'transform_y'\n    z_functor = '0'\n  []\n[]\n\nIf by any chance those objects are correct, then I think should pass them in a DirichletBC as you said. I understand it as the following, where translated_vel_y coming from the left boundary would be applied through a DirichletBC on the right boundary. In that sense I feel like a CoupledVarDirichletBC would be needed, like the one I worked on for FE but for FV, here. Then it would give a BC like the following:\n[periodic_right]\n    type = CoupledVarDirichletBC\n    variable = vel_x\n    boundary = 'right'\n    v = transformed_vel_x\n[]\n\nBut that feels very odd compared to the steps you gave above which makes me think I might be off track here.\nMy input file is here",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11580287",
                          "updatedAt": "2024-12-16T12:14:30Z",
                          "publishedAt": "2024-12-16T11:55:37Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Use a (AD?)FunctorDirichletBC.\nWe have not created another variable here, just a functor material property",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11581194",
                          "updatedAt": "2024-12-16T13:27:41Z",
                          "publishedAt": "2024-12-16T13:27:40Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AdrienWehrle"
                          },
                          "bodyText": "Ah yes indeed, missed that!\nNow I have\n[periodic_vel_x]\n    type = FVFunctorDirichletBC\n    variable = vel_x\n    boundary = 'right'\n    functor = transformed_vel_x\n[]\n[periodic_vel_y]\n    type = FVFunctorDirichletBC\n    variable = vel_y\n    boundary = 'right'\n    functor = transformed_vel_y\n[]\n[periodic_pressure]\n    type = FVFunctorDirichletBC\n    variable = pressure\n    boundary = 'right'\n    functor = transformed_pressure\n[]\n\nand get\nThe AD object 'periodic_vel_x' is requesting the functor 'transformed_vel_x' as a non-AD functor even though it is truly an AD functor, which is not allowed, since this may unintentionally drop derivatives.\n\nADFunctorDirichletBC doesn't exist afaik, should I create it?",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11583078",
                          "updatedAt": "2024-12-16T16:15:33Z",
                          "publishedAt": "2024-12-16T16:13:45Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "it does exist as FVADFunctorDirichletBC",
                          "url": "https://github.com/idaholab/moose/discussions/29537#discussioncomment-11583339",
                          "updatedAt": "2024-12-16T16:37:58Z",
                          "publishedAt": "2024-12-16T16:37:57Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Copy and Paste error",
          "author": {
            "login": "bytownite"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n I have consulted the Posting Guidelines.\n I have searched the Discussions Forum and MOOSE Framework Troubleshooting and have not found what I was looking for\n Q&A Getting Started is the most appropriate category for my question (trouble installing, beginner user, ...)\n\nIssue or question about MOOSE\nHello\nI recently started to use Moose in the Ubuntu environment (windows 11).\nWhile following examples in Moose tutorials, I found that if I copy a folder and paste it to a new empty folder, the system shows an error message saying that there are some overlapping files. I tried to overlap the files, but I could not paste them. One of the issued files is ExampleApp.\nThere is no error if I use Linux code for copying & paste in the Ubuntu terminal.\nCould you tell me why this difference occurred?\nThank you.\n(Optional) code in question / simulation log / errors\nNo response\nEncountering Errors? Please include diagnostic output\nNo response",
          "url": "https://github.com/idaholab/moose/discussions/29636",
          "updatedAt": "2025-01-03T10:32:34Z",
          "publishedAt": "2025-01-03T01:27:03Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "hello\nthe content of the files you copy pasted is likely the problem. in C++ you cannot define the same object or the same routine twice.\nEverything should be renamed inside the copy-pasted files if the original files are still being compiled together",
                  "url": "https://github.com/idaholab/moose/discussions/29636#discussioncomment-11724662",
                  "updatedAt": "2025-01-03T10:32:34Z",
                  "publishedAt": "2025-01-03T10:32:34Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}