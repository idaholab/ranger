{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyNC0xMC0yNVQwNjo1Njo0Ni0wNjowMM4AbAes"
    },
    "edges": [
      {
        "node": {
          "title": "Difference in function boundary condition solution to expected values",
          "author": {
            "login": "AmbroiseJuston"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nGood afternoon,\nI am working on a problem which required me changing a boundary condition to simulate different test conditions. Basically i am doing an IV plot of an electrical component.\nWe were trying to validate which way would better represent sweeping the IV plane (from 0v to 1v) and had some questions on why certain results diverged.\nOption 1: we can manually solve for steady state (~10 units of time) and then use the final state as the IC of the next simulation, increasing the voltage by a certain amount (0.1 for example).\nOption 2: we can used a piecewise function and create a discrete stair function with increments of 0.1 after x time (~10 units of time to let it each steady state at that condition.\nOption 3: create another piecewise function but linearly increasing from 0 to 1 and then back down.\nI can see how option 3 would be different that then other solutions however what i do not understand if how options 1 and 2 diverge because in my mind they are equivalent in the long run. The difference is if we do the step manually or as a discrete step function.\nIs there a difference between how MOOSE would evaluate the results for options 1 and 2?\nThe step function being used is shown below:\n   [./bc_function_step]\n    type = PiecewiseLinear\n    y = '0 0 0.001  0.001  0.01  0.01  0.1   0.1  0.2   0.2  0.3   0.3  0.4  0.4  0.5   0.5  0.6  0.6  0.7   0.7 0.8  0.8 0.9   0.9 1      1'\n    x = '0 5 5.001  15    15.001  25  25.001  35 35.001 45  45.001 55  55.001 65 65.001 75  75.001 85 85.001 95 95.001 105 105.001 115 115.001 125'\n    scale_factor = 1.0\n  [../]\n\nand the code that reads in the .e as the new IC for the simulation is defined here:\n[UserObjects]\n  [exo_soln]\n    type = SolutionUserObject\n    mesh = 'etpf-23_test_out_IC23.e'\n    system_variables = 'c'\n    timestep = LATEST\n  []\n[]",
          "url": "https://github.com/idaholab/moose/discussions/28735",
          "updatedAt": "2024-10-29T03:15:56Z",
          "publishedAt": "2024-10-01T00:38:56Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nAre you using pseudo timesteps in all these simulations? So timesteps but with no time derivative kernel so a steady state is reached on every time step?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10803563",
                  "updatedAt": "2024-10-01T00:57:17Z",
                  "publishedAt": "2024-10-01T00:57:16Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "AmbroiseJuston"
                          },
                          "bodyText": "there is a time derivative kernel included and we are running until it reaches to steady-state if that was the question",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10813915",
                          "updatedAt": "2024-10-01T21:42:33Z",
                          "publishedAt": "2024-10-01T21:42:32Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I could see the time integration error be different in option 1 and 2.\nhow different are they? And how do you know the solution is at steady state after 10 units of time? did you use the built-in steady state detection?",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10814156",
                          "updatedAt": "2024-10-01T22:24:41Z",
                          "publishedAt": "2024-10-01T22:24:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AmbroiseJuston"
                          },
                          "bodyText": "They are off by around 80-120%, depending on the voltage at the step.\nWe have data showing that once it runs for around 5-10 ns of simulation time, the current (the quantity of interest) in the system reaches an equilibrium. To make sure, we are running for 20-30ns of simulation time. We know there is a built-in steady state solver, but this is mostly reusing the code of when we were interested in running for a certain amount of time. We also wanted to have more control over when the application ends while doing the sweep.",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10823181",
                          "updatedAt": "2024-10-02T16:42:13Z",
                          "publishedAt": "2024-10-02T16:41:19Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "how are you comparing the two solutions? visually using the exodus file at the last time step (that part is important of course)\n\nWe know there is a built-in steady state solver\n\nit should be as easy as setting the executioner type to \"Steady\" and passing \"--allow-unused\" on the command line for the unused executiner parameters.\nThis might tell you which solution has unexpected results",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10826128",
                          "updatedAt": "2024-10-02T23:26:54Z",
                          "publishedAt": "2024-10-02T23:26:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AmbroiseJuston"
                          },
                          "bodyText": "Both visually and we are comparing the current that passes through the sample. The conductivity are comparable between options. The biggest difference is that difference in steady state current which should be same same if the conditions are identical between the options.\nWe can't just move it to a steady solve because one of our kernels on chemical potential uses some features from the transient solver.",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10861305",
                          "updatedAt": "2024-10-06T22:10:16Z",
                          "publishedAt": "2024-10-06T22:08:13Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "@cticenhour do you see why that could be? Or can you think of someone who does electronics w/ moose?",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10862636",
                          "updatedAt": "2024-10-07T04:11:18Z",
                          "publishedAt": "2024-10-07T04:11:17Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AmbroiseJuston"
                          },
                          "bodyText": "For some clarification, we are using phase-field for this type of analysis in case that helps",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10894536",
                          "updatedAt": "2024-10-09T15:58:04Z",
                          "publishedAt": "2024-10-09T15:58:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "so phase field + electronics.  Is phase field to compute the conductivities / material properties?\nI wonder if @mangerij could help us here?\n@csdechant do you know about this field?",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10903189",
                          "updatedAt": "2024-10-10T11:28:28Z",
                          "publishedAt": "2024-10-10T11:28:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "AmbroiseJuston"
                          },
                          "bodyText": "Phase field is used for the analysis of memristors. For some more context, we also ran some tests with the energy function kernel to see if the problem was it was not actually reaching a system steady state, but it seems to. Also, when stepping the BC in voltage, there is no accompanying increase in the energy function at the same time as (we think) we should expect the same is true when doing it by hand it seems.",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10921489",
                          "updatedAt": "2024-10-12T08:25:19Z",
                          "publishedAt": "2024-10-12T08:25:18Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "so you're saying you are finding a missing coupling effect?\nHow is the coupling performed? In a single-system approach or with multiapps?\nIf in a single system approach, any auxiliary variable involved in the coupling ? (these can introduce lag)\nIf a multiapp approach, did you turn on fixed point iterations?",
                          "url": "https://github.com/idaholab/moose/discussions/28735#discussioncomment-10923353",
                          "updatedAt": "2024-10-12T15:29:34Z",
                          "publishedAt": "2024-10-12T15:29:34Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Constraints for array variable on boundaries",
          "author": {
            "login": "pj131611"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nGreetings!\nI'm looking for a constraint function that constrain the boundary value of the same variable through multiple boundaries. But the problem is I'm working with array variables and I couldn't find a constraint for array. So my question is does such function exist? If not, would it be reasonable to write a constraint function that inherit from EqualValueBoundaryConstraint or TiedValueConstraint but with array variable and component as input?\nThanks",
          "url": "https://github.com/idaholab/moose/discussions/28860",
          "updatedAt": "2024-10-29T03:10:16Z",
          "publishedAt": "2024-10-16T02:00:20Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nNo I don't think we have that at the moment but feel free to implement it.\nPlease let us know if you hit any difficulties doing so",
                  "url": "https://github.com/idaholab/moose/discussions/28860#discussioncomment-10954230",
                  "updatedAt": "2024-10-16T02:41:51Z",
                  "publishedAt": "2024-10-16T02:41:50Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "pj131611"
                          },
                          "bodyText": "Cool. I started with inherit from Constraint class and replace the variable with arraymoosevariable and here comes the first problem while testing:\n*** ERROR ***\nUnknown type of Constraint object\n\nAfter doing a little bit of digging around, it seems like I need add this new constraint into Constraint Warehouse and objects, which will make me re-make moose. Is there a way to avoid this? It takes way too long to re-make the whole moose framework.",
                          "url": "https://github.com/idaholab/moose/discussions/28860#discussioncomment-10956142",
                          "updatedAt": "2024-10-16T07:28:20Z",
                          "publishedAt": "2024-10-16T07:28:19Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "hello\nthe Constraint class should be the base class for your new objects most likely.\nIt only brings a variable parameter which you can use and some background calls to the subproblem to trigger the right kind of re-iniit.\nIf you inherit from the Constraint class, your object will be added to the Constraint warehouse as expected",
                          "url": "https://github.com/idaholab/moose/discussions/28860#discussioncomment-10959214",
                          "updatedAt": "2024-10-16T12:08:52Z",
                          "publishedAt": "2024-10-16T12:08:51Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "pj131611"
                          },
                          "bodyText": "Hi there!\nA surprising problem arise while I'm trying to simplify the mesh: Is there a way to convert the input unstructured mesh(triangles and simplex) to structured mesh(squares and cubes)? It seems a lot easier to play with structured mesh.",
                          "url": "https://github.com/idaholab/moose/discussions/28860#discussioncomment-11070382",
                          "updatedAt": "2024-10-28T03:43:11Z",
                          "publishedAt": "2024-10-28T03:43:10Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "not in a general way. Most shapes described with unstructured mesh cannot be described with structured meshes\nYou can generate simple structured meshes with this:\nhttps://mooseframework.inl.gov/source/meshgenerators/CartesianMeshGenerator.html\nUnder the hood they are still represented as unstructured meshes though. MOOSE does not support the libmesh structured mesh",
                          "url": "https://github.com/idaholab/moose/discussions/28860#discussioncomment-11082003",
                          "updatedAt": "2024-10-29T03:10:17Z",
                          "publishedAt": "2024-10-29T03:10:16Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "How to Update Boundary Name Dynamically During a Simulation in MOOSE",
          "author": {
            "login": "Traiwit"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nHi everyone,\nI\u2019m trying to implement a feature where the boundary name can be updated dynamically during the simulation. Below is an example of the boundary condition I\u2019m working with:\n[bc_topol0000_LGFlux]\n  type = PorousFlowPiecewiseLinearSink\n  variable = porepressure_L1\n  boundary = 'topol_new'\n  pt_vals = '-1e9 1e9'\n  multipliers = '-1e9 1e9'\n  flux_function = 1e-2\n  PT_shift = AuxFx_rhogh\n  fluid_phase = 0\n  use_mobility = false\n  use_relperm = false\n[]\n\nMy goal is to change the boundary name (e.g., from 'topol_new' to something else) based on simulation time or other control logic.\nI have a few ideas but need some guidance on how to implement this:\n\n\nUse [Controls] to update the boundary name dynamically.\n\n\nCreate a custom BC class that updates the boundary name based on a list of boundaries and their associated times.\nHere\u2019s a starting point of my custom class idea:\n\n\nvoid PorousFlowBEH_PiecewiseLinearSink::updateBoundary()\n{\n  Real current_time = _fe_problem.time();  // Get the current simulation time\n\n  for (size_t i = 0; i < _time_per_boundary.size(); ++i)\n  {\n    if (current_time <= _time_per_boundary[i])\n    {\n      _current_boundary_index = i;\n      break;\n    }\n  }\n\n  const BoundaryName & active_boundary = _boundaries[_current_boundary_index];\n\n  _console << \"Current time: \" << current_time << std::endl\n           << \"Active boundary: \" << active_boundary << std::endl\n           << std::flush;\n}\n\nIn my new BC block, I\u2019d like to specify multiple boundaries and the time points at which they should change:\n[bc_topol0000_LGFlux]\n  type = PorousFlowBEH_PiecewiseLinearSink\n  variable = porepressure_L1\n  boundary = 'TOPOLSRF_F000_EQUIL'\n  boundaries = 'TOPOLSRF_F000_EQUIL TOPOLSRF_F001_PITX1_DMP1 TOPOLSRF_F002_PITX2_PITF1 TOPOLSRF_F003_PITX3_DMP2'\n  time_per_boundary = '0 1 2 3'\n  pt_vals = '-1e9 1e9'\n  multipliers = '-1e9 1e9'\n  flux_function = 1\n  char_elem_length_n = charElLength_M0\n  PT_shift = AuxFx_rhogh\n  fluid_phase = 0\n  use_mobility = true\n  use_relperm = false\n[]\n\nQuestions:\n\n\nHow can I get access to the 'boundary' property within my custom BC class so I can update it dynamically?\n\n\nIs it possible to leverage the [Controls] system to handle this kind of boundary update, or would a new custom class be the better approach?\n\n\nThank you!\nTraiwit\nnote: i'm aware of the option that having multiple BC and use multiple  [ConditionalFunctionEnableControl]\nHowever, we have more than 200+ steps/BCs, we find that having many objects on very large scale simulation is not very optimal",
          "url": "https://github.com/idaholab/moose/discussions/28849",
          "updatedAt": "2024-10-29T03:01:39Z",
          "publishedAt": "2024-10-15T08:57:47Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nSo are you trying to update the boundary name in the mesh? (e.g. the new one does not exist at the beginning)\nOr change the boundary on which the BC is active?\n\nUse [Controls] to update the boundary name dynamically.\n\nThat's not currently controllable. To control a parameter, it has to be declared controllable in the validParams.\nHere considering there are conversions done between the names and ids in the initialization of the boundary-restrictable interface, you would need to re-initialize the boundary-restrictable-derived object every time.\n\nHow can I get access to the 'boundary' property within my custom BC class so I can update it dynamically?\n\nBoundary restriction is currently fixed.\n\nHowever, we have more than 200+ steps/BCs, we find that having many objects on very large scale simulation is not very optimal\n\nIt's not optimal but if you are worried about readability, you can stash additional objects in separate files using input files includes.\nSomething like:\n!include all_bcs.i",
                  "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10947899",
                  "updatedAt": "2024-10-15T13:12:10Z",
                  "publishedAt": "2024-10-15T13:12:10Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "Traiwit"
                  },
                  "bodyText": "Hi @GiudGiud\n\nSo are you trying to update the boundary name in the mesh? (e.g. the new one does not exist at the beginning)\nOr change the boundary on which the BC is active?\n\nchange the boundary on which the BC is active, this is what I want to do\nnoted, i had an idea last night:\nuse UO to read vector of surface names with respect to time and generate a container surface name\nso the surface that feed into BC is always the same (the container surface name), but nodeset/sides will be different at each step.\nwill give this a try and keep you updated",
                  "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10953242",
                  "updatedAt": "2024-10-15T23:19:07Z",
                  "publishedAt": "2024-10-15T23:19:06Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "josebastiase"
                          },
                          "bodyText": "Hi Traiwit,\nI actually had the same issue a couple of months ago. I ended up writing a Python script to generate a CSV with the active/inactive schedule for the boundary conditions, which I then imported into MOOSE using Functions and Controls. After that, I wrote another script to generate the longer MOOSE input file automatically.\nThis method worked well for me, but a bit tedious.",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10956157",
                          "updatedAt": "2024-10-16T07:30:47Z",
                          "publishedAt": "2024-10-16T07:30:22Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi guys,\nyeh so i manage to do it, below is the summary of how it works\nThe UpdateSurfaceTimeBased object dynamically switches between predefined boundary surfaces at specific time points during the simulation. It performs a 1:1 copy of the sides from the selected surface to a new \"container boundary\", clearing any pre-existing sides in the target boundary each time a switch occurs. The copied boundary sides (container boundary) can then be used for applying boundary conditions\nwhere the input file block will look like this:\n    [./update_surface]\n      type = UpdateSurfaceTimeBased\n      surface_list = 'TOPOLSRF_F000_EQUIL TOPOLSRF_F001_PITX1_DMP1 TOPOLSRF_F002_PITX2_PITF1 TOPOLSRF_F003_PITX3_DMP2'\n      time_per_surface = '0 1 2 3'\n      new_boundary_id = 10005                         // container surface ID\n      new_boundary_name = topol_time_new  // container surface name\n      execute_on = 'TIMESTEP_BEGIN'\n    [../]\n\n#include \"UpdateSurfaceTimeBased.h\"\n#include \"MooseMeshUtils.h\"\n#include \"libmesh/mesh.h\"\n\nregisterMooseObject(\"moose_behApp\", UpdateSurfaceTimeBased);\n\nInputParameters\nUpdateSurfaceTimeBased::validParams()\n{\n  InputParameters params = DomainUserObject::validParams();\n\n  params.addRequiredParam<std::vector<BoundaryName>>(\"surface_list\", \n      \"List of surfaces to switch between based on time.\");\n  params.addRequiredParam<std::vector<Real>>(\"time_per_surface\", \n      \"Time points to switch surfaces.\");\n  params.addRequiredParam<BoundaryName>(\"new_boundary_name\", \n      \"The name of the new boundary.\");\n  params.addRequiredParam<BoundaryID>(\"new_boundary_id\", \n      \"The ID of the new boundary.\");\n\n  return params;\n}\n\nUpdateSurfaceTimeBased::UpdateSurfaceTimeBased(const InputParameters & parameters)\n  : DomainUserObject(parameters),\n    _pid(_communicator.rank()),\n    _neighbor_side(_assembly.neighborSide()),\n    _surface_list(getParam<std::vector<BoundaryName>>(\"surface_list\")),\n    _time_per_surface(getParam<std::vector<Real>>(\"time_per_surface\")),\n    _new_boundary_name(getParam<BoundaryName>(\"new_boundary_name\")),\n    _new_boundary_id(getParam<BoundaryID>(\"new_boundary_id\")),\n    _boundary_info(_mesh.getMesh().get_boundary_info())\n{\n\n}\n\nvoid UpdateSurfaceTimeBased::initialize()\n{\n  _remove.clear();\n  updateBoundary();  // Select and copy the appropriate boundary based on time\n}\n\nvoid UpdateSurfaceTimeBased::updateBoundary()\n{\n  Real current_time = _fe_problem.time();\n  unsigned int surface_index = 0;\n\n  // Find the correct surface based on the current time\n  for (size_t i = 0; i < _time_per_surface.size(); ++i)\n  {\n    if (current_time <= _time_per_surface[i])\n    {\n      surface_index = i;\n      break;\n    }\n  }\n\n  const BoundaryName & selected_surface = _surface_list[surface_index];\n  const BoundaryID selected_id = MooseMeshUtils::getBoundaryID(selected_surface, _mesh.getMesh());\n\n  // Copy the selected surface to the new boundary\n  copyBoundaryData(selected_id, _new_boundary_id);\n  _boundary_info.sideset_name(_new_boundary_id) = _new_boundary_name;\n\n\n  _console << \"Selected surface: \" << selected_surface << \" selected_id: \" << selected_id\n           << \" copied to new boundary: \" << _new_boundary_name << \" _new_boundary_id: \" << _new_boundary_id\n           << \" at time: \" << current_time << std::endl;\n}\n\nvoid UpdateSurfaceTimeBased::copyBoundaryData(BoundaryID from, BoundaryID to)\n{\n  // _remove.clear();\n\n  _console << \" copyBoundaryData selected_id: \" << from << \" to\" << to << std::endl;\n  const auto & mesh = _mesh.getMesh();\n  const unsigned int n_elem = mesh.n_elem();\n\n  // Clear the target boundary before copying\n   // Clear the 'to' boundary before copying from 'from'\n  // clearBoundary(to);\n\n  // Iterate over all elements to copy sides from 'from' to 'to'\n  for (unsigned int i = 0; i < n_elem; ++i)\n  {\n    const Elem * elem = mesh.elem_ptr(i);\n    for (unsigned int side = 0; side < elem->n_sides(); ++side)\n    {\n      if (_boundary_info.has_boundary_id(elem, side, from))\n      {\n        _boundary_info.add_side(elem, side, to);\n      }\n    }\n  }\n\n  // Set the name of the new boundary\n  _boundary_info.sideset_name(to) = _new_boundary_name;\n}\n\nvoid UpdateSurfaceTimeBased::finalize()\n{\n  updateBoundary(); \n  synchronizeBoundaryInfo(_mesh);\n}\n\n\nvoid \nUpdateSurfaceTimeBased::threadJoin(const UserObject & uo)\n{\n  const auto & other = static_cast<const UpdateSurfaceTimeBased &>(uo);\n  for (const auto & [pid, list] : other._remove)\n    _remove[pid].insert(_remove[pid].end(), list.begin(), list.end());\n}\n\nvoid \nUpdateSurfaceTimeBased::synchronizeBoundaryInfo(MooseMesh & mesh)\n{\n  mesh.getMesh().get_boundary_info().parallel_sync_side_ids();\n  mesh.getMesh().get_boundary_info().parallel_sync_node_ids();\n  mesh.buildNodeListFromSideList();\n}\n\n// void UpdateSurfaceTimeBased::clearBoundary(BoundaryID to)\n// {\n//   const auto & mesh = _mesh.getMesh();\n//   const unsigned int n_elem = mesh.n_elem();\n\n//   // Remove all sides associated with the 'to' boundary\n//   for (unsigned int i = 0; i < n_elem; ++i)\n//   {\n//     const Elem * elem = mesh.elem_ptr(i);\n//     for (unsigned int side = 0; side < elem->n_sides(); ++side)\n//     {\n//       if (_boundary_info.has_boundary_id(elem, side, to))\n//       {\n//         _boundary_info.remove_side(elem, side, to);\n//       }\n//     }\n//   }\n\n//   // Remove all nodes associated with the 'to' boundary\n//   auto & nodeset_map = _boundary_info.get_nodeset_map();\n//   std::vector<const Node *> nodes_to_remove;\n//   for (const auto & pair : nodeset_map)\n//   {\n//     if (pair.second == to)\n//       nodes_to_remove.push_back(pair.first);\n//   }\n\n//   for (const auto node : nodes_to_remove)\n//     _boundary_info.remove_node(node, to);\n// }",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10958626",
                          "updatedAt": "2024-10-16T11:08:28Z",
                          "publishedAt": "2024-10-16T11:08:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I think you will want your objects to be boundary restricted to these new boundaries (as well as the old one?) from the very start.",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10959182",
                          "updatedAt": "2024-10-16T12:06:28Z",
                          "publishedAt": "2024-10-16T12:06:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "to be boundary restricted to these new boundaries\n\nHi @GiudGiud i dont get this, could you please explain?\nThank you!",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10965130",
                          "updatedAt": "2024-10-16T23:08:39Z",
                          "publishedAt": "2024-10-16T23:08:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "While you can change boundaries dynamically, you cannot change the boundary restriction of an object.\nSo either you already set the boundary restriction to work for the whole simulation, or you use multiple objects and turn some on/off as the boundaries change",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10965549",
                          "updatedAt": "2024-10-17T00:39:18Z",
                          "publishedAt": "2024-10-17T00:39:18Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @GiudGiud, I tested it, it kinda works fine (for now),\nso below is my BC, while the boundary name (topol_time_new) stays the same, the nodes and sides inside this boundary can change dynamically due to UpdateSurfaceTimeBased.\nI guess, this is the first case you mentioned.\n [bc_topol0000_LGFlux]\n    type = PorousFlowPiecewiseLinearSink\n    variable = porepressure_L1\n    boundary = 'topol_time_new'\n    pt_vals = '-1e9 1e9'\n    multipliers = '-1e9 1e9'\n    flux_function = 1\n    PT_shift = -98100   # in Pa, ie., -9810.N/m3*-10m\n    fluid_phase = 0\n    use_mobility = true   # default is false\n    use_relperm = false    # default is false\n  []",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10965588",
                          "updatedAt": "2024-10-17T00:48:15Z",
                          "publishedAt": "2024-10-17T00:48:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "if the name / id stays the same this should work",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10965789",
                          "updatedAt": "2024-10-17T01:25:48Z",
                          "publishedAt": "2024-10-17T01:25:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "if the name / id stays the same this should work",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-10965793",
                          "updatedAt": "2024-10-17T01:26:33Z",
                          "publishedAt": "2024-10-17T01:26:33Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "Yulongggggg"
                  },
                  "bodyText": "Hi Traiwit, I am also a mining engineering PhD student using MOOSE to simulate the tunneling process, can I ask you some questions regarding MOOSE recently, I have been working on simulating the excavation process in plasticity , may I have your email?",
                  "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-11006805",
                  "updatedAt": "2024-10-21T15:09:10Z",
                  "publishedAt": "2024-10-21T15:09:09Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @Yulongggggg\nFor mech simulation we still use Abaqus since MOOSE explicit is still much slower\nbut if you have any question re: MOOSE hydro-mining related, please feel free to tag me.\nnote: for hydro-mech we do 2 ways coupling between MOOSE and Abaqus.",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-11047088",
                          "updatedAt": "2024-10-25T02:02:30Z",
                          "publishedAt": "2024-10-25T02:02:29Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "We have a new time integrator for explicit maybe that will help enough?\nIt's called DirectCentralDifference\nWhat have you been using for time integration?\nThis might be minor I dont know",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-11081888",
                          "updatedAt": "2024-10-29T02:51:47Z",
                          "publishedAt": "2024-10-29T02:51:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @GiudGiud\nThanks, originally I used CentralDifference, with solve_type=lumped\nI will check this out and give you an update on performance\nbeen giving up on this a couple times already",
                          "url": "https://github.com/idaholab/moose/discussions/28849#discussioncomment-11081942",
                          "updatedAt": "2024-10-29T03:01:39Z",
                          "publishedAt": "2024-10-29T03:01:38Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Equations of States Methods Missing",
          "author": {
            "login": "JonathanEdelmanS"
          },
          "bodyText": "I am trying to simulate the flow of CO2 through a pipe, using CO2's properties instead of Helium in the example. Are these fluid properties being worked on to be made more complete?\nI would like to use this class, and before implementing the missing method myself I would like to know if anybody else is working on it, or otherwise if I do implement the method, how can I contribute that to MOOSE?\nWhen trying to run the code, I get the following error:\n`The fluid properties class 'CO2FluidProperties' has not implemented the method below. If your application requires this method, you must either implement it or use a different fluid properties class.\nvirtual Real SinglePhaseFluidProperties::e_from_p_rho(Real, Real) const`\nBelow is the .i file, which is modules/thermal_hydraulics/tutorials/single_phase_flow/01_flow_channel.i\nwhere I changed the fluid property from an IdealGasFluidProperties to a CO2FluidProperties:\nm_dot_in = 1e-2 # kg/s\npress = 10e5 # Pa\n\n[GlobalParams]\n  initial_p = ${press}\n  initial_vel = 0.0001\n  initial_T = ${T_in}\n  gravity_vector = '0 0 0'\n\n  rdg_slope_reconstruction = minmod\n  scaling_factor_1phase = '1 1e-2 1e-4'\n  closures = thm_closures\n  fp = he\n[]\n\n[FluidProperties]\n  [he]\n    type = CO2FluidProperties\n  []\n[]\n\n[Closures]\n  [thm_closures]\n    type = Closures1PhaseTHM\n  []\n[]\n\n[Components]\n  [inlet]\n    type = InletMassFlowRateTemperature1Phase\n    input = 'core_chan:in'\n    m_dot = ${m_dot_in}\n    T = ${T_in}\n  []\n\n  [core_chan]\n    type = FlowChannel1Phase\n    position = '0 0 0'\n    orientation = '0 0 1'\n    length = 1\n    n_elems = 25\n    A = 7.2548e-3\n    D_h = 7.0636e-2\n  []\n\n  [outlet]\n    type = Outlet1Phase\n    input = 'core_chan:out'\n    p = ${press}\n  []\n[]\n\n[Postprocessors]\n  [core_p_in]\n    type = SideAverageValue\n    boundary = core_chan:in\n    variable = p\n  []\n\n  [core_p_out]\n    type = SideAverageValue\n    boundary = core_chan:out\n    variable = p\n  []\n\n  [core_delta_p]\n    type = ParsedPostprocessor\n    pp_names = 'core_p_in core_p_out'\n    expression = 'core_p_in - core_p_out'\n  []\n[]\n\n[Preconditioning]\n  [pc]\n    type = SMP\n    full = true\n  []\n[]\n\n[Executioner]\n  type = Transient\n  solve_type = NEWTON\n  line_search = basic\n\n  start_time = 0\n  end_time = 1000\n  dt = 10\n\n  petsc_options_iname = '-pc_type'\n  petsc_options_value = 'lu'\n\n  nl_rel_tol = 1e-8\n  nl_abs_tol = 1e-8\n  nl_max_its = 25\n\n[]\n\n[Outputs]\n  exodus = true\n\n  [console]\n    type = Console\n    max_rows = 1\n    outlier_variable_norms = false\n  []\n  print_linear_residuals = false\n[]```",
          "url": "https://github.com/idaholab/moose/discussions/28920",
          "updatedAt": "2024-10-29T02:38:40Z",
          "publishedAt": "2024-10-23T21:18:32Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThese routines are implemented on a per need basis.\nFor co2 the better option here is to download the external fluid property submodule for carbon dioxide. See the website page for external FPS for more details",
                  "url": "https://github.com/idaholab/moose/discussions/28920#discussioncomment-11034707",
                  "updatedAt": "2024-10-23T23:27:47Z",
                  "publishedAt": "2024-10-23T23:27:46Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "JonathanEdelmanS"
                          },
                          "bodyText": "Thank you for your response!\nWe want to simulate that the CO2 is injected at the temperature of liquid storage and is pumped downhole so it reaches supercritical state at a depth of hundreds of meters. We want to detect phase changes or the formation of hydrates,  but we don't need to accurately model phase change, only detect possible phase changes from a default gas/supercritical state.\nWould these external fluid properties accurately model supercritical CO2?",
                          "url": "https://github.com/idaholab/moose/discussions/28920#discussioncomment-11056015",
                          "updatedAt": "2024-10-25T18:49:41Z",
                          "publishedAt": "2024-10-25T18:49:40Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "the external CO2 fluid property module contains properties for both liquid and vapor CO2. I think it's your best bet\nhttps://github.com/idaholab/carbon_dioxide/tree/devel\nI'm not sure for supercritical. Is the HEM model good for that? What do you need that's different from a vapor model that's extended up to the condensation limit?",
                          "url": "https://github.com/idaholab/moose/discussions/28920#discussioncomment-11081813",
                          "updatedAt": "2024-10-29T02:38:41Z",
                          "publishedAt": "2024-10-29T02:38:40Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "I Get the Following Error When Performing Make -j 6 in the modules folder of MOOSE.",
          "author": {
            "login": "TLWise"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n I have consulted the Posting Guidelines.\n I have searched the Discussions Forum and MOOSE Framework Troubleshooting and have not found what I was looking for\n Q&A Getting Started is the most appropriate category for my question (trouble installing, beginner user, ...)\n\nIssue or question about MOOSE\n\"MooseApp.C:1132:42: warning: ignoring returned value of type 'PetscErrorCode', declared with attribute 'nodiscard' [-Wunused-result]  1132 |     Moose::PetscSupport::petscSetupOutput(_command_line.get()); \"\n(Optional) code in question / simulation log / errors\nNo response\nEncountering Errors? Please include diagnostic output\nNo response",
          "url": "https://github.com/idaholab/moose/discussions/28934",
          "updatedAt": "2024-10-29T02:34:22Z",
          "publishedAt": "2024-10-25T19:10:08Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThis is just a warning.\nWe are fixing it in a coming PR. Thanks for reporting\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28934#discussioncomment-11081798",
                  "updatedAt": "2024-10-29T02:34:22Z",
                  "publishedAt": "2024-10-29T02:34:22Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Transferring Field Between FEM and FVM in MOOSE MultiApp Structure",
          "author": {
            "login": "mahdipasaie"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A Navier Stokes is the most appropriate category for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (avoid screenshots if possible, triple back quotes before/after pasted text, etc)\n\nI\u2019m working on a multi-physics example in MOOSE, where I\u2019m using the Finite Element Method (FEM) to solve the heat equation and the Finite Volume Method (FVM) to solve fluid flow.\nSo far, I\u2019ve successfully set up and solved:\n\nLid-driven cavity problem (in fluid_flow.i using FVM) for fluid flow.\nHeat conduction between a hot left wall and a cold right wall (in heat_conduction.i using FEM).\n\nI was able to transfer the velocity field from the FVM sub-app back to the FEM parent app using MOOSE\u2019s transfer system. This allowed me to compute the advection term in the heat equation accurately.\nNow, I\u2019m trying to transfer the temperature field T from the FEM parent app to an auxiliary field in the FVM sub-app, but I encounter an error.\nError Message:\nCannot find variable Tf for Ttrans Transfer\n\nwhere in the heat_conduction.i I have:\n  [./Ttrans]\n    type = MultiAppGeometricInterpolationTransfer\n    to_multi_app = fluid\n    source_variable = T\n    variable = Tf \n  [../]\n\nand in the fluid_flow.i (FVM ) file I have :\n[AuxVariables]\n [Tf]\n   # type = MooseVariableFVReal\n []\n[]\n\nTo provide more context, here\u2019s the GitHub repository with my setup:\nhttps://github.com/mahdipasaie/moose_coupled_heat_fluid.git.\nAny insights on the requirements or additional configurations for transferring fields between FEM and FVM apps in MOOSE would be greatly appreciated!",
          "url": "https://github.com/idaholab/moose/discussions/28949",
          "updatedAt": "2024-10-29T02:16:15Z",
          "publishedAt": "2024-10-28T19:36:08Z",
          "category": {
            "name": "Q&A Modules: Navier-Stokes"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "mahdipasaie"
                  },
                  "bodyText": "I had a syntax issue!  I fixed that and now is working.",
                  "url": "https://github.com/idaholab/moose/discussions/28949#discussioncomment-11081664",
                  "updatedAt": "2024-10-29T02:10:44Z",
                  "publishedAt": "2024-10-29T02:10:44Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Why does increasing dt result in an error?",
          "author": {
            "login": "YXY101676"
          },
          "bodyText": "Dear MOOSE users,\nI am using Moose to calculate crystal plasticity, but the required deformation is large, so in order to speed up the calculation, I tried to dt, but the following error occurred:\n\nIs there any way to accelerate the computation?\nBest Regards,\nYXY",
          "url": "https://github.com/idaholab/moose/discussions/28943",
          "updatedAt": "2024-10-28T15:02:52Z",
          "publishedAt": "2024-10-28T07:55:52Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYou could work on improving the preconditioning, or making the mesh / problem smaller.\nLarge dt is not always safe in problems with deformation.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28943#discussioncomment-11075914",
                  "updatedAt": "2024-10-28T15:02:08Z",
                  "publishedAt": "2024-10-28T15:02:07Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "for explaining the error I ll need a backtrace. Use these instructions to generate that if it's not already displayed\nhttps://mooseframework.inl.gov/application_development/debugging.html",
                          "url": "https://github.com/idaholab/moose/discussions/28943#discussioncomment-11075918",
                          "updatedAt": "2024-10-28T15:02:53Z",
                          "publishedAt": "2024-10-28T15:02:52Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "unable to create desired geometry phase field model",
          "author": {
            "login": "ankit72242"
          },
          "bodyText": "this geometry i create \nthis is desired\n\ntestz1 (copy).txt\nplease guide me im using\ntype = LatticeSmoothCircleIC so that at interface i want to create circle/square type structure\ncan you please guide me",
          "url": "https://github.com/idaholab/moose/discussions/28939",
          "updatedAt": "2024-10-27T14:52:51Z",
          "publishedAt": "2024-10-27T10:35:26Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThis lattice of circle does not look so regular. For an irregular lattice you can use this object and specify them one by one (you can generate them with code outside of moose though)\nhttps://mooseframework.inl.gov/source/ics/SpecifiedSmoothCircleIC.html\nWhat does the blue/red region represent? Are all these elements in the same subdomain?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28939#discussioncomment-11066140",
                  "updatedAt": "2024-10-27T13:20:52Z",
                  "publishedAt": "2024-10-27T13:20:51Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "ankit72242"
                  },
                  "bodyText": "Two rectangular block represent one phase1\nAnd red region is different phase2\nAnd these green bubble at interface are corresponding to evolution of\ndifferent phase3 came out at expense of both phase1+phase2\nBasically these small circle are seed of phase 2\nNow I want to put these circle separate by certain distance in interface\nstrip like rectangular region\n\nAim is...these small circle should grow towards each other in non uniform\nway within middle region of domain only.\n\u2026\nOn Sun, 27 Oct, 2024, 6:51\u202fpm Guillaume Giudicelli, < ***@***.***> wrote:\n Hello\n\n This lattice of circle does not look so regular. For an irregular lattice\n you can use this object and specify them one by one (you can generate them\n with code outside of moose though)\n\n https://mooseframework.inl.gov/source/ics/SpecifiedSmoothCircleIC.html\n\n What does the blue/red region represent? Are all these elements in the\n same subdomain?\n\n Guillaume\n\n \u2014\n Reply to this email directly, view it on GitHub\n <#28939 (comment)>,\n or unsubscribe\n <https://github.com/notifications/unsubscribe-auth/BBZJNQMS4FNMTTSX2YC4ARLZ5TSEPAVCNFSM6AAAAABQVWDM5KVHI2DSMVQWIX3LMV43URDJONRXK43TNFXW4Q3PNVWWK3TUHMYTCMBWGYYTIMA>\n .\n You are receiving this because you authored the thread.Message ID:\n ***@***.***>\n\n\n-- \n\n\nDisclaimer:- This\u00a0footer text is to convey that this email is sent by one\nof the\u00a0users of IITH. So, do not mark it as SPAM.",
                  "url": "https://github.com/idaholab/moose/discussions/28939#discussioncomment-11066480",
                  "updatedAt": "2024-10-27T14:12:04Z",
                  "publishedAt": "2024-10-27T14:12:03Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Should the circle be on a regular lattice?\nThere are different variables to describe the existence of each phase right?\nWhat does your IC block look like right now?",
                          "url": "https://github.com/idaholab/moose/discussions/28939#discussioncomment-11066729",
                          "updatedAt": "2024-10-27T14:52:51Z",
                          "publishedAt": "2024-10-27T14:52:51Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "WASP does not seem to be available.",
          "author": {
            "login": "libinbabu1991"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n I have consulted the Posting Guidelines.\n I have searched the Discussions Forum and MOOSE Framework Troubleshooting and have not found what I was looking for\n Q&A Getting Started is the most appropriate category for my question (trouble installing, beginner user, ...)\n\nIssue or question about MOOSE\nHi,\nI was trying to install Moose on a new system. I installed Ubuntu app and miniconda following the instructions on the Moose website.\nHowever, when I try to compile the make file, it gives error about the WASP as below.\n(moose) root@123-SPARE-LAPTOP:~/projects/moose# cd /projects/moose/test\n(moose) root@123-SPARE-LAPTOP:/projects/moose/test# make -j 6\nERROR\nWASP does not seem to be available.\nI tried to install WASP following instructions from a forum. It shows another issue about not being in the conda environment.\nconda install moose-wasp\nPlease advise how to fix this errors.\nThanks.\n(Optional) code in question / simulation log / errors\nNo response\nEncountering Errors? Please include diagnostic output\nNo response",
          "url": "https://github.com/idaholab/moose/discussions/28931",
          "updatedAt": "2024-10-28T12:53:30Z",
          "publishedAt": "2024-10-25T01:35:19Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "There are a few phrases you are using that is throwing me off...\nIs this a Docker image (asking because it seems you logged in as root).\nAlso, was this a copy/paste mishap, or does the following really exist:\n(moose) root@123-SPARE-LAPTOP:~/projects/moose# cd /projects/moose/test\n(moose) root@123-SPARE-LAPTOP:/projects/moose/test# make -j 6\n\nI need to scrutinizing each line:\n(moose) root@123-SPARE-LAPTOP:~/projects/moose# cd /projects/moose/test\n                              ^                    ^ you're leaving $HOME/projects\n                              ^ indicates you're in $HOME/projects\n\n\n(moose) root@123-SPARE-LAPTOP:/projects/moose/test# make -j 6\n                              ^ and it exists, meaning you have two locations of moose maybe?\n\nIs the above correct? You have two locations of MOOSE?\n\n/projects/moose\n~/projects/moose\n\nThat might indicate an issue. Perhaps not. But I would like to know which location we're truly dealing with before we dig too deep. If this is a Docker image, then it's possible you're running into an issue with Conda not being fully available.\nNew system, installed Ubuntu app? Is this a WSL instance then? As in, the windows machine is brand new, and you installed the Ubuntu app? If this is the case, I would recommend avoiding running as fully fledged root user. You're welcome to do to so, but it is highly discouraged if possible.\nCan you please describe what sort of system we're dealing with; WSL or Docker, or full Ubuntu native Linux, and the interesting issue of possibly having two versions of MOOSE, and then we can begin",
                  "url": "https://github.com/idaholab/moose/discussions/28931#discussioncomment-11052820",
                  "updatedAt": "2024-10-25T13:28:23Z",
                  "publishedAt": "2024-10-25T13:26:13Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "libinbabu1991"
                          },
                          "bodyText": "Hi,\nThis is an Ubuntu app with WSL from Micosoft store.\nI believe I have moose installed only in the project folder which is located in the root.",
                          "url": "https://github.com/idaholab/moose/discussions/28931#discussioncomment-11054879",
                          "updatedAt": "2024-10-25T16:26:26Z",
                          "publishedAt": "2024-10-25T16:26:25Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "If you wish to run as root, thats on you. There should be no need, but I'll not question why you are doing it.\nI think you have two locations of MOOSE, since the prompt allowed you to be in both locations without error. Assuming you want to use /projects/moose, we will stick to that. Just pointing out that we need to be carful:\ncd ~/projects/moose\n# should land you in /root/projects/moose (so long as you are logged in as root)\n# while:\ncd /projects/moose\n# is literally /projects/moose for all users.\n~ is shorthand for $HOME (a users home directory).\nAnyways...\nCan you provide the following results:\ncd /projects/moose/scripts\n./diagnostics.sh\nI wish to see the current running environment...",
                          "url": "https://github.com/idaholab/moose/discussions/28931#discussioncomment-11055413",
                          "updatedAt": "2024-10-25T17:27:31Z",
                          "publishedAt": "2024-10-25T17:27:30Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "libinbabu1991"
                  },
                  "bodyText": "Hi,\nYou were right, I had installed Moose in the root/projects folder and in C/Fore_moose/projects/moose folder.\nI installed conda in the second location and it is working now. I was able to run one example successfully.\nThanks for your assistance.",
                  "url": "https://github.com/idaholab/moose/discussions/28931#discussioncomment-11060777",
                  "updatedAt": "2024-10-26T14:41:45Z",
                  "publishedAt": "2024-10-26T14:41:45Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Rate dependent TSL",
          "author": {
            "login": "amassaf"
          },
          "bodyText": "Hi, I have this new class to implement a rate dependent TSL but it's returning a zero normal and tangent traction :\nvoid\nRateDependentTractionSeparation::computeInterfaceTractionAndDerivatives()\n{\n  // Calculate rate of displacement jump\n  RealVectorValue rateOfDisplacementJump = (_interface_displacement_jump[_qp] - _interface_displacement_jump_old[_qp]) / _dt;\n\n  // Calculate degradation factor\n  RealVectorValue degradationFactor = calculateDegradationFactor();\n\n  // Compute total traction: elastic part + viscous part\n  _interface_traction[_qp] = degradationFactor * (_K * _interface_displacement_jump[_qp] + _viscosity * rateOfDisplacementJump);\n\n  // Update derivative of traction with respect to displacement jump\n  RankTwoTensor dFactor;\n  dFactor.fillFromInputVector({degradationFactor(0), degradationFactor(1), degradationFactor(2)});\n  _dinterface_traction_djump[_qp] = dFactor * _K;\n}\n\nRealVectorValue\nRateDependentTractionSeparation::calculateDegradationFactor()\n{\n  RealVectorValue critical_displacement(_normal_critical_displacement, _tangent_critical_displacement, _tangent_critical_displacement);\n\n  RealVectorValue factor(1.0, 1.0, 1.0);  \n  \n  for (unsigned int i = 0; i < 3; ++i) {\n    if (_interface_displacement_jump[_qp](i) >= critical_displacement(i)) {\n      factor(i) = 0.00002;  \n    } else {\n      Real delta = _interface_displacement_jump[_qp](i) / critical_displacement(i);\n      factor(i) = 1.0 - delta * (1.0 - 0.00002);  \n    }\n  }\n\n  return factor;\n}\n\nif anyone could take a look,, thanks !!",
          "url": "https://github.com/idaholab/moose/discussions/28450",
          "updatedAt": "2024-10-25T12:56:48Z",
          "publishedAt": "2024-08-21T16:42:21Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "@sidharthsarmah  you were working with TSL in your project could you please help?",
                  "url": "https://github.com/idaholab/moose/discussions/28450#discussioncomment-10412815",
                  "updatedAt": "2024-08-21T21:46:42Z",
                  "publishedAt": "2024-08-21T21:46:41Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "sidharthsarmah"
                          },
                          "bodyText": "Hi @amassaf , I have just started using CZM in MOOSE, could you please send me the TSLs and the derivatives you implemented to have a look at.",
                          "url": "https://github.com/idaholab/moose/discussions/28450#discussioncomment-10489188",
                          "updatedAt": "2024-08-29T15:56:35Z",
                          "publishedAt": "2024-08-29T15:56:34Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "amassaf"
                  },
                  "bodyText": "Hi @sidharthsarmah thanks for your help. I have changed some stuff to my code and this is what my computeInterfaceTractionAndDerivatives looks like now :\n\n  for (int i = 0; i < 3; ++i)\n  {\n    if (delta(i) < critical_displacement(i)) \n    {\n      _d[_qp](i) = 0;\n      softening_ratio(i) = 1 - _d[_qp](i);\n      traction(i) = K(i) * softening_ratio(i) * delta(i) * (1 + viscosity(i) * rateOfDisplacementJump(i)) + K(i) * delta_inactive(i);\n      dTrac(i) = K(i) * softening_ratio(i) * ddelta_active_ddelta(i) * (1 + viscosity(i) * rateOfDisplacementJump(i)) + K(i) * ddelta_inactive_ddelta(i);\n\n      ddTrac.fillFromInputVector({dTrac(0), dTrac(1), dTrac(2)});\n    }\n    else if (delta(i) < _failure_disp) \n    {\n      _d[_qp](i) = _failure_disp * (delta(i) - critical_displacement(i)) / delta(i) /\n              (_failure_disp - critical_displacement(i));\n\n      _d[_qp](i) = (_d[_qp](i) + 1e-5 * _d_old[_qp](i) / _dt) / (1e-5 / _dt + 1);\n\nRealVectorValue dd_ddelta(0, 0, 0);\nif (_d[_qp](i) < _d_old[_qp](i))\n         _d[_qp](i) = _d_old[_qp](i);\n dd_ddelta(i) = ( _failure_disp * delta(i) - _failure_disp * (delta(i) - critical_displacement(i)))  \n                    / (delta(i) * delta(i) * (_failure_disp - critical_displacement(i)));\n\n      softening_ratio(i) = 1 - _d[_qp](i);\n      traction(i) = K(i) * softening_ratio(i) * delta(i) * (1 + viscosity(i) * rateOfDisplacementJump(i)) + K(i) * delta_inactive(i);\n\n      ddTrac.fillFromInputVector({dTrac(0), dTrac(1), dTrac(2)});\n    }\n    else \n    {\n      _d[_qp](i) = 1;\n      softening_ratio(i) = 1 - _d[_qp](i);\n      traction(i) = K(i) * softening_ratio(i) * delta(i) * (1 + viscosity(i) * rateOfDisplacementJump(i)) + K(i) * delta_inactive(i);\n      dTrac(i) = K(i) * softening_ratio(i) * ddelta_active_ddelta(i) * (1 + viscosity(i) * rateOfDisplacementJump(i)) + K(i) * ddelta_inactive_ddelta(i);\n\n      ddTrac.fillFromInputVector({dTrac(0), dTrac(1), dTrac(2)});\n    }\n  }\n\n  _interface_traction[_qp] = traction;\n\n  _dinterface_traction_djump[_qp] = ddTrac;\n\nMy problem is that the traction stays increasing even after delta(i) > _failure_disp, but I do not have this problem with the normal traction.",
                  "url": "https://github.com/idaholab/moose/discussions/28450#discussioncomment-10491591",
                  "updatedAt": "2024-08-29T20:30:25Z",
                  "publishedAt": "2024-08-29T20:30:23Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "sidharthsarmah"
                          },
                          "bodyText": "Hi,\nI am new to this and have just implemented the TSL in MOOSE. I need to understand the TSL which you used first and check if there is any syntax error in the code.",
                          "url": "https://github.com/idaholab/moose/discussions/28450#discussioncomment-10840250",
                          "updatedAt": "2024-10-04T05:59:26Z",
                          "publishedAt": "2024-10-04T05:59:25Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "amassaf"
                          },
                          "bodyText": "Hi, sorry to get back late to this but I figured it out. I was not taking into account the magnitude of the tangential disp so it was all wrong.",
                          "url": "https://github.com/idaholab/moose/discussions/28450#discussioncomment-11052498",
                          "updatedAt": "2024-10-25T12:56:47Z",
                          "publishedAt": "2024-10-25T12:56:46Z",
                          "isAnswer": true
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}