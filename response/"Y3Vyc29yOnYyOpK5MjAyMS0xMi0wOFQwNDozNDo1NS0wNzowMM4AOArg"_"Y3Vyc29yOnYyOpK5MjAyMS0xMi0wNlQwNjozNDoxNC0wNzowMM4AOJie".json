{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyMS0xMi0wNlQwNjozNDoxNC0wNzowMM4AOJie"
    },
    "edges": [
      {
        "node": {
          "title": "Let material properties of non-mentioned blocks equal to 0",
          "author": {
            "login": "Traiwit"
          },
          "bodyText": "Hi guys,\nis there a cleaner way to let material properties of non-mentioned blocks equal to 0, I know the messy way (shown below)\n  [./excav_perm1]\n    type = GenericConstantMaterial\n    prop_names  = excav_perm\n    prop_values = 1\n    block = 1\n  [../]\n\n  [./unmined_perm1]\n    type = GenericConstantMaterial\n    prop_names  = excav_perm\n    prop_values = 0\n    block = '2 3 4 5 6'\n  [../]\n\nbut is it possible to just define the property on a particular block(s), OR define 2 values in a single object for example\n[./excav_perm1]\n   type = GenericConstantMaterial\n   prop_names  = excav_perm\n   prop_values_1 = 1\n   blocks_prop_1 = 1\n\n   prop_values_2 = 0\n   blocks_prop_2 = '2 3 4 5 6'\n [../]\n\nNot sure where to start, should it be somewhere in the .C file?\nKind regards,\nTraiwit",
          "url": "https://github.com/idaholab/moose/discussions/19470",
          "updatedAt": "2022-08-19T11:57:13Z",
          "publishedAt": "2021-11-24T05:43:08Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hi Traiwit\nIs this what you're looking for\nhttps://mooseframework.inl.gov/source/materials/PiecewiseConstantByBlockMaterial.html\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1691736",
                  "updatedAt": "2022-07-11T20:56:28Z",
                  "publishedAt": "2021-11-24T06:06:33Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Is the material used in all blocks btw? When not used you can just omit it.",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1691739",
                          "updatedAt": "2022-07-11T20:56:28Z",
                          "publishedAt": "2021-11-24T06:09:15Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aprilnovak"
                          },
                          "bodyText": "You might need to set material_coverage_check = false in the [Problem] block if by omitting your [unmined_perm1] block you wouldn't otherwise have any materials at all on blocks 2 3 4 5 6.",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1697231",
                          "updatedAt": "2022-07-11T20:56:29Z",
                          "publishedAt": "2021-11-25T00:29:50Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @GiudGiud, sorry for the late reply, I was busy with other stuff early today.\nIs this a new material object? I couldn't find it in my MOOSE dir, I try to look for an example now sure how to input subdomain_to_prop_value\n\nso in this case, if I have 100+ blocks, I have to list all of them here, right?\n@aprilnovak noted, i learned that when I first try to use [Controls] with [Materials], it ignores the duplicated materials, but it doesn't ignore the unassigned materials, unfortunately.\n\nIs the material used in all blocks btw? When not used you can just omit it.\n\nno, I actually want to only assign the properties to the mined blocks, and the unmined blocks the properties would be 0\nKind regards,\ntraiwit",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1697928",
                          "updatedAt": "2022-07-11T20:56:28Z",
                          "publishedAt": "2021-11-25T05:17:12Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "It s not new but I renamed it recently. In your version MOOSE it s still call FVPropValPerSubdomain or something like that\nYou have to list all the ones you want to define a value for yes",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1697931",
                          "updatedAt": "2022-08-19T11:57:46Z",
                          "publishedAt": "2021-11-25T05:21:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Hi @GiudGiud\nit doesnt seem to work from my end, not sure if I got the right syntax?\n[./excav_poro1]\n   type = FVPropValPerSubdomainMaterial\n   prop_name  = 'excav_poro'\n   subdomain_to_prop_value =  'ALL_TET10 1\n                               DRIVE1_TET10 1\n                               DRIVE2_TET10 1\n                               DRIVE3_TET10 1\n                               DRIVE4_TET10 1\n                               FLOOR_TET10 1\n                               STOPE2_TET10 1\n                               STOPE3_TET10 1\n                               STOPE4_TET10 1\n                               WALLS_TET10 1'\n [../]\n\nAuxVar/AuxKernel couldn't pick it up\n[./excav_poro]\norder = CONSTANT\nfamily = MONOMIAL\n[../]\n[./excav_poro]\n    type = MaterialRealAux\n    property = excav_poro\n    variable = excav_poro\n  [../]\n\nKind regards,\nTraiwit",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1713186",
                          "updatedAt": "2022-08-19T11:57:46Z",
                          "publishedAt": "2021-11-29T01:04:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "I think FVPropValPerSubdomainMaterial only works with FV kernels\njust wondering if PiecewiseConstantByBlockMaterial has been merged yet?",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1713195",
                          "updatedAt": "2022-08-19T11:57:49Z",
                          "publishedAt": "2021-11-29T01:08:40Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "There s no distinction between FV and FE kernels for auxkernels, because there is no (face) flux kernel for the auxiliary system.\nPiecewiseConstantByBlockMaterial is indeed merged but it s just a rename so that wont help you.\nWhat's the error message you get when you say it cant pick it up",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1713211",
                          "updatedAt": "2022-08-19T11:57:48Z",
                          "publishedAt": "2021-11-29T01:16:41Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "@GiudGiud, my bad I thought I pasted it earlier\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block ALL_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block DRIVE1_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block DRIVE2_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block DRIVE3_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block DRIVE4_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block FLOOR_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block STOPE2_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block STOPE3_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block STOPE4_TET10\nMaterial property 'excav_poro', requested by 'excav_poro' is not defined on block WALLS_TET10",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1713219",
                          "updatedAt": "2022-08-19T11:57:49Z",
                          "publishedAt": "2021-11-29T01:18:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Could be an AD thing, like FVPropVal may be defining AD properties\nI ll check later.",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1713251",
                          "updatedAt": "2022-08-19T11:57:50Z",
                          "publishedAt": "2021-11-29T01:35:00Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Traiwit"
                          },
                          "bodyText": "Noted, Thanks @GiudGiud",
                          "url": "https://github.com/idaholab/moose/discussions/19470#discussioncomment-1713253",
                          "updatedAt": "2022-08-19T11:57:50Z",
                          "publishedAt": "2021-11-29T01:36:01Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "./therm_soln_compare.py",
          "author": {
            "login": "wowodejiajia"
          },
          "bodyText": "Dear MOOSE developers,\nI'm studying tutorials of heat_conduction. In the last step - Comparison of results.\nIt is executed by typing: ./therm_soln_compare.py\nfrom the directory where the problems are run.\nIt can not generate an image called therm_soln_compare.png with line plots for these three cases.",
          "url": "https://github.com/idaholab/moose/discussions/19577",
          "updatedAt": "2022-07-06T07:21:02Z",
          "publishedAt": "2021-12-08T02:26:45Z",
          "category": {
            "name": "Q&A Tools"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "hello\njust tried and it worked fine.\nDid you run all input files in the folder? Can you give us the output of ls -l in that folder ?\nHere s the plot",
                  "url": "https://github.com/idaholab/moose/discussions/19577#discussioncomment-1769983",
                  "updatedAt": "2022-07-06T07:21:02Z",
                  "publishedAt": "2021-12-08T02:46:34Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "wowodejiajia"
                          },
                          "bodyText": "-bash: ./therm_soln_compare.py: No such file or directory",
                          "url": "https://github.com/idaholab/moose/discussions/19577#discussioncomment-1770058",
                          "updatedAt": "2021-12-08T03:04:07Z",
                          "publishedAt": "2021-12-08T03:04:07Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I saw the directory list in my email but it s not here??\nthe file should be there. Can you please give us the output of ls -l and pwd ?\nthis is the ./therm_soln_compare.py script btw\n#!/usr/bin/env python\nimport matplotlib\nmatplotlib.use('Agg')\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\ndata02a=pd.read_csv('therm_step02a_out_t_sampler_0006.csv')\ndata03=pd.read_csv('therm_step03_out_t_sampler_0006.csv')\ndata03a=pd.read_csv('therm_step03a_out_t_sampler_0006.csv')\n\nplt.figure(figsize=(6.0,4.5))\nax=plt.gca()\n\ndata02a.plot(ax=ax, x='x', y='T',label='Conduction (step02a)')\ndata03.plot(ax=ax, x='x', y='T',label='Conduction + Time Deriv. (step03)')\ndata03a.plot(ax=ax, x='x', y='T',label='Conduction + Time Deriv. + Volumetric (step03a)')\n\nax.set_xlabel(\"Position\")\nax.set_ylabel(\"Temperature\")\n\nplt.savefig('therm_soln_compare.png', bbox_inches='tight', pad_inches=0.1)",
                          "url": "https://github.com/idaholab/moose/discussions/19577#discussioncomment-1770171",
                          "updatedAt": "2021-12-08T03:41:49Z",
                          "publishedAt": "2021-12-08T03:41:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "wowodejiajia"
                          },
                          "bodyText": "I don't have the therm_soln_compare.py file. Just put the files in the folder.\nThank you.",
                          "url": "https://github.com/idaholab/moose/discussions/19577#discussioncomment-1770190",
                          "updatedAt": "2021-12-08T03:49:10Z",
                          "publishedAt": "2021-12-08T03:49:10Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Functor mu_rampdown",
          "author": {
            "login": "erikgus94"
          },
          "bodyText": "After the last update I have gotten an error related to the functor 'mu_rampdown'.\n\nAs I understand there now, as the error message says, a functor for 'mu_rampdown' included in GeneralFunctorFluidProps. My question is, do I have to include GeneralFunctorFluidProps to use 'mu_rampdown'? Because when I do I get another error message which will be my next question depending on the answer to this one.\nInput file below:\n[Mesh]\n  [cmg]\n    type = CartesianMeshGenerator\n    dim = 3\n    dx = '0.05 0.4 0.05'\n    dy = '0.05 0.4 0.05'\n    dz = '0.05'\n    ix = '8 48 8'\n    iy = '8 48 8'\n    iz = '8'\n    subdomain_id = '0 0 0\n                    0 1 0\n                    0 0 0'\n  []\n  [delete_center]\n    type = BlockDeletionGenerator\n    input = 'cmg'\n    block = 1\n  []\n  [add_inlet1]\n    type = ParsedGenerateSideset\n    input = 'delete_center'\n    combinatorial_geometry = 'x<0.05 & y>0.49999'\n    new_sideset_name = 'inlet1'\n  []\n  [add_inlet2]\n    type = ParsedGenerateSideset\n    input = 'add_inlet1'\n    combinatorial_geometry = 'x>0.45 & y>0.49999'\n    new_sideset_name = 'inlet2'\n  []\n  [add_outlet]\n    type = ParsedGenerateSideset\n    input = 'add_inlet2'\n    combinatorial_geometry = '(x>0.45 | x<0.05) & y<0.00001'\n    new_sideset_name = 'outlet'\n  []\n  [add_wall_top]\n    type = ParsedGenerateSideset\n    input = 'add_outlet'\n    combinatorial_geometry = 'x>0.05 & x<0.45 & (y>0.49999 | (y<0.450001 & y>0.3))'\n    new_sideset_name = 'walls_top'\n  []\n  [add_wall_bot]\n    type = ParsedGenerateSideset\n    input = 'add_wall_top'\n    combinatorial_geometry = 'x>0.05 & x<0.45 & (y<0.00001 | (y>0.049999 & y<0.1))'\n    new_sideset_name = 'walls_bottom'\n  []\n  [add_wall_left]\n    type = ParsedGenerateSideset\n    input = 'add_wall_bot'\n    combinatorial_geometry = '(x<0.00001 | (y>0.04999 & y<0.449999 & x>0.049999 & x<0.2))'\n    new_sideset_name = 'walls_left'\n  []\n  [add_wall_right]\n    type = ParsedGenerateSideset\n    input = 'add_wall_left'\n    combinatorial_geometry = '(x>0.49999 | (y>0.04999 & y<0.449999 & x>0.3 & x<0.450001))'\n    new_sideset_name = 'walls_right'\n    show_info = true\n  []\n[]\n\nmu = 0.001241                   # The viscosity [Pa*s]\nrho = 1611                      # Density [kg/m\u00b3]\nk = 1.10                        # Thermal conductivity [W/m*K]\ncp = 2097.8                     # Specific heat capacity [J/kg*K]\nalpha = 0.0003035               # Thermal expansion\ntemp_ref = 873.15               # Reference temperature for the thermal expansion law\n\nvel = 'velocity'\nvelocity_interp_method = 'rc'\nadvected_interp_method = 'upwind'\ncold_temp = 660\nhot_temp = 740\n\nIC_u = 9e-3\nIC_v = 9e-3\n\n[Variables]\n  [u]\n    type = INSFVVelocityVariable\n    cache_cell_gradients = false\n  []\n  [v]\n    type = INSFVVelocityVariable\n    cache_cell_gradients = false\n  []\n  [w]\n    type = INSFVVelocityVariable\n    cache_cell_gradients = false\n  []\n  [pressure]\n    type = INSFVPressureVariable\n    cache_cell_gradients = false\n  []\n  [T]\n    type = INSFVEnergyVariable\n    cache_cell_gradients = false\n    scaling = 1e-4\n  []\n  [lambda]\n    family = SCALAR\n    order = FIRST\n  []\n[]\n\n\n[AuxVariables]\n  [U]\n    order = CONSTANT\n    family = MONOMIAL\n    fv = true\n    cache_cell_gradients = false\n  []\n  [mixing_len]\n    type = MooseVariableFVReal\n    cache_cell_gradients = false\n  []\n[]\n\n[ICs]\n  [temperature_gradient]\n    type = FunctionIC\n    variable = T\n    function = 'gradient_temp'\n  []\n  [v_gradient]\n    type = FunctionIC\n    variable = v\n    function = 'gradient_v'\n  []\n  [u_gradient]\n    type = FunctionIC\n    variable = u\n    function = 'gradient_u'\n  []\n[]\n\n[Functions]\n  # linear temperature profile for initialization\n  [gradient_temp]\n    type = ParsedFunction\n    value = 'if(y<0.05, hot_temp, if(y>0.45, cold_temp, hot_temp - (hot_temp-cold_temp) * y / 0.45))'\n    vars = 'cold_temp hot_temp'\n    vals = '${cold_temp} ${hot_temp}'\n  []\n  [gradient_v]\n    type = ParsedFunction\n    value = 'if(x<0.04375 & x>0.00625 & y>0.05 & y<0.45, IC_v,\n    if(x>0.45625 & x<0.49375 & y>0.05 & y<0.45, -IC_v,\n    if(x<0.04375 & x>0.00625 & y>0.01 & y<0.05, IC_v * y / 0.05,\n    if(x>0.45625 & x<0.49375 & y>0.01 & y<0.05, -IC_v * y / 0.05,\n    if(x<0.04375 & x>0.00625 & y>0.45 & y<0.49, IC_v - IC_v * (y - 0.45) / 0.05,\n    if(x>0.45625 & x<0.49375 & y>0.45 & y<0.49, -IC_v + IC_v * (y - 0.45) / 0.05,\n    0))))))'\n    vars = 'IC_v'\n    vals = '${IC_v}'\n  []\n  [gradient_u]\n    type = ParsedFunction\n    value = 'if(y<0.04375 & y>0.00625 & x>0.05 & x<0.45, -IC_u * (1 - (y/0.05)/3),\n    if(y>0.45625 & y<0.49375 & x>0.05 & x<0.45, IC_u * (2/3 - ((0.45 - y)/0.05)/3),\n    if(y<0.04375 & y>0.00625 & x>0.01 & x<0.05, -IC_u * x / 0.05,\n    if(y>0.45625 & y<0.49375 & x>0.01 & x<0.05, IC_u * x / 0.05,\n    if(y<0.04375 & y>0.00625 & x>0.45 & x<0.49, -IC_u + IC_u * (x - 0.45) / 0.05,\n    if(y>0.45625 & y<0.49375 & x>0.45 & x<0.49, IC_u - IC_u * (x - 0.45) / 0.05,\n    0))))))'\n    vars = 'IC_u'\n    vals = '${IC_u}'\n  []\n[]\n\n[AuxKernels]\n  [mag]\n    type = VectorMagnitudeAux\n    variable = U\n    x = u\n    y = v\n    z = w\n    execute_on = 'initial timestep_end'\n  []\n  inactive = 'mixing_len'\n  [mixing_len]\n    type = WallDistanceMixingLengthAux\n    walls = 'walls_top walls_bottom walls_sides inlet1 inlet2 outlet'\n    variable = mixing_len\n    execute_on = 'initial timestep_end'\n    delta = 0.5\n  []\n[]\n\n[FVKernels]\n  [mass]\n    type = INSFVMassAdvection\n    variable = pressure\n    vel = ${vel}\n    advected_interp_method = ${advected_interp_method}\n    velocity_interp_method = ${velocity_interp_method}\n    u = u\n    v = v\n    w = w\n    pressure = pressure\n    mu = 'mu'\n    rho = ${rho}\n  []\n  [mean_zero_pressure]\n    type = FVScalarLagrangeMultiplier\n    variable = pressure\n    lambda = lambda\n  []\n\n  [u_time]\n    type = INSFVMomentumTimeDerivative\n    variable = 'u'\n    rho = ${rho}\n  []\n  [u_advection]\n    type = INSFVMomentumAdvection\n    variable = u\n    advected_quantity = 'rhou'\n    vel = ${vel}\n    velocity_interp_method = ${velocity_interp_method}\n    advected_interp_method = ${advected_interp_method}\n    pressure = pressure\n    u = u\n    v = v\n    w = w\n    mu = 'mu'\n    rho = ${rho}\n  []\n  [u_viscosity]\n    type = FVDiffusion\n    variable = u\n    coeff = ${mu}\n  []\n  [u_pressure]\n    type = INSFVMomentumPressure\n    variable = u\n    momentum_component = 'x'\n    pressure = pressure\n  []\n  [u_turb]\n    type = INSFVMixingLengthReynoldsStress\n    variable = u\n    rho = ${rho}\n    mixing_length = mixing_len\n    momentum_component = 'x'\n    u = u\n    v = v\n    w = w\n  []\n\n  [v_time]\n    type = INSFVMomentumTimeDerivative\n    variable = v\n    rho = ${rho}\n  []\n  [v_advection]\n    type = INSFVMomentumAdvection\n    variable = v\n    advected_quantity = 'rhov'\n    vel = ${vel}\n    velocity_interp_method = ${velocity_interp_method}\n    advected_interp_method = ${advected_interp_method}\n    pressure = pressure\n    u = u\n    v = v\n    w = w\n    mu = 'mu'\n    rho = ${rho}\n  []\n  [v_viscosity]\n    type = FVDiffusion\n    variable = v\n    coeff = ${mu}\n  []\n  [v_pressure]\n    type = INSFVMomentumPressure\n    variable = v\n    momentum_component = 'y'\n    pressure = pressure\n  []\n  [v_turb]\n    type = INSFVMixingLengthReynoldsStress\n    variable = v\n    rho = ${rho}\n    mixing_length = mixing_len\n    momentum_component = 'y'\n    u = u\n    v = v\n    w = w\n  []\n  [v_buoyancy]\n    type = INSFVMomentumBoussinesq\n    variable = v\n    T_fluid = T\n    gravity = '0 -9.82 0'\n    rho = ${rho}\n    ref_temperature = ${temp_ref}\n    momentum_component = 'y'\n  []\n  [v_gravity]\n    type = INSFVMomentumGravity\n    variable = v\n    gravity = '0 -9.82 0'\n    rho = ${rho}\n    momentum_component = 'y'\n  []\n\n  [w_time]\n    type = INSFVMomentumTimeDerivative\n    variable = w\n    rho = ${rho}\n  []\n  [w_advection]\n    type = INSFVMomentumAdvection\n    variable = w\n    advected_quantity = 'rhow'\n    vel = ${vel}\n    velocity_interp_method = ${velocity_interp_method}\n    advected_interp_method = ${advected_interp_method}\n    pressure = pressure\n    u = u\n    v = v\n    w = w\n    mu = 'mu'\n    rho = ${rho}\n  []\n  [w_viscosity]\n    type = FVDiffusion\n    variable = w\n    coeff = ${mu}\n  []\n  [w_pressure]\n    type = INSFVMomentumPressure\n    variable = w\n    momentum_component = 'z'\n    pressure = pressure\n  []\n  [w_turb]\n    type = INSFVMixingLengthReynoldsStress\n    variable = w\n    rho = ${rho}\n    mixing_length = mixing_len\n    momentum_component = 'z'\n    u = u\n    v = v\n    w = w\n  []\n\n  [temp_time]\n    type = INSFVEnergyTimeDerivative\n    variable = T\n    rho = ${rho}\n    cp_name = 'cp'\n  []\n  [temp_conduction]\n    type = FVDiffusion\n    coeff = 'k'\n    variable = T\n  []\n  [temp_advection]\n    type = INSFVEnergyAdvection\n    variable = T\n    vel = ${vel}\n    velocity_interp_method = ${velocity_interp_method}\n    advected_interp_method = ${advected_interp_method}\n    pressure = pressure\n    u = u\n    v = v\n    w = w\n    mu = 'mu'\n    rho = ${rho}\n  []\n  [temp_turb]\n    type = WCNSFVMixingLengthEnergyDiffusion\n    variable = T\n    rho = ${rho}\n    cp = 'cp'\n    mixing_length = mixing_len\n    schmidt_number = 0.5\n    u = u\n    v = v\n    w = w\n  []\n[]\n\n[ScalarKernels]\n  [mean_zero_pressure_lm]\n    type = AverageValueConstraint\n    variable = lambda\n    pp_name = pressure_integral\n    value = 0\n  []\n[]\n\n[FVBCs]\n [no_slip_x]\n   type = INSFVNoSlipWallBC\n   variable = u\n   boundary = 'walls_top walls_right walls_bottom walls_left inlet1 inlet2 outlet back front'\n   function = 0\n []\n [no_slip_y]\n   type = INSFVNoSlipWallBC\n   variable = v\n   boundary = 'walls_top walls_right walls_bottom walls_left inlet1 inlet2 outlet back front'\n   function = 0\n  []\n  [no_slip_z]\n   type = INSFVNoSlipWallBC\n   variable = w\n   boundary = 'walls_top walls_right walls_bottom walls_left inlet1 inlet2 outlet back front'\n   function = 0\n  []\n\n  [T_hot]\n    type = FVDirichletBC\n    variable = 'T'\n    boundary = 'walls_bottom'\n    value = ${hot_temp}\n  []\n\n  [T_cold]\n    type = FVDirichletBC\n    variable = 'T'\n    boundary = 'walls_top'\n    value = ${cold_temp}\n  []\n[]\n\n[Functions]\n  [mu_rampdown]\n    type = PiecewiseLinear\n    x = '0.1 1 2 3'\n    y = '${fparse 1e3*mu} ${fparse 1e2*mu} ${fparse 1e1*mu} ${mu}'\n  []\n[]\n\n[Postprocessors]\n  # To watch the rampdown\n  [mu]\n    type = FunctionValuePostprocessor\n    function = mu_rampdown\n  []\n  # To evaluate convergence (visual inspection still necessary!)\n  [average_temperature]\n    type = ElementAverageValue\n    variable = T\n  []\n  [average_velocity_v]\n    type = ElementAverageValue\n    variable = v\n  []\n  [average_velocity_u]\n    type = ElementAverageValue\n    variable = u\n  []\n  [average_pressure]\n    type = ElementAverageValue\n    variable = pressure\n  []\n  [pressure_integral]\n    type = ElementIntegralVariablePostprocessor\n    variable = pressure\n    execute_on = linear\n  []\n[]\n\n\n[Materials]\n  [const_functor]\n    type = ADGenericConstantFunctorMaterial\n    prop_names = 'cp k alpha_b'\n    prop_values = '${cp} ${k} ${alpha}'\n  []\n  [mu_functor]\n    type = ADGenericFunctionFunctorMaterial\n    prop_names = 'mu'\n    prop_values = 'mu_rampdown'\n  []\n  [ins_fv]\n    type = INSFVMaterial\n    u = 'u'\n    v = 'v'\n    w = 'w'\n    pressure = 'pressure'\n    temperature = 'T'\n    rho = ${rho}\n  []\n[]\n\n[Executioner]\n  type = Transient\n  dt = 0.01\n  dtmax = 1\n  # 1s after the end of the mu_rampdown\n  # going further could be required to relax the system to steady state further\n  end_time = 4\n  timestep_tolerance = 1e-5\n  solve_type = 'NEWTON'\n  petsc_options_iname = '-pc_type -ksp_gmres_restart -sub_pc_type -sub_pc_factor_shift_type'\n  petsc_options_value = 'asm             1200                ilu           NONZERO'\n  nl_rel_tol = 1e-5\n  nl_abs_tol = 1e-5\n  line_search = 'none'\n  #automatic_scaling = true\n  off_diagonals_in_auto_scaling = true\n[]\n[Debug]\n  show_var_residual_norms = true\n[]\n[Outputs]\n  exodus = true\n[]",
          "url": "https://github.com/idaholab/moose/discussions/19488",
          "updatedAt": "2022-06-23T15:23:36Z",
          "publishedAt": "2021-11-25T14:17:11Z",
          "category": {
            "name": "Q&A Modules: Navier-Stokes"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\n\nA viscosity rampdown can be performed without the GeneralFunctorFluidProps if you have constant fluid properties or define them differently.\n\nIf you want to use fluid properties with a rampdown, this parameter is actually completely ignored right now. I ll push a fix soon.\n\nYou cannot do what you did, which is specify a mu_rampdown functor and use generalFunctorFluidPropsrties, because the mu_rampdown is a function right not a functor material property.\n\nOnce I m done with the fix I ll post back here with the correct syntax.\nIf you have access to Pronghorn, the fix is there already in PronghornFluidProps.\n\nGuillaume\n\u2026\n Le 25 nov. 2021 \u00e0 08:17, Erik Gustafsson ***@***.***> a \u00e9crit :\n\n \ufeff\n After the last update I have gotten an error related to the functor 'mu_rampdown'.\n\n\n As I understand there now, as the error message says, a functor for 'mu_rampdown' included in GeneralFunctorFluidProps. My question is, do I have to include GeneralFunctorFluidProps to use 'mu_rampdown'? Because when I do I get another error message which will be my next question depending on the answer to this one.\n\n Input file below:\n\n [Mesh]\n   [cmg]\n     type = CartesianMeshGenerator\n     dim = 3\n     dx = '0.05 0.4 0.05'\n     dy = '0.05 0.4 0.05'\n     dz = '0.05'\n     ix = '8 48 8'\n     iy = '8 48 8'\n     iz = '8'\n     subdomain_id = '0 0 0\n                     0 1 0\n                     0 0 0'\n   []\n   [delete_center]\n     type = BlockDeletionGenerator\n     input = 'cmg'\n     block = 1\n   []\n   [add_inlet1]\n     type = ParsedGenerateSideset\n     input = 'delete_center'\n     combinatorial_geometry = 'x<0.05 & y>0.49999'\n     new_sideset_name = 'inlet1'\n   []\n   [add_inlet2]\n     type = ParsedGenerateSideset\n     input = 'add_inlet1'\n     combinatorial_geometry = 'x>0.45 & y>0.49999'\n     new_sideset_name = 'inlet2'\n   []\n   [add_outlet]\n     type = ParsedGenerateSideset\n     input = 'add_inlet2'\n     combinatorial_geometry = '(x>0.45 | x<0.05) & y<0.00001'\n     new_sideset_name = 'outlet'\n   []\n   [add_wall_top]\n     type = ParsedGenerateSideset\n     input = 'add_outlet'\n     combinatorial_geometry = 'x>0.05 & x<0.45 & (y>0.49999 | (y<0.450001 & y>0.3))'\n     new_sideset_name = 'walls_top'\n   []\n   [add_wall_bot]\n     type = ParsedGenerateSideset\n     input = 'add_wall_top'\n     combinatorial_geometry = 'x>0.05 & x<0.45 & (y<0.00001 | (y>0.049999 & y<0.1))'\n     new_sideset_name = 'walls_bottom'\n   []\n   [add_wall_left]\n     type = ParsedGenerateSideset\n     input = 'add_wall_bot'\n     combinatorial_geometry = '(x<0.00001 | (y>0.04999 & y<0.449999 & x>0.049999 & x<0.2))'\n     new_sideset_name = 'walls_left'\n   []\n   [add_wall_right]\n     type = ParsedGenerateSideset\n     input = 'add_wall_left'\n     combinatorial_geometry = '(x>0.49999 | (y>0.04999 & y<0.449999 & x>0.3 & x<0.450001))'\n     new_sideset_name = 'walls_right'\n     show_info = true\n   []\n []\n\n mu = 0.001241                   # The viscosity [Pa*s]\n rho = 1611                      # Density [kg/m\u00b3]\n k = 1.10                        # Thermal conductivity [W/m*K]\n cp = 2097.8                     # Specific heat capacity [J/kg*K]\n alpha = 0.0003035               # Thermal expansion\n temp_ref = 873.15               # Reference temperature for the thermal expansion law\n\n vel = 'velocity'\n velocity_interp_method = 'rc'\n advected_interp_method = 'upwind'\n cold_temp = 660\n hot_temp = 740\n\n IC_u = 9e-3\n IC_v = 9e-3\n\n [Variables]\n   [u]\n     type = INSFVVelocityVariable\n     cache_cell_gradients = false\n   []\n   [v]\n     type = INSFVVelocityVariable\n     cache_cell_gradients = false\n   []\n   [w]\n     type = INSFVVelocityVariable\n     cache_cell_gradients = false\n   []\n   [pressure]\n     type = INSFVPressureVariable\n     cache_cell_gradients = false\n   []\n   [T]\n     type = INSFVEnergyVariable\n     cache_cell_gradients = false\n     scaling = 1e-4\n   []\n   [lambda]\n     family = SCALAR\n     order = FIRST\n   []\n []\n\n\n [AuxVariables]\n   [U]\n     order = CONSTANT\n     family = MONOMIAL\n     fv = true\n     cache_cell_gradients = false\n   []\n   [mixing_len]\n     type = MooseVariableFVReal\n     cache_cell_gradients = false\n   []\n []\n\n [ICs]\n   [temperature_gradient]\n     type = FunctionIC\n     variable = T\n     function = 'gradient_temp'\n   []\n   [v_gradient]\n     type = FunctionIC\n     variable = v\n     function = 'gradient_v'\n   []\n   [u_gradient]\n     type = FunctionIC\n     variable = u\n     function = 'gradient_u'\n   []\n []\n\n [Functions]\n   # linear temperature profile for initialization\n   [gradient_temp]\n     type = ParsedFunction\n     value = 'if(y<0.05, hot_temp, if(y>0.45, cold_temp, hot_temp - (hot_temp-cold_temp) * y / 0.45))'\n     vars = 'cold_temp hot_temp'\n     vals = '${cold_temp} ${hot_temp}'\n   []\n   [gradient_v]\n     type = ParsedFunction\n     value = 'if(x<0.04375 & x>0.00625 & y>0.05 & y<0.45, IC_v,\n     if(x>0.45625 & x<0.49375 & y>0.05 & y<0.45, -IC_v,\n     if(x<0.04375 & x>0.00625 & y>0.01 & y<0.05, IC_v * y / 0.05,\n     if(x>0.45625 & x<0.49375 & y>0.01 & y<0.05, -IC_v * y / 0.05,\n     if(x<0.04375 & x>0.00625 & y>0.45 & y<0.49, IC_v - IC_v * (y - 0.45) / 0.05,\n     if(x>0.45625 & x<0.49375 & y>0.45 & y<0.49, -IC_v + IC_v * (y - 0.45) / 0.05,\n     0))))))'\n     vars = 'IC_v'\n     vals = '${IC_v}'\n   []\n   [gradient_u]\n     type = ParsedFunction\n     value = 'if(y<0.04375 & y>0.00625 & x>0.05 & x<0.45, -IC_u * (1 - (y/0.05)/3),\n     if(y>0.45625 & y<0.49375 & x>0.05 & x<0.45, IC_u * (2/3 - ((0.45 - y)/0.05)/3),\n     if(y<0.04375 & y>0.00625 & x>0.01 & x<0.05, -IC_u * x / 0.05,\n     if(y>0.45625 & y<0.49375 & x>0.01 & x<0.05, IC_u * x / 0.05,\n     if(y<0.04375 & y>0.00625 & x>0.45 & x<0.49, -IC_u + IC_u * (x - 0.45) / 0.05,\n     if(y>0.45625 & y<0.49375 & x>0.45 & x<0.49, IC_u - IC_u * (x - 0.45) / 0.05,\n     0))))))'\n     vars = 'IC_u'\n     vals = '${IC_u}'\n   []\n []\n\n [AuxKernels]\n   [mag]\n     type = VectorMagnitudeAux\n     variable = U\n     x = u\n     y = v\n     z = w\n     execute_on = 'initial timestep_end'\n   []\n   inactive = 'mixing_len'\n   [mixing_len]\n     type = WallDistanceMixingLengthAux\n     walls = 'walls_top walls_bottom walls_sides inlet1 inlet2 outlet'\n     variable = mixing_len\n     execute_on = 'initial timestep_end'\n     delta = 0.5\n   []\n []\n\n [FVKernels]\n   [mass]\n     type = INSFVMassAdvection\n     variable = pressure\n     vel = ${vel}\n     advected_interp_method = ${advected_interp_method}\n     velocity_interp_method = ${velocity_interp_method}\n     u = u\n     v = v\n     w = w\n     pressure = pressure\n     mu = 'mu'\n     rho = ${rho}\n   []\n   [mean_zero_pressure]\n     type = FVScalarLagrangeMultiplier\n     variable = pressure\n     lambda = lambda\n   []\n\n   [u_time]\n     type = INSFVMomentumTimeDerivative\n     variable = 'u'\n     rho = ${rho}\n   []\n   [u_advection]\n     type = INSFVMomentumAdvection\n     variable = u\n     advected_quantity = 'rhou'\n     vel = ${vel}\n     velocity_interp_method = ${velocity_interp_method}\n     advected_interp_method = ${advected_interp_method}\n     pressure = pressure\n     u = u\n     v = v\n     w = w\n     mu = 'mu'\n     rho = ${rho}\n   []\n   [u_viscosity]\n     type = FVDiffusion\n     variable = u\n     coeff = ${mu}\n   []\n   [u_pressure]\n     type = INSFVMomentumPressure\n     variable = u\n     momentum_component = 'x'\n     pressure = pressure\n   []\n   [u_turb]\n     type = INSFVMixingLengthReynoldsStress\n     variable = u\n     rho = ${rho}\n     mixing_length = mixing_len\n     momentum_component = 'x'\n     u = u\n     v = v\n     w = w\n   []\n\n   [v_time]\n     type = INSFVMomentumTimeDerivative\n     variable = v\n     rho = ${rho}\n   []\n   [v_advection]\n     type = INSFVMomentumAdvection\n     variable = v\n     advected_quantity = 'rhov'\n     vel = ${vel}\n     velocity_interp_method = ${velocity_interp_method}\n     advected_interp_method = ${advected_interp_method}\n     pressure = pressure\n     u = u\n     v = v\n     w = w\n     mu = 'mu'\n     rho = ${rho}\n   []\n   [v_viscosity]\n     type = FVDiffusion\n     variable = v\n     coeff = ${mu}\n   []\n   [v_pressure]\n     type = INSFVMomentumPressure\n     variable = v\n     momentum_component = 'y'\n     pressure = pressure\n   []\n   [v_turb]\n     type = INSFVMixingLengthReynoldsStress\n     variable = v\n     rho = ${rho}\n     mixing_length = mixing_len\n     momentum_component = 'y'\n     u = u\n     v = v\n     w = w\n   []\n   [v_buoyancy]\n     type = INSFVMomentumBoussinesq\n     variable = v\n     T_fluid = T\n     gravity = '0 -9.82 0'\n     rho = ${rho}\n     ref_temperature = ${temp_ref}\n     momentum_component = 'y'\n   []\n   [v_gravity]\n     type = INSFVMomentumGravity\n     variable = v\n     gravity = '0 -9.82 0'\n     rho = ${rho}\n     momentum_component = 'y'\n   []\n\n   [w_time]\n     type = INSFVMomentumTimeDerivative\n     variable = w\n     rho = ${rho}\n   []\n   [w_advection]\n     type = INSFVMomentumAdvection\n     variable = w\n     advected_quantity = 'rhow'\n     vel = ${vel}\n     velocity_interp_method = ${velocity_interp_method}\n     advected_interp_method = ${advected_interp_method}\n     pressure = pressure\n     u = u\n     v = v\n     w = w\n     mu = 'mu'\n     rho = ${rho}\n   []\n   [w_viscosity]\n     type = FVDiffusion\n     variable = w\n     coeff = ${mu}\n   []\n   [w_pressure]\n     type = INSFVMomentumPressure\n     variable = w\n     momentum_component = 'z'\n     pressure = pressure\n   []\n   [w_turb]\n     type = INSFVMixingLengthReynoldsStress\n     variable = w\n     rho = ${rho}\n     mixing_length = mixing_len\n     momentum_component = 'z'\n     u = u\n     v = v\n     w = w\n   []\n\n   [temp_time]\n     type = INSFVEnergyTimeDerivative\n     variable = T\n     rho = ${rho}\n     cp_name = 'cp'\n   []\n   [temp_conduction]\n     type = FVDiffusion\n     coeff = 'k'\n     variable = T\n   []\n   [temp_advection]\n     type = INSFVEnergyAdvection\n     variable = T\n     vel = ${vel}\n     velocity_interp_method = ${velocity_interp_method}\n     advected_interp_method = ${advected_interp_method}\n     pressure = pressure\n     u = u\n     v = v\n     w = w\n     mu = 'mu'\n     rho = ${rho}\n   []\n   [temp_turb]\n     type = WCNSFVMixingLengthEnergyDiffusion\n     variable = T\n     rho = ${rho}\n     cp = 'cp'\n     mixing_length = mixing_len\n     schmidt_number = 0.5\n     u = u\n     v = v\n     w = w\n   []\n []\n\n [ScalarKernels]\n   [mean_zero_pressure_lm]\n     type = AverageValueConstraint\n     variable = lambda\n     pp_name = pressure_integral\n     value = 0\n   []\n []\n\n [FVBCs]\n  [no_slip_x]\n    type = INSFVNoSlipWallBC\n    variable = u\n    boundary = 'walls_top walls_right walls_bottom walls_left inlet1 inlet2 outlet back front'\n    function = 0\n  []\n  [no_slip_y]\n    type = INSFVNoSlipWallBC\n    variable = v\n    boundary = 'walls_top walls_right walls_bottom walls_left inlet1 inlet2 outlet back front'\n    function = 0\n   []\n   [no_slip_z]\n    type = INSFVNoSlipWallBC\n    variable = w\n    boundary = 'walls_top walls_right walls_bottom walls_left inlet1 inlet2 outlet back front'\n    function = 0\n   []\n\n   [T_hot]\n     type = FVDirichletBC\n     variable = 'T'\n     boundary = 'walls_bottom'\n     value = ${hot_temp}\n   []\n\n   [T_cold]\n     type = FVDirichletBC\n     variable = 'T'\n     boundary = 'walls_top'\n     value = ${cold_temp}\n   []\n []\n\n [Functions]\n   [mu_rampdown]\n     type = PiecewiseLinear\n     x = '0.1 1 2 3'\n     y = '${fparse 1e3*mu} ${fparse 1e2*mu} ${fparse 1e1*mu} ${mu}'\n   []\n []\n\n [Postprocessors]\n   # To watch the rampdown\n   [mu]\n     type = FunctionValuePostprocessor\n     function = mu_rampdown\n   []\n   # To evaluate convergence (visual inspection still necessary!)\n   [average_temperature]\n     type = ElementAverageValue\n     variable = T\n   []\n   [average_velocity_v]\n     type = ElementAverageValue\n     variable = v\n   []\n   [average_velocity_u]\n     type = ElementAverageValue\n     variable = u\n   []\n   [average_pressure]\n     type = ElementAverageValue\n     variable = pressure\n   []\n   [pressure_integral]\n     type = ElementIntegralVariablePostprocessor\n     variable = pressure\n     execute_on = linear\n   []\n []\n\n\n [Materials]\n   [const_functor]\n     type = ADGenericConstantFunctorMaterial\n     prop_names = 'cp k alpha_b'\n     prop_values = '${cp} ${k} ${alpha}'\n   []\n   [mu_functor]\n     type = ADGenericFunctionFunctorMaterial\n     prop_names = 'mu'\n     prop_values = 'mu_rampdown'\n   []\n   [ins_fv]\n     type = INSFVMaterial\n     u = 'u'\n     v = 'v'\n     w = 'w'\n     pressure = 'pressure'\n     temperature = 'T'\n     rho = ${rho}\n   []\n []\n\n [Executioner]\n   type = Transient\n   dt = 0.01\n   dtmax = 1\n   # 1s after the end of the mu_rampdown\n   # going further could be required to relax the system to steady state further\n   end_time = 4\n   timestep_tolerance = 1e-5\n   solve_type = 'NEWTON'\n   petsc_options_iname = '-pc_type -ksp_gmres_restart -sub_pc_type -sub_pc_factor_shift_type'\n   petsc_options_value = 'asm             1200                ilu           NONZERO'\n   nl_rel_tol = 1e-5\n   nl_abs_tol = 1e-5\n   line_search = 'none'\n   #automatic_scaling = true\n   off_diagonals_in_auto_scaling = true\n []\n [Debug]\n   show_var_residual_norms = true\n []\n [Outputs]\n   exodus = true\n []\n \u2014\n You are receiving this because you are subscribed to this thread.\n Reply to this email directly, view it on GitHub, or unsubscribe.\n Triage notifications on the go with GitHub Mobile for iOS or Android.",
                  "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1701123",
                  "updatedAt": "2022-06-23T15:24:08Z",
                  "publishedAt": "2021-11-25T15:30:41Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "to be clear this is just a conflict with the names. If you rename viscosity in all the block (mu = 'other_name') that require it, you can let GeneralFunctorFluidProps define a 'mu' viscosity functor material property, and not use it but use the 'other_name' viscosity functor material property instead.\nPatch is here, #19490, not merged yet",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1711876",
                          "updatedAt": "2022-06-23T15:24:08Z",
                          "publishedAt": "2021-11-28T15:33:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "erikgus94"
                          },
                          "bodyText": "Hi @GiudGiud,\nThanks for the reply and the clarification!\nI'm not sure what you mean. If I define a functor called 'mu' but don't use it. Then define a ADGenericFunctorMaterial called 'other_name' which uses the ''other_name_rampdown' function and replaces 'mu' in all blocks. Then I get the same error as before but saying that 'other_name_rampdown' already exists.\nMaybe you could explain more clearly how to make a functor material property to depend on a function?",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1715275",
                          "updatedAt": "2022-06-23T15:24:07Z",
                          "publishedAt": "2021-11-29T11:15:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "There can only be a single instance of a name across all functor types (eg functions, matprops and variables). Can you make sure the function name is different than the functor material property name (the one defined in ADGenericFunctorMaterial) ?\nUsing the (AD)GenericFunctorMaterial is the correct way to call a function in a functor material property.\nAs a side note, you could also not use a (AD)GenericFunctorMaterial and use the function directly in all the kernels. The functor system lets you do that",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1716447",
                          "updatedAt": "2022-06-23T15:24:08Z",
                          "publishedAt": "2021-11-29T14:59:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "umm I think you ll run into trouble because PiecewiseLinear is not an AD function. @lindsayad I think we need a way to convert functors",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1716582",
                          "updatedAt": "2022-06-23T15:24:41Z",
                          "publishedAt": "2021-11-29T15:18:05Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "erikgus94"
                          },
                          "bodyText": "I don't think the problem is PiecewiseLinear. This worked just fine before the update.\nAlso I made sure that the function does not have the same name as any of the functors and I tried to call the function directly in the kernels. The problem is the same. Here is what I wrote:\n  [const_functor]\n    type = ADGenericFunctorMaterial\n    prop_names = 'cp k mu alpha_b'\n    prop_values = '${cp} ${k} ${mur} ${alpha}'\n  []\n\n[Functions]\n [other_name_rampdown]\n  type = PiecewiseLinear\n  x = '0.1 1 2 3'\n  y = '${fparse 1e3*other_name} ${fparse 1e2*other_name} ${fparse 1e1*other_name} ${other_name}'\n []\n[]\n\n[FVKernels]\n [mass]\n   type = INSFVMassAdvection\n   variable = pressure\n   vel = ${vel}\n   advected_interp_method = ${advected_interp_method}\n   velocity_interp_method = ${velocity_interp_method}\n   u = u\n   v = v\n   w = w\n   pressure = pressure\n   mu = 'other_name_rampdown'\n   rho = ${rho}\n []",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1716654",
                          "updatedAt": "2022-06-23T15:24:41Z",
                          "publishedAt": "2021-11-29T15:28:01Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "ok so you ll get a conflict between the GeneralFunctorFluidProps and this one\n  [const_functor]\n    type = ADGenericFunctorMaterial\n    prop_names = 'cp k mu alpha_b'\n    prop_values = '${cp} ${k} ${mur} ${alpha}'\n  []\n\nbecause they both define mu as a functor",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1716665",
                          "updatedAt": "2022-06-23T15:24:46Z",
                          "publishedAt": "2021-11-29T15:29:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "erikgus94"
                          },
                          "bodyText": "Okay, now there is no functor anywhere named mu. cp and k are called directly in the kernels as constants (not named the same as the functors cp and k from GeneralFunctorFluidProps). mu in the kernels calls the function for mu rampdown which is not named as any other functor. The error message is still the same. Here is the materials block as it looks now, just random inputs as the properties are not used.\n[Modules]\n  [FluidProperties]\n    [fp]\n      type = FlibeFluidProperties\n    []\n  []\n[]\n\n[Materials]\n  [const_functor]\n    type = ADGenericFunctorMaterial\n    prop_names = 'alpha_b'\n    prop_values = '${alpha}'\n  []\n  [ins_fv]\n    type = INSFVMaterial\n    u = 'u'\n    v = 'v'\n    w = 'w'\n    pressure = 'pressure'\n    temperature = 'T'\n    rho = ${rho}\n  []\n  [fluid_props_to_mat_props]\n    type = GeneralFunctorFluidProps\n    fp = fp\n    pressure = 3000\n    T_fluid = 300\n    speed = 1\n    characteristic_length = 1\n    porosity = 1\n  []\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1716913",
                          "updatedAt": "2022-06-23T15:24:53Z",
                          "publishedAt": "2021-11-29T16:12:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "GeneralFunctorFluidProps defines a 'mu' functor. It s good that there is no other.\nCan you remind me of the error? Is it the one in the first post?\nThat one is basically: \"an AD functor is requested but I only found other types of functors with the same name\".\nSo I think in your case, mu_rampdown is a normal functor, the code is requesting an AD one",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1717036",
                          "updatedAt": "2022-06-23T15:25:03Z",
                          "publishedAt": "2021-11-29T16:32:37Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "the solution to that will be to use an ADFunction. One of the very few ones we have is the ADParsedFunction\nSame docs as ParsedFunction:\nhttps://mooseframework.inl.gov/moose/source/functions/MooseParsedFunction.html",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1717042",
                          "updatedAt": "2022-06-23T15:25:03Z",
                          "publishedAt": "2021-11-29T16:33:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "erikgus94"
                          },
                          "bodyText": "Exactly, this is how it look right now:\n\nThe function for mu rampdown is called fisk_ramper",
                          "url": "https://github.com/idaholab/moose/discussions/19488#discussioncomment-1717053",
                          "updatedAt": "2022-06-23T15:25:03Z",
                          "publishedAt": "2021-11-29T16:36:11Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Action to generate Global params",
          "author": {
            "login": "KhaledNabilSharafeldin"
          },
          "bodyText": "Hello,\nSo currently i'm putting together an action to initialise a lot of variables, auxVariables, and ultimately form global params with the names of these variables. I'm aware of the global params action, but I am not sure how to add it to my action.\nso far what i'm doing is adding the variables when the _current_task = \"add_aux_variable\" and _current_task = \"add_variable\", similar to PolycrystalVariablesAction.\nhowever, I'm not sure how to set the global parameters in the custom action.\nhere's the code I'm using:\nregisterMooseAction(\"CustomApp\", CustomVariablesAction, \"set_global_params\");\n\nvoid\nCustomVariablesAction::act()\n{\n \n  if (_current_task = \"set_global_params\")\n  {\n    auto globalparams = _factory.getValidParams(\"GlobalParamsAction\");\n    globalparams.addParam<std::string>(\"rho_vars\") = _rho_vars;\n    globalparams.addParam<std::string>(\"rho_virt_vars\") = _rho_virt_vars;\n  }\n}\n\nThank you in advance.",
          "url": "https://github.com/idaholab/moose/discussions/19563",
          "updatedAt": "2022-06-02T14:36:12Z",
          "publishedAt": "2021-12-07T02:23:29Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "vanwdani"
                  },
                  "bodyText": "Well, there are a couple of ways to do this.  The GlobalParamAction needs to know what the the expected inputParameter will be on the left side of your conditional statement and the given name on the right.  A typical example would be something like\n[GlobalParams] temperature = temperature []\nThis works well for manually creating input files, but not as well for action creation.  Adding the parameters like you have shown is usually done within the InputParameters section of the Action.  Once these parameters have been defined, then they are available for the user to enter within the corresponding Action block.  This would be something like:\n[MyAction] rho_vars = \"whatever_you_enter\" []\nSo for this action since you are already creating the Variables, and AuxVariables, and the InitialConditions if they have any, you already know what the names will be.  I think you should be able to pass these names directly to whatever class needs them, be it a Material, BC, PostProcessor, or another Action.  If this isn't the case and you want the names from the GlobalParams block to define the names created and then passed, cli_args is probably the easiest route.\nhttps://mooseframework.inl.gov/application_usage/input_syntax.html",
                  "url": "https://github.com/idaholab/moose/discussions/19563#discussioncomment-1766531",
                  "updatedAt": "2022-06-02T14:36:14Z",
                  "publishedAt": "2021-12-07T16:03:27Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "KhaledNabilSharafeldin"
                          },
                          "bodyText": "I do have the names generated by the code, and stored in one string space separated similar to the one passed in the input file\nstd::string _rho_vars = \"var1a var1b var1c var2a \"\n\nwhat I just understood was that this:\n    auto globalparams = _factory.getValidParams(\"GlobalParamsAction\");\n    globalparams.addParam<std::string>(\"rho_vars\") = _rho_vars;\n\nonly CREATES the rho_vars but doesnt fill in the values, is that correct?\nalso, I'm populating this string _rho_vars during add_variable and add_aux_variable, so does set_global_params get called before or after these time flags?\nthank you for your reply!",
                          "url": "https://github.com/idaholab/moose/discussions/19563#discussioncomment-1767947",
                          "updatedAt": "2022-06-02T14:36:28Z",
                          "publishedAt": "2021-12-07T18:21:21Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "vanwdani"
                          },
                          "bodyText": "auto globalparams = _factory.getValidParams(\"GlobalParamsAction\");\nglobalparams.addParam<std::string>(\"rho_vars\") = _rho_vars;\n\nThe 1st line is getting the already defined inputParameters from the GlobalParamsAction, which looking at the file is basically on the the inputParameters of Action.C.  The 2nd line is not placed in the right area.  This should be done within a InputParameters block within the class before initialization.  What this does is says, \"this class is expecting the user to give me the names of the rho variables.\"  You've already created those names within the action, so you can't directly input them.\nSo the question is:  Where are these parameters going to be applied?\nIf you already know where these need to go, you can create the needed classes within your action.  Just like you've used add_variable, you can utilize add_material or add_bc, etc.  Then it's easily done with something like\nauto type = NAME_OF_CLASS;\nauto params = _factory.getValidParams(type);\nparams.set<TYPE_OF_INPUT_PARAMETER_EXPECTED_BY_CLASS>(\"NAME_WITHIN_CLASS) = _rho_vars;\n_problem->addMaterial(type, NAME_OF_BLOCK_YOU_CHOOSE, params);",
                          "url": "https://github.com/idaholab/moose/discussions/19563#discussioncomment-1768098",
                          "updatedAt": "2022-06-02T14:36:24Z",
                          "publishedAt": "2021-12-07T18:46:37Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "failing to compile contact module",
          "author": {
            "login": "mcacace"
          },
          "bodyText": "Dear all,\nafter a fresh update of libmesh and moose, I cannot compile the contact module any longer. Errors seem to be related to some malfunctions in the TIMPI libmesh - no type (buffer_type) and accessing private members or not defined functions.\nI should add that other modules (and the framework) compile just fine, and that my moose-libmesh version (via conda) is somewhat older (no idea why, since I also update conda)  than the one posted in the discussions (2021.10.27 vs 2021.11.11 --> might this do the trick), and I am running on an ubuntu 18.04 LTS system.\nAny help/hints would be great, thanks,\nmauro",
          "url": "https://github.com/idaholab/moose/discussions/19569",
          "updatedAt": "2022-09-30T01:41:56Z",
          "publishedAt": "2021-12-07T16:50:12Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYour moose-libmesh version cannot be older than the supported one, otherwise moose cant compile.\nPlease follow the instructions on that post you saw\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/19569#discussioncomment-1767496",
                  "updatedAt": "2022-09-30T01:41:57Z",
                  "publishedAt": "2021-12-07T17:08:05Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "mcacace"
                          },
                          "bodyText": "@GiudGiud I did follow the steps for updating via conda, but cannot upgrade my moose-libmesh version further.",
                          "url": "https://github.com/idaholab/moose/discussions/19569#discussioncomment-1767514",
                          "updatedAt": "2022-09-30T01:41:59Z",
                          "publishedAt": "2021-12-07T17:10:29Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "ngrilli"
                  },
                  "bodyText": "Dear @mcacace\nI updated last week and also has problems compiling.\nI ended up cancelling completely the moose folder and starting the Ubuntu installation procedure from scratch,\nso that also libmesh and petsc get updated.\nBest Regards,\nNicol\u00f2",
                  "url": "https://github.com/idaholab/moose/discussions/19569#discussioncomment-1767499",
                  "updatedAt": "2022-09-30T01:41:59Z",
                  "publishedAt": "2021-12-07T17:08:54Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "mcacace"
                          },
                          "bodyText": "@ngrilli thanks! I would try to forced removing the moose envs in the conda and reinstall all. BTW, did you also upgrade to mamba? And, is it worth? Thanks",
                          "url": "https://github.com/idaholab/moose/discussions/19569#discussioncomment-1767524",
                          "updatedAt": "2022-10-09T03:58:08Z",
                          "publishedAt": "2021-12-07T17:13:21Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "see this post\n#19532\nThis is the current solution to update",
                          "url": "https://github.com/idaholab/moose/discussions/19569#discussioncomment-1767618",
                          "updatedAt": "2022-10-09T03:58:09Z",
                          "publishedAt": "2021-12-07T17:28:58Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "mcacace"
                          },
                          "bodyText": "@ngrilli It worked, I have now the current libmesh version (and wow, mamba is indeed faster!).",
                          "url": "https://github.com/idaholab/moose/discussions/19569#discussioncomment-1767698",
                          "updatedAt": "2022-10-09T03:58:09Z",
                          "publishedAt": "2021-12-07T17:39:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "mcacace"
                          },
                          "bodyText": "Thanks @GiudGiud -- I should have read the whole post ...",
                          "url": "https://github.com/idaholab/moose/discussions/19569#discussioncomment-1767709",
                          "updatedAt": "2022-10-09T03:58:09Z",
                          "publishedAt": "2021-12-07T17:41:15Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "exit code 11",
          "author": {
            "login": "amosaha"
          },
          "bodyText": "Hi ,\nMy input file is below, and I\u2019m sure my mesh file is correct. When I add the BCs of the type of heatconductionBC , the procedure crashed and told me the exit code 11. How to solve the problem?\nThanks.\n\n[GlobalParams]\n  displacements = 'disp_x disp_y disp_z'\n[]\n\n[Mesh]\n  file=suc.e\n[]\n\n\n[Variables]\n  [temp]\n    block='1 2'\n initial_condition=1.0\n  []\n[]\n\n\n[Modules/TensorMechanics/Master]\n  [all]\n    add_variables = true\n    strain = SMALL\n    automatic_eigenstrain_names = true\n    generate_output = 'vonmises_stress'\n  []\n[]\n\n[Kernels]\n  [hc]\n    type = HeatConduction\n    variable = temp\n    block='1 2'\n  []\n  [source]\n    type=HeatSource\n    variable=temp\n    block=2\n    value=10\n  []\n[]\n\n[BCs] \n  [temp.inside]\n    type = DirichletBC\n    variable = temp\n    boundary = inside\n    value = 10\n   []\n  [temp.outside]\n    type = DirichletBC\n    variable = temp\n    boundary = ouside\n    value = 1\n[]\n [./middle]\n    type=HeatConductionBC\n    variable=temp\n    boundary='middle'\n  [../]\n\n [bottomz]\n    type = DirichletBC\n    variable = disp_z\n    boundary = bottom\n    value = 0\n   []\n [fix1]\n    type = DirichletBC\n    variable = disp_y\n    boundary = fix1\n    value = 0\n   []\n [fix2]\n    type = DirichletBC\n    variable = disp_x\n    boundary = fix2\n    value = 0\n   []\n[]\n\n[Materials]\n  [hcm]\n    type = HeatConductionMaterial\n    block = '1 2'\n    specific_heat = 460\n    thermal_conductivity = 40\n    use_displaced_mesh = true \n  []\n [density]\n type = GenericConstantMaterial\n    prop_names = 'density'\n    prop_values = '7.85'\n  []\n  [elasticity]\n    type = ComputeIsotropicElasticityTensor\n    youngs_modulus = 2e11\n    poissons_ratio = 0.3\n  []\n  [expansion]\n    type = ComputeThermalExpansionEigenstrain\n    temperature = temp\n    thermal_expansion_coeff = 1.2e-5\n    stress_free_temperature =5\n    eigenstrain_name = thermal_expansion\n  []\n  [stress]\n    type = ComputeLinearElasticStress\n  []\n[]\n\n[Preconditioning]\n    [./SMP]\n        type = SMP\n        full = true\n    [../]\n[]\n\n\n[Executioner]\n  type =Steady\n  solve_type = 'PJFNK'\n  petsc_options_iname='-pc_type -pc_hypre_type'\n  petsc_options_value='hypre boomeramg'\n#  start_time=0.0\n#  num_steps=10\n#  dt=0.1\n[]\n\n[Outputs]\n  exodus = true\n[]",
          "url": "https://github.com/idaholab/moose/discussions/19550",
          "updatedAt": "2022-07-08T00:06:28Z",
          "publishedAt": "2021-12-06T09:11:55Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nPlease follow the instructions there https://mooseframework.inl.gov/application_development/debugging.html to:\n\nrun in devel or debug mode and see if you hit any problems\nget a backtrace if you do\n\nI suspect the problem is with the boundary condition in the middle of the mesh.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/19550#discussioncomment-1760575",
                  "updatedAt": "2022-07-08T00:06:32Z",
                  "publishedAt": "2021-12-06T19:48:31Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "amosaha"
                          },
                          "bodyText": "Oh thanks. I have found my problem.",
                          "url": "https://github.com/idaholab/moose/discussions/19550#discussioncomment-1762983",
                          "updatedAt": "2022-07-08T00:06:35Z",
                          "publishedAt": "2021-12-07T07:04:37Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "How to output curve of strain hardening rate and strain",
          "author": {
            "login": "xchengood"
          },
          "bodyText": "Hi Moose experts or users,\nCould anyone share any ideas or thoughts about how to output the curve of strain hardening rate and strain? One example is shown below. Now I can get a reasonable curve of stress-strain. But I have no idea how to obtain the curve of strain hardening rate-strain in Moose. Thank you.",
          "url": "https://github.com/idaholab/moose/discussions/19557",
          "updatedAt": "2022-09-12T17:14:52Z",
          "publishedAt": "2021-12-06T19:25:16Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "ngrilli"
                  },
                  "bodyText": "Dear @xchengood\nParaview has a time derivative filter, you can take the time derivative of the stress,\nif you know your strain rate, you will be able to calculate the d_sigma/d_epsilon.\nBest Regards,\nNicol\u00f2",
                  "url": "https://github.com/idaholab/moose/discussions/19557#discussioncomment-1761529",
                  "updatedAt": "2022-09-12T17:14:59Z",
                  "publishedAt": "2021-12-06T23:21:51Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "One dimensional harmonic elastic wave results does not make sense",
          "author": {
            "login": "aaelmeli"
          },
          "bodyText": "Hi\nI am modeling harmonic elastic wave propagation in a one-dimensional bar. The bar is fixed on the left, and I apply DirichletBC=1 on the right end. The results do not seem to be accurate, please see the following picture, the displacement suddenly dropped from 1 to a relatively very small value then oscillates.\n\nIf I changed the DirichletBC=1 to be NeumannBC=1 on the right, I got the correct solution.\nThe input file that can reproduce these results is as follows:\n[Mesh]\n    type = GeneratedMesh\n    dim = 1\n    xmin=0\n    xmax=1\n    nx = 1000\n[]\n\n[Variables]\n    [uxr]\n       order = FIRST\n       family = LAGRANGE\n    []\n \n    [uxi]\n       order = FIRST\n       family = LAGRANGE\n    []\n\n[]\n\n[Kernels]\n    [urealx]\n    type = StressDivergenceTensors\n    variable = uxr\n    displacements='uxr'\n    component = 0\n    base_name = A\n    []\n\n    [uimagx]\n    type = StressDivergenceTensors\n    variable = uxi\n    displacements='uxi'\n    component = 0\n    base_name = B\n    []\n\n    [reaction_realx]\n        type = Reaction\n        variable = uxr\n        rate = -10000\n    []\n\n    [reaction_imagx]\n        type = Reaction\n        variable = uxi\n        rate = -10000\n    []\n\n\n[]\n\n[BCs]\n#Left\n  [uxr_left]\n        type = DirichletBC\n        variable = uxr\n        boundary = 'left'\n        value = 0\n  []\n  [uxi_left]\n        type = DirichletBC\n        variable = uxi\n        boundary = 'left'\n        value = 0\n  []\n\n    [BC_right_xreal]\n        type = DirichletBC\n        variable = uxr\n        boundary = 'right'\n        value = 1\n    []\n    [BC_right_ximag]\n        type = DirichletBC\n        variable = uxi\n        boundary = 'right'\n        value = 0\n    []\n\n[]\n[Materials]\n\n  [elasticity_tensor_A]\n    type = ComputeIsotropicElasticityTensor\n    base_name = A\n    youngs_modulus = 1\n    poissons_ratio = 0.0\n  []\n  [strain_A]\n    type = ComputePlaneFiniteStrain\n    base_name = A\n    displacements='uxr  uxi'\n  []\n  [stress_A]\n    type = ComputeFiniteStrainElasticStress\n    base_name = A\n  []\n\n   [elasticity_tensor_B]\n    type = ComputeIsotropicElasticityTensor\n    base_name = B\n    youngs_modulus = 1\n    poissons_ratio = 0.0\n  []\n  [strain_B]\n    type = ComputePlaneFiniteStrain\n    base_name = B\n    displacements='uxr  uxi '\n  []\n  [stress_B]\n    type = ComputeFiniteStrainElasticStress\n    base_name = B\n  []\n\n[]\n\n\n[Outputs]\n    [exodus_coupled]\n        type = Exodus\n    []\n        print_perf_log = true\n[]\n\n[Executioner]\n  type = Steady\n  solve_type=LINEAR\n  petsc_options_iname = ' -pc_type'\n  petsc_options_value = 'lu'\n[]\n\nAny suggestions?",
          "url": "https://github.com/idaholab/moose/discussions/19510",
          "updatedAt": "2022-06-18T06:13:06Z",
          "publishedAt": "2021-11-30T18:24:08Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "hugary1995"
                  },
                  "bodyText": "There are a few things I don't understand in your input file. For starters, could you write down the equations you are trying to solve here?",
                  "url": "https://github.com/idaholab/moose/discussions/19510#discussioncomment-1728213",
                  "updatedAt": "2022-06-18T06:13:20Z",
                  "publishedAt": "2021-12-01T13:07:35Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "aaelmeli"
                          },
                          "bodyText": "Hi @hugary1995 ,\nThis is an attempt to model the steady-state elastic wave equation. This can be generally written as\n\nwith D=1 (the dimension of the problem)\nIn the posted input file, I just considered the minimum input that can reproduce the results. So, I only considered the x-displacement.\nThe original input file that I used is as follows, which includes two displacement components (x,y). The CoupledVarNeumannBC was used to couple the real and imaginary parts of each displacement component.\n[Mesh]\n    type = GeneratedMesh\n    dim = 1\n    xmin=0\n    xmax=1\n    nx = 1000\n[]\n\n[Variables]\n    [uxr]\n       order = FIRST\n       family = LAGRANGE\n    []\n    [uyr]\n       order = FIRST\n       family = LAGRANGE\n    []\n    [uxi]\n       order = FIRST\n       family = LAGRANGE\n    []\n    [uyi]\n       order = FIRST\n       family = LAGRANGE\n    []\n[]\n\n[Kernels]\n    [urealx]\n    type = StressDivergenceTensors\n    variable = uxr\n    displacements='uxr'\n    component = 0\n    base_name = A\n    []\n    [urealy]\n    type = StressDivergenceTensors\n    variable = uyr\n    displacements='uyr'\n    component = 1\n    base_name = B\n    []\n    [uimagx]\n    type = StressDivergenceTensors\n    variable = uxi\n    displacements='uxi'\n    component = 0\n    base_name = A\n    []\n    [uimagy]\n    type = StressDivergenceTensors\n    variable = uyi\n    displacements='uyi'\n    component = 1\n    base_name = B\n    []\n    [reaction_realx]\n        type = Reaction\n        variable = uxr\n        rate = -10000\n    []\n    [reaction_realy]\n        type = Reaction\n        variable = uyr\n        rate = -10000\n    []\n    [reaction_imagx]\n        type = Reaction\n        variable = uxi\n        rate = -10000\n    []\n    [reaction_imagy]\n        type = Reaction\n        variable = uyi\n        rate = -10000\n    []\n[]\n\n[BCs]\n#Left\n  [uxr_left]\n        type = CoupledVarNeumannBC\n        variable = uxr\n        boundary = 'left'\n        v = uxi\n        coef=-100\n  []\n  [uxi_left]\n        type = CoupledVarNeumannBC\n        variable = uxi\n        boundary = 'left'\n        v = uxr\n        coef=100\n  []\n  [uyr_left]\n        type = CoupledVarNeumannBC\n        variable = uyr\n        boundary = 'left'\n        v = uyi\n        coef=-70.7\n  []\n  [uyi_left]\n        type = CoupledVarNeumannBC\n        variable = uyi\n        boundary = 'left'\n        v = uyr\n        coef=70.7\n  []\n    [BC_right_xreal]\n        type = DirichletBC\n        variable = uxr\n        boundary = 'right'\n        value = 1\n    []\n    [BC_right_ximag]\n        type = DirichletBC\n        variable = uxi\n        boundary = 'right'\n        value = 0\n    []\n[]\n[Materials]\n\n  [elasticity_tensor_A]\n    type = ComputeIsotropicElasticityTensor\n    base_name = A\n    youngs_modulus = 1\n    poissons_ratio = 0.0\n  []\n  [strain_A]\n    type = ComputePlaneFiniteStrain\n    base_name = A\n    displacements='uxr uyr'\n  []\n  [stress_A]\n    type = ComputeFiniteStrainElasticStress\n    base_name = A\n  []\n\n   [elasticity_tensor_B]\n    type = ComputeIsotropicElasticityTensor\n    base_name = B\n    youngs_modulus = 1\n    poissons_ratio = 0.0\n  []\n  [strain_B]\n    type = ComputePlaneFiniteStrain\n    base_name = B\n    displacements='uxi uyi'\n  []\n  [stress_B]\n    type = ComputeFiniteStrainElasticStress\n    base_name = B\n  []\n\n[]\n\n[Outputs]\n    [exodus_coupled]\n        type = Exodus\n    []\nperf_graph = true\n[]\n\n[Executioner]\n type = Steady\n solve_type=LINEAR\n petsc_options_iname = ' -pc_type'\n petsc_options_value = 'lu'\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/19510#discussioncomment-1732435",
                          "updatedAt": "2022-06-18T06:13:21Z",
                          "publishedAt": "2021-12-01T22:20:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "I typed some equations in this pdf:\nscratch.pdf\nSo basically your real and imaginary parts should be decoupled. But in your 1D input file you are defining strains as some weird coupling between real and imaginary displacements. I recommend you to name your base names as base_name = real and base_name = imaginary for better readability. Another way to view this is: If you separate out objects with either base name, you should get a completely defined model.\nI also noticed that you used nonlinear constitutive relations in your input file, e.g. ComputeFiniteStrainElasticStress and ComputePlaneFiniteStrain. Therefore your system is no longer linear, so you cannot use solve_type = LINEAR in the executioner. Try solve_type = Newton.",
                          "url": "https://github.com/idaholab/moose/discussions/19510#discussioncomment-1741426",
                          "updatedAt": "2022-06-18T06:14:06Z",
                          "publishedAt": "2021-12-03T02:47:06Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "I took a look at your 2D input file, it's not quite right either. For example, the stress divergence kernels should be set up like:\n[urealx]\n    type = StressDivergenceTensors\n    variable = uxr\n    displacements='uxr uyr'\n    component = 0\n    base_name = real\n[]\n[urealy]\n    type = StressDivergenceTensors\n    variable = uyr\n    displacements='uxr uyr'\n    component = 1\n    base_name = real\n[]\n[uimagx]\n    type = StressDivergenceTensors\n    variable = uxi\n    displacements='uxi uyi'\n    component = 0\n    base_name = imaginary\n[]\n[uimagy]\n    type = StressDivergenceTensors\n    variable = uyi\n    displacements='uxi uyi'\n    component = 1\n    base_name = imaginary\n[]\nThe displacements argument should be displacement components associated with this vector-valued momentum equation.",
                          "url": "https://github.com/idaholab/moose/discussions/19510#discussioncomment-1741672",
                          "updatedAt": "2022-06-18T06:14:05Z",
                          "publishedAt": "2021-12-03T04:09:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "aaelmeli"
                          },
                          "bodyText": "Thanks, @hugary1995 for correcting me, I was not careful when creating the 1-D input file, for the 2D (not posted here), I have correctly defined the kernel, but I have used nonlinear constitutive relation. once I corrected it and considered your corrections, I got the expected solution.\nThank you.",
                          "url": "https://github.com/idaholab/moose/discussions/19510#discussioncomment-1760895",
                          "updatedAt": "2022-10-04T03:20:25Z",
                          "publishedAt": "2021-12-06T20:53:15Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "[Solution][Conda error][CondaHTTPError: HTTP 000 CONNECTION FAILED]",
          "author": {
            "login": "coskrrb2002"
          },
          "bodyText": "For those who suffer from the error of \"CondaHTTPError: HTTP 000 CONNECTION FAILED\".\nUse the following steps.\n\nDownload the old version of Conda by the following command:\nwget https://repo.anaconda.com/miniconda/Miniconda3-4.7.12.1-Linux-x86_64.sh\nInstall it.\nbash Miniconda3-4.7.12.1-Linux-x86_64.sh -b -p ~/miniconda3\nThen you can follow the guideline of moose for Linux:\nhttps://mooseframework.inl.gov/getting_started/installation/conda.html\nFollow from the line:\nexport PATH=$HOME/miniconda3/bin:$PATH\n\nCheers,\nNakkyu",
          "url": "https://github.com/idaholab/moose/discussions/19544",
          "updatedAt": "2022-10-17T13:07:50Z",
          "publishedAt": "2021-12-04T06:04:41Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "loganharbour"
                  },
                  "bodyText": "I'm not sure I would suggest this. Errors like that usually indicative of an actual connection issue.\nDo you have a thread somewhere in which someone suggested a downgrade?",
                  "url": "https://github.com/idaholab/moose/discussions/19544#discussioncomment-1750976",
                  "updatedAt": "2022-10-17T13:08:00Z",
                  "publishedAt": "2021-12-04T23:53:39Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "coskrrb2002"
                          },
                          "bodyText": "Here is the post:\nconda/conda#9948\nI used a Ubuntu app for windows.\nSo, I was guessing that this connection issue is related to wsl version of windows.\nBy the way, after the installation of the old version of Conda, Conda can be updated.\nSo, until someone figure out the real problem, I guess this will be the temporary solution.",
                          "url": "https://github.com/idaholab/moose/discussions/19544#discussioncomment-1751477",
                          "updatedAt": "2022-10-17T13:08:06Z",
                          "publishedAt": "2021-12-05T06:42:01Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "There are other work-arounds on that issue. Indeed I actually posted among that thread a couple months back.\nThis fix should work for any installation of Conda (Miniconda, Miniforge, Mambaforge, etc).\nfind miniconda3/ -type f -exec touch {} +\nI prefer the above solution over others mentioning chmod -R 777. For obvious security reasons.",
                          "url": "https://github.com/idaholab/moose/discussions/19544#discussioncomment-1757664",
                          "updatedAt": "2022-10-17T13:08:06Z",
                          "publishedAt": "2021-12-06T13:40:02Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Something wrong about PETSc and libmesh(PETSc was not found)",
          "author": {
            "login": "wzx-zzsdad"
          },
          "bodyText": "When I use ./update_and_rebuild_libmesh.sh ,it shows me this question above. But my PETSc was already installed. I downloaded PETSc 3.13.2 and used this way to install PETSc below:\n\nand the result of installing PETSc is below:\n\nmy compiler and mpi information(I can use the same way to install moose successfully on other platform(openeuler) but on centos7.6 it can not be installed successfully):\n\n\nBy the way,this information about compiling libmesh on openeuler platform is yes:\n\nPlease help me,thank you!",
          "url": "https://github.com/idaholab/moose/discussions/19491",
          "updatedAt": "2022-06-17T03:00:16Z",
          "publishedAt": "2021-11-28T07:09:06Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "In the same directory where you ran ./update_and_rebuild_libmesh.sh, there is a libmesh_diagnostic.log. Can you attach that to this thread? It gets created when you run ./update_and_rebuild_libmesh.sh. So if the diagnostic log is not present, just run the script again, let it fail, and then the log file should be present.\nAlso, in /home/MOOSE/moose/libmesh/build, there should be a config.log. Please attach that as well (the more information the better).\nSome thoughts\nFlang could also be an issue if that is your selected fortran wrapper/compiler. To my knowledge, we have yet to make use of this new fortran compiler from the LLVM toolchain.\nA simple test for this, would be to try and build libmesh without PETSc support (just to see if libMesh can be built using your compiler stack). Perhaps libMesh is using system compilers, while PETSc was instructed to use special compilers (--with-mpi-dir=/path/to/install/ompi). Being that is a screen shot, and not pasted text, I have to assume /path/to/ompi literally exists.",
                  "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1716497",
                  "updatedAt": "2022-06-22T12:39:29Z",
                  "publishedAt": "2021-11-29T15:06:46Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "wzx-zzsdad"
                          },
                          "bodyText": "I rebuild libmesh in a new path, two logs:\nlibmesh_diagnostic.docx\nconfig.docx\nI also tried  your thoughts.I build libmesh without PETSc but it will generate too many errors when 'make'.\n\nAnd I dont know where can I find complete information about this.\nFurthermore , if my system compilers is GCC9.1.0, I can successfully install libmesh by ./updata_and_build_libmesh.sh and moose even though my openmpi was installed by clang/flang. I tried specifying --with-cc=clang --with-cxx=clang++ --with-fc=flang in configure_libmesh.sh but it also cannot make successfully .Is there any other ways to install libmesh by specifying the compiler?",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1719740",
                          "updatedAt": "2022-06-23T09:03:46Z",
                          "publishedAt": "2021-11-30T03:21:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I don't have any Microsoft products installed... can you attache a regular .txt log?\n[edit] never mind. I see it is only the suffix being called .docx. I can open these files just fine with a basic editor.",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1723147",
                          "updatedAt": "2022-06-23T09:03:46Z",
                          "publishedAt": "2021-11-30T16:02:38Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "The error is with this:\nconfigure:48980: result: <<< Found PETSc 3.13.2 installation in /home/MOOSE-clang/moose/petsc ... >>>\nconfigure:48990: checking whether we can compile a trivial PETSc program\nconfigure:49021: /path/to/install/ompi/bin/mpicxx -c  -I/home/MOOSE-clang/moose/petsc/include -I/home/MOOSE-clang/moose/petsc/arch-moose/include -I/home/MOOSE-clang/moose/petsc/arch-moose/include -I/home/MOOSE-clang/moose/petsc/include -I/home/MOOSE-clang/moose/petsc/arch-moose/include -I/path/to/install/ompi/include  conftest.cpp >&5\nIn file included from conftest.cpp:146:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petsc.h:5:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petscbag.h:4:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petscsys.h:36:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petscsystypes.h:218:\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:374:34: error: no matching member function for call to 'imag'\n      complex<_Tp> __r(__x, -__y.imag());\n                             ~~~~^~~~\n/home/MOOSE-clang/moose/petsc/include/petsccxxcomplexfix.h:73:1: note: in instantiation of function template specialization 'std::operator-<double>' requested here\nPETSC_CXX_COMPLEX_FIX(PetscInt)\n^\n/home/MOOSE-clang/moose/petsc/include/petsccxxcomplexfix.h:55:104: note: expanded from macro 'PETSC_CXX_COMPLEX_FIX'\nstatic inline PetscComplex operator-(const Type& lhs, const PetscComplex& rhs) { return PetscReal(lhs) - const_cast<PetscComplex&>(rhs); } \\\n                                                                                                       ^\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1224:7: note: candidate function not viable: 'this' argument has type 'const complex<double>', but method is not marked const\n      imag() { return __imag__ _M_value; }\n      ^\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1245:7: note: candidate function not viable: requires single argument '__val', but no arguments were provided\n      imag(double __val) { __imag__ _M_value = __val; }\n      ^\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1328:23: error: no matching member function for call to 'real'\n          __real__ __t = __z.real();\n                         ~~~~^~~~\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:435:11: note: in instantiation of function template specialization 'std::complex<double>::operator/=<double>' requested here\n      __r /= __y;\n          ^\n/home/MOOSE-clang/moose/petsc/include/petsccxxcomplexfix.h:73:1: note: in instantiation of function template specialization 'std::operator/<double>' requested here\nPETSC_CXX_COMPLEX_FIX(PetscInt)\n^\n/home/MOOSE-clang/moose/petsc/include/petsccxxcomplexfix.h:59:104: note: expanded from macro 'PETSC_CXX_COMPLEX_FIX'\nstatic inline PetscComplex operator/(const Type& lhs, const PetscComplex& rhs) { return PetscReal(lhs) / const_cast<PetscComplex&>(rhs); } \\\n                                                                                                       ^\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1220:7: note: candidate function not viable: 'this' argument has type 'const complex<double>', but method is not marked const\n      real() { return __real__ _M_value; }\n      ^\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1242:7: note: candidate function not viable: requires single argument '__val', but no arguments were provided\n      real(double __val) { __real__ _M_value = __val; }\n      ^\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1329:23: error: no matching member function for call to 'imag'\n          __imag__ __t = __z.imag();\n                         ~~~~^~~~\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1224:7: note: candidate function not viable: 'this' argument has type 'const complex<double>', but method is not marked const\n      imag() { return __imag__ _M_value; }\n      ^\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:1245:7: note: candidate function not viable: requires single argument '__val', but no arguments were provided\n      imag(double __val) { __imag__ _M_value = __val; }\n      ^\n3 errors generated.\nconfigure:49021: $? = 1\nconfigure: failed program was:\n| /* confdefs.h */\n| #define PACKAGE_NAME \"libmesh\"\n| #define PACKAGE_TARNAME \"libmesh\"\n| #define PACKAGE_VERSION \"1.7.0-pre\"\n| #define PACKAGE_STRING \"libmesh 1.7.0-pre\"\n| #define PACKAGE_BUGREPORT \"https://github.com/libMesh/libmesh/discussions\"\n| #define PACKAGE_URL \"http://libmesh.github.io\"\n| #define CONFIGURE_INFO \"../configure  '--enable-silent-rules' '--enable-unique-id' '--disable-warnings' '--enable-glibcxx-debugging' '--with-thread-model=openmp' '--disable-maintainer-mode' '--enable-metaphysicl-required' '--with-cxx-std-min=2014' '--without-gdb-command' '--with-methods=opt oprof dbg' '--prefix=/home/MOOSE-clang/moose/scripts/../libmesh/installed' '--with-future-timpi-dir=/home/MOOSE-clang/moose/scripts/../libmesh/installed' 'INSTALL=/home/MOOSE-clang/moose/scripts/../libmesh/build-aux/install-sh -C' '--enable-petsc-hypre-required' 'PETSC_DIR=/home/MOOSE-clang/moose/petsc' 'PETSC_ARCH=arch-moose' 'METHODS=opt oprof dbg'\"\n\nI am guessing the compiler libMesh is trying to use is not the same as the one used to build PETSc. This coincides with what the libmesh_diagnostic.log also mentions:\nTue Nov 30 10:35:03 CST 2021\nRUNNING AS ROOT\n\nSystem Arch: CentOS Linux release 7.6.1810 (AltArch)\n\nMOOSE Package Version: Custom Build\n\nCPU Count: 128\n\nMemory Free: 22509.125 MB\n\n$CC not set                   <------------------ THIS SHOULD BE SET\n\nMPICC:\nwhich mpicc:\n\t/path/to/install/ompi/bin/mpicc\nmpicc -show:\n\tclang -I/path/to/install/ompi//include/openmpi -I/path/to/install/ompi//include/openmpi/opal/mca/hwloc/hwloc201/hwloc/include -I/path/to/install/ompi//include/openmpi/opal/mca/event/libevent2022/libevent -I/path/to/install/ompi//include/openmpi/opal/mca/event/libevent2022/libevent/include -I/path/to/install/ompi//include -pthread -Wl,-rpath -Wl,/path/to/install/ompi//lib -Wl,--enable-new-dtags -L/path/to/install/ompi//lib -lmpi\n\nCOMPILER clang:\nBisheng Compiler 1.3.3.b023 clang version 10.0.1 (clang-e31092d4f8cd flang-3c92ea4b404f)\nTarget: aarch64-unknown-linux-gnu\nThread model: posix\nInstalledDir: /opt/compiler/bisheng-compiler-1.3.3-aarch64-linux/bin\n\nI believe libMesh will default to gcc if CC is not set... try exporting the following:\nexport CC=mpicc CXX=mpicxx FC=mpif90\n\nand then run ./update_and_rebuild_libmesh.sh again... If it fails, please attache the new logs again.",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1723238",
                          "updatedAt": "2022-06-23T09:03:46Z",
                          "publishedAt": "2021-11-30T16:13:07Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I see something else as well:\nconftest.c:176:10: fatal error: '/home/MOOSE-clang/moose/petsc/arch-moose/include/petscversion.h' file not found\n#include </home/MOOSE-clang/moose/petsc/arch-moose/include/petscversion.h>\n         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n1 error generated.\n\nDoes this location exist? Its possible you also need to export PETSC_ARCH= to whatever arch- dir is listed in /home/MOOSE-clang/moose/petsc. I have no way of guessing what that might be. If you are unsure, can you provide a directory listing of that location?",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1723260",
                          "updatedAt": "2022-06-23T08:45:04Z",
                          "publishedAt": "2021-11-30T16:19:38Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "wzx-zzsdad"
                          },
                          "bodyText": "I tried export CC=mpicc CXX=mpicxx FC=mpif90 and in the log $CC has set:\n\nbut also failed while installing libmesh.\nlibmesh_diagnostic.log\nconfig.log\nAnd I have set :\nexport PETSC_DIR=/home/MOOSE-clang/moose/petsc\nexport PETSC_ARCH=arch-moose\n\n\nBut definitely there is no petscversion.h in my petsc path. I checked other machine which has installed moose successfully(with gcc-9.1.0 , the same configure parameters and PETSc version 3.13.2), there is no petscversion.h  in  petsc/arch-moose/include path either.",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1726023",
                          "updatedAt": "2022-06-23T08:45:06Z",
                          "publishedAt": "2021-12-01T03:38:33Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "@fdkong When folks build petsc but not install it (not using --prefix), do users need to export PETSC_ARCH? I don't believe that directory exists, since there was nothing being installed.\nStill, I am not sure that is the issue, since it looks like libMesh finds what it needs anyway:\nchecking /home/MOOSE-clang/moose/petsc/arch-moose/include/petscversion.h usability... no\nchecking /home/MOOSE-clang/moose/petsc/arch-moose/include/petscversion.h presence... no\nchecking for /home/MOOSE-clang/moose/petsc/arch-moose/include/petscversion.h... no\nchecking /home/MOOSE-clang/moose/petsc/include/petscversion.h usability... yes\nchecking /home/MOOSE-clang/moose/petsc/include/petscversion.h presence... yes\nchecking for /home/MOOSE-clang/moose/petsc/include/petscversion.h... yes\n\nI am thinking libMesh configure is dying here:\nconfigure:48980: result: <<< Found PETSc 3.13.2 installation in /home/MOOSE-clang/moose/petsc ... >>>\nconfigure:48990: checking whether we can compile a trivial PETSc program\nconfigure:49021: mpicxx -c  -I/home/MOOSE-clang/moose/petsc/include -I/home/MOOSE-clang/moose/petsc/arch-moose/include -I/home/MOOSE-clang/moose/petsc/arch-moose/include -I/home/MOOSE-clang/moose/petsc/include -I/home/MOOSE-clang/moose/petsc/arch-moose/include -I/path/to/install/ompi/include  conftest.cpp >&5\nIn file included from conftest.cpp:146:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petsc.h:5:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petscbag.h:4:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petscsys.h:36:\nIn file included from /home/MOOSE-clang/moose/petsc/include/petscsystypes.h:218:\n/usr/lib/gcc/aarch64-redhat-linux/4.8.5/../../../../include/c++/4.8.5/complex:374:34: error: no matching member function for call to 'imag'\n      complex<_Tp> __r(__x, -__y.imag());\n                             ~~~~^~~~\n\nBut I am not sure why. PETSc seems to have built fine (and tested fine) in the original post.",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1728822",
                          "updatedAt": "2022-06-23T08:45:07Z",
                          "publishedAt": "2021-12-01T14:55:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "fdkong"
                          },
                          "bodyText": "I am confused by several things here @wzx-zzsdad:\n\n\nOriginally, your PETSc was built as PETSC_DIR=/home/MOOSE/moose/petsc PETSC_ARCH=arch-moose \n\n\nBut then you set:\n\n\nexport PETSC_DIR=/home/MOOSE-clang/moose/petsc\nexport PETSC_ARCH=arch-moose\n\nCould you explain a bit more what the motivation here?\nLibmesh error might be because you used (unintentionally) different compilers for libmesh and petsc.\nBTW, if you want to build PETSc, you really should use our in-house script: ./scripts/update_and_rebuild_petsc.sh. If you want to point to a different MPI, you could do ./scripts/update_and_rebuild_petsc.sh --with-mpi-dir=balabala",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1729709",
                          "updatedAt": "2022-06-23T08:45:08Z",
                          "publishedAt": "2021-12-01T17:13:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "wzx-zzsdad"
                          },
                          "bodyText": "Firstly ,I git moose in a new directory so my PETSc path has changed. Secondly, I can use ./scripts/update_and_rebuild_petsc.sh but I need to set --with-openmp=0 in configure_petsc.sh if I use clang not gcc compiler. It will hang when make check  if I directlly run ./scripts/update_and_rebuild_petsc.sh(default: --with-openmp=1) like this:\n\nEven if I use ./scripts/update_and_rebuild_petsc.sh ----with-mpi-dir=/path/to/install/ompi, the installation of libmesh was also failed.\nBTW,I can install moose successfully with gcc compiler, but there is no petscversion.h in arch-moose.",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1736322",
                          "updatedAt": "2022-06-23T08:45:15Z",
                          "publishedAt": "2021-12-02T10:58:37Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "clang and clang++ should work, we use it all the time. But I am concerned about flang... That is, if when using the LLVM toolchain you are indeed using flang. Just so we all know, can you run the following:\nmpif90 -show",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1737561",
                          "updatedAt": "2022-06-23T08:45:16Z",
                          "publishedAt": "2021-12-02T14:42:40Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "wzx-zzsdad"
                          },
                          "bodyText": "",
                          "url": "https://github.com/idaholab/moose/discussions/19491#discussioncomment-1741382",
                          "updatedAt": "2022-06-23T08:45:15Z",
                          "publishedAt": "2021-12-03T02:35:08Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}