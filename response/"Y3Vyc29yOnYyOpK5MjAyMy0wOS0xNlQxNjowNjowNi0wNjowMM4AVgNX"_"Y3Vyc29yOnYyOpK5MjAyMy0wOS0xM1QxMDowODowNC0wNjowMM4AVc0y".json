{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyMy0wOS0xM1QxMDowODowNC0wNjowMM4AVc0y"
    },
    "edges": [
      {
        "node": {
          "title": "Getting an error when I hit make -j2 which says I don't have certain packages but when I try to install those, the can't be found.",
          "author": {
            "login": "GraphicsMonster"
          },
          "bodyText": "Here's everything that happened in the terminal. I am using ubuntu wsl btw.\n`devansh@HP_15s:~/moose/framework$ make -j2\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/libtool: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/libtool: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\nmake: python-config: No such file or directory\nmake: python-config: No such file or directory\nTraceback (most recent call last):\nFile \"/home/devansh/moose/framework/scripts/get_repo_revision.py\", line 19, in \nfrom packaging import version\nModuleNotFoundError: No module named 'packaging'\nChecking if header needs updating: /home/devansh/moose/framework/include/base/MooseRevision.h...\nSymlinking MOOSE configure /home/devansh/moose/framework/build/header_symlinks/MooseConfig.h\nFailed to generate MooseRevision.h\n/bin/sh: 1: /home/devansh/moose/libmesh/installed/contrib/bin/libmesh-config: not found\nmake: *** [/home/devansh/moose/framework/moose.mk:347: /home/devansh/moose/framework/include/base/MooseRevision.h] Error 1\nmake: *** Waiting for unfinished jobs....\ndevansh@HP_15s:/moose/framework$ sudo apt install libmesh\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nE: Unable to locate package libmesh\ndevansh@HP_15s:/moose/framework$ sudo apt install libmes-dev\nReading package lists... Done\nBuilding dependency tree... Done\nReading state information... Done\nE: Unable to locate package libmes-dev\ndevansh@HP_15s:~/moose/framework$`\nAny help will be much appreciated!",
          "url": "https://github.com/idaholab/moose/discussions/25480",
          "updatedAt": "2023-09-16T13:13:20Z",
          "publishedAt": "2023-09-16T11:14:11Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nwe usually get this error when we forget to active the conda environment before building the code\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/25480#discussioncomment-7021217",
                  "updatedAt": "2023-09-16T11:52:10Z",
                  "publishedAt": "2023-09-16T11:52:09Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GraphicsMonster"
                          },
                          "bodyText": "How do I do that? I've just cloned the moose repo and can see a conda directory in it. Do I need to set up conda again for wsl because I already use it natively.\nCan you please break further steps down? Thanks a lot.",
                          "url": "https://github.com/idaholab/moose/discussions/25480#discussioncomment-7021349",
                          "updatedAt": "2023-09-16T12:17:53Z",
                          "publishedAt": "2023-09-16T12:17:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "mamba activate moose\nyou should have mostly followed the Linux instructions at this point, which make you install a conda/mamba environment named moose and that holds the moose dependencies",
                          "url": "https://github.com/idaholab/moose/discussions/25480#discussioncomment-7021572",
                          "updatedAt": "2023-09-16T13:13:21Z",
                          "publishedAt": "2023-09-16T13:13:20Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Can I install MOOSE on Windows 10?",
          "author": {
            "login": "sreejitsarmac"
          },
          "bodyText": "Looking to get started. Is it possible to install the software on my Windows 10 PC?",
          "url": "https://github.com/idaholab/moose/discussions/25434",
          "updatedAt": "2023-09-16T11:51:14Z",
          "publishedAt": "2023-09-09T01:02:57Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nyes you can on windows subsystem for Linux (wsl)\nfollow the Linux install on the website once you have wsl runninh",
                  "url": "https://github.com/idaholab/moose/discussions/25434#discussioncomment-6953333",
                  "updatedAt": "2023-09-09T01:41:39Z",
                  "publishedAt": "2023-09-09T01:41:38Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "Reference:\nhttps://mooseframework.inl.gov/getting_started/installation/windows.html",
                          "url": "https://github.com/idaholab/moose/discussions/25434#discussioncomment-6970122",
                          "updatedAt": "2023-09-11T16:56:04Z",
                          "publishedAt": "2023-09-11T16:56:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GraphicsMonster"
                          },
                          "bodyText": "Hey, I've managed to install and set up vsxsrv but in other guides they want me clone the repo and in this one it's just a few more terminal commands in the ubuntu wsl environment and that got me confused. Which one am I supposed to follow?",
                          "url": "https://github.com/idaholab/moose/discussions/25434#discussioncomment-7020922",
                          "updatedAt": "2023-09-16T10:32:10Z",
                          "publishedAt": "2023-09-16T10:32:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Follow our instructions.\nThey do include cloning the repo inside wsl",
                          "url": "https://github.com/idaholab/moose/discussions/25434#discussioncomment-7021212",
                          "updatedAt": "2023-09-16T11:51:15Z",
                          "publishedAt": "2023-09-16T11:51:14Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "coupled variables not recognized",
          "author": {
            "login": "mdh23rct"
          },
          "bodyText": "Dear MOOSE experts,\nI am solving a phase field problem. I have two different concentration variables (cvm ang cgm). Therefore, I have used corresponding kernels for the residuals of these two different concentration fields, which are coupled. However, the solver is giving warning \"Missing coupled variables {cgm} (add them to coupled_variables parameter of cvm_SplitCHParsed)\", though, I have included coupled_variables = cgm in:\n[Kernels]\n    [./cvm_res]\n      type = SplitCHParsed\n      variable = cvm\n      f_name = F\n      kappa_name = kappa_c\n      w = w\n      coupled_variables = cgm\n    [../]\n[]\n\nWould you be kind to let me know, why this warning is appearing! Am I missing something! I have attached the file here. Thanks for your time.\n[Mesh]\n    type = GeneratedMesh\n    dim = 2\n    nx = 10\n    ny = 10\n    xmax = 500\n    ymax = 500\n    elem_type = QUAD\n  []\n  \n  [Modules]\n    [./PhaseField]\n      [./Conserved]\n        [./cvm]\n          free_energy = F\n          mobility = M\n          kappa = kappa_c\n          solve_type = REVERSE_SPLIT\n        [../]\n      [../]\n    [../]\n    [./PhaseField]\n      [./Conserved]\n        [./cgm]\n          free_energy = F\n          mobility = M\n          kappa = kappa_c\n          solve_type = REVERSE_SPLIT\n        [../]\n      [../]\n    [../]\n  []\n\n [Variables]\n    [./w]\n      order = FIRST\n     family = LAGRANGE\n    [../]\n  []\n  \n  [ICs]\n    [./cvm_IC]\n      type = ConstantIC\n      variable = cvm\n      value = 4.25e-11\n    [../]\n    [./cgm_IC]\n      type = ConstantIC\n      variable = cgm\n      value = 1.01e-30\n    [../]\n  []\n  \n  [Materials]\n    [./chemical_free_energy_vacancies]\n      # simple double well free energy matrix\n      type = DerivativeParsedMaterial\n      property_name = Fc\n      coupled_variables = 'cvm cgm'\n      material_property_names = 'kvmatrix kgmatrix cvmatrixeq cgmatrixeq'\n      expression = '0.5*kvmatrix*(cvm-cvmatrixeq)^2 + 0.5*kgmatrix*(cgm-cgmatrixeq)^2'\n      derivative_order = 2\n      outputs = exodus\n    [../]\n    # constant properties\n    [./constants]\n      type = GenericConstantMaterial\n      prop_names  = 'M   kappa_c  kvmatrix  kgmatrix  T'\n      prop_values = '0.7 0.0368  223.16    223.16   800'\n    [../]\n    [./cvmatrixeq]\n      type = ParsedMaterial\n      property_name = cvmatrixeq\n      material_property_names = 'T'\n      constant_names        = 'kB           Efv'\n      constant_expressions  = '8.6173324e-5 1.69'\n      expression = 'exp(-Efv/(kB*T))'\n    [../]\n    [./cgmatrixeq]\n      type = ParsedMaterial\n      property_name = cgmatrixeq\n      material_property_names = 'T'\n      constant_names        = 'kB           Efg'\n      constant_expressions  = '8.6173324e-5 4.92'\n      expression = 'exp(-Efg/(kB*T))'\n    [../]\n    [./probability]\n      # This is a made up toy nucleation rate it should be replaced by\n      # classical nucleation theory in a real simulation.\n      type = ParsedMaterial\n      property_name = P\n      coupled_variables = 'cvm cgm'\n      expression = 'if(cvm<2.27e-11,cvm*1e-1,0)-if(cgm<3.8e-32,cgm*1e-1,0)'\n      outputs = exodus\n    [../]\n    [./nucleation]\n      # The nucleation material is configured to insert nuclei into the free energy\n      # tht force the concentration to go to 0.95, and holds this enforcement for 500\n      # time units.\n      type = DiscreteNucleation\n      property_name = Fn\n      op_names  = 'cvm cgm'\n      op_values = '0.7286 0.2714'\n      penalty = 5\n      penalty_mode = MIN\n      map = map\n      outputs = exodus\n    [../]\n    [./free_energy]\n      # add the chemical and nucleation free energy contributions together\n      type = DerivativeSumMaterial\n      property_name = F\n      derivative_order = 2\n      coupled_variables = 'cvm cgm'\n      sum_materials = 'Fc Fn'\n    [../]\n  []\n\n  [Kernels]\n    [./cvm_res]\n      type = SplitCHParsed\n      variable = cvm\n      f_name = F\n      kappa_name = kappa_c\n      w = w\n      coupled_variables = cgm\n    [../]\n    [./cvm_w_res]\n      type = SimpleSplitCHWRes\n      variable = w\n      mob_name = M\n    [../]\n    [./cvm_time]\n      type = CoupledTimeDerivative\n      variable = w\n      v = cvm\n    [../]\n    [./cgm_res]\n      type = SplitCHParsed\n      variable = cgm\n      f_name = F\n      kappa_name = kappa_c\n      w = w\n      coupled_variables = cvm\n    [../]\n    [./cgm_w_res]\n      type = SimpleSplitCHWRes\n      variable = w\n      mob_name = M\n    [../]\n    [./cgm_time]\n      type = CoupledTimeDerivative\n      variable = w\n      v = cgm\n    [../]\n  []\n\n  [UserObjects]\n    [./inserter]\n      # The inserter runs at the end of each time step to add nucleation events\n      # that happened during the timestep (if it converged) to the list of nuclei\n      type = DiscreteNucleationInserter\n      hold_time = 50\n      probability = P\n      radius = 10\n    [../]\n    [./map]\n      # The map UO runs at the beginning of a timestep and generates a per-element/qp\n      # map of nucleus locations. The map is only regenerated if the mesh changed or\n      # the list of nuclei was modified.\n      # The map converts the nucleation points into finite area objects with a given radius.\n      type = DiscreteNucleationMap\n      periodic = cvm\n      inserter = inserter\n    [../]\n  []\n  \n  [Preconditioning]\n    [./SMP]\n      type = SMP\n      full = true\n    [../]\n  []\n  \n  [BCs]\n    [./Periodic]\n      [./all]\n        auto_direction = 'x y'\n      [../]\n    [../]\n  []\n  \n  [Postprocessors]\n    [./dt]\n      type = TimestepSize\n    [../]\n    [./ndof]\n      type = NumDOFs\n    [../]\n    [./rate]\n      type = DiscreteNucleationData\n      value = RATE\n      inserter = inserter\n    [../]\n    [./dtnuc]\n      type = DiscreteNucleationTimeStep\n      inserter = inserter\n      p2nucleus = 0.0005\n      dt_max = 10\n    [../]\n    [./update]\n      type = DiscreteNucleationData\n      value = UPDATE\n      inserter = inserter\n    [../]\n    [./count]\n      type = DiscreteNucleationData\n      value = COUNT\n      inserter = inserter\n    [../]\n  []\n  \n  [Adaptivity]\n    [./Indicators]\n      [./jump]\n        type = GradientJumpIndicator\n        variable = cvm\n      [../]\n    [../]\n    [./Markers]\n      [./nuc]\n        type = DiscreteNucleationMarker\n        map = map\n      [../]\n      [./grad]\n        type = ValueThresholdMarker\n        variable = jump\n        coarsen = 0.1\n        refine = 0.2\n      [../]\n      [./combo]\n        type = ComboMarker\n        markers = 'nuc grad'\n      [../]\n    [../]\n    marker = combo\n    cycles_per_step = 3\n    recompute_markers_during_cycles = true\n    max_h_level = 3\n  []\n  \n  [Executioner]\n    type = Transient\n    scheme = bdf2\n    solve_type = 'PJFNK'\n    petsc_options_iname = '-pc_type -sub_pc_type'\n    petsc_options_value = 'asm      lu          '\n  \n    nl_max_its = 100\n    l_tol = 1.0e-4\n    nl_rel_tol = 1.0e-9\n    nl_abs_tol = 1.0e-9\n    start_time = 0.0\n    end_time = 2000\n  \n    [./TimeStepper]\n      type = IterationAdaptiveDT\n      dt = 10\n      growth_factor = 1.5\n      cutback_factor = 0.5\n      optimal_iterations = 8\n      iteration_window = 2\n      timestep_limiting_postprocessor = dtnuc\n    [../]\n  []\n  \n  [Outputs]\n    exodus = true\n    csv = true\n    print_linear_residuals = false\n  []",
          "url": "https://github.com/idaholab/moose/discussions/25476",
          "updatedAt": "2023-09-16T01:50:52Z",
          "publishedAt": "2023-09-15T21:20:02Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nI checked the code, it's the warning logic that is flawed.\nYou should be fine with the parameters I set.\nI ll create an issue\nEDIT: #25479\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/25476#discussioncomment-7019265",
                  "updatedAt": "2023-09-16T01:58:02Z",
                  "publishedAt": "2023-09-16T01:50:51Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Geometry optimizaton",
          "author": {
            "login": "am-tc01"
          },
          "bodyText": "Hi,\nI'm working on a problem where I need to optimize the geometry i.e. I need to generate a new mesh on every Forward call from the Optimize Multiapp based on the optimization parameters. If I have understood correctly, as of now, the mesh is generated only once, at the start of the problem, and can't be re-created. I tried to use the reset_apps option in FullSolveMultiApp but following a previous discussion, and also in my experience, that doesn't seem to work. Is there any other way to re-generate the mesh at every Forward call?\nThanks!",
          "url": "https://github.com/idaholab/moose/discussions/25471",
          "updatedAt": "2023-09-15T19:21:32Z",
          "publishedAt": "2023-09-15T12:25:03Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "lindsayad"
                  },
                  "bodyText": "Do you want to make meshes with different numbers of elements and/or nodes? If not you could displace the nodes to reproduce the mesh you want",
                  "url": "https://github.com/idaholab/moose/discussions/25471#discussioncomment-7016069",
                  "updatedAt": "2023-09-15T16:16:33Z",
                  "publishedAt": "2023-09-15T16:16:32Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "am-tc01"
                          },
                          "bodyText": "I actually want to regenerate the entire mesh that has different numbers of elements and nodes.",
                          "url": "https://github.com/idaholab/moose/discussions/25471#discussioncomment-7016721",
                          "updatedAt": "2023-09-15T17:37:07Z",
                          "publishedAt": "2023-09-15T17:37:07Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "What's the \"driver\" of the optimization algorithm? Is it the moose optimization module or something else?",
                          "url": "https://github.com/idaholab/moose/discussions/25471#discussioncomment-7017175",
                          "updatedAt": "2023-09-15T18:37:19Z",
                          "publishedAt": "2023-09-15T18:37:18Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "am-tc01"
                          },
                          "bodyText": "It is the moose optimization module.",
                          "url": "https://github.com/idaholab/moose/discussions/25471#discussioncomment-7017377",
                          "updatedAt": "2023-09-15T19:09:04Z",
                          "publishedAt": "2023-09-15T19:09:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lynnmunday"
                          },
                          "bodyText": "This won't do what you are wanting with a new mesh but you might find it useful, @maxnezdyur  has a PR for shape optimization:  #24934 (comment)\nHe added a shape optimization test to that commit: modules/optimization/test/tests/executioners/constrained/shape_optimization/forward.i\nIt moves the mesh around with a diffusion problem.",
                          "url": "https://github.com/idaholab/moose/discussions/25471#discussioncomment-7017489",
                          "updatedAt": "2023-09-15T19:21:33Z",
                          "publishedAt": "2023-09-15T19:21:31Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Implementing divergence term in coupled variable",
          "author": {
            "login": "vermaprk"
          },
          "bodyText": "Hello\nI am trying to write the return expression for computeQpResidual()\nMy expression is: \u2207.(\u2207\u03c6 c) \nwhere c is the variable and \u03c6 is the coupled variable. Please verify whether I can write this as\nMy expression expands to:\n\u2207\u03c6.\u2207c + c \u2207.\u2207\u03c6 \n_grad_phi[_qp] * _u[_qp] * _grad_test[_i][_qp]  + 2nd term\nThe 2nd term has divergence of gradient of coupled variable. How, do I implement this:\nThanks",
          "url": "https://github.com/idaholab/moose/discussions/25448",
          "updatedAt": "2023-09-15T18:22:59Z",
          "publishedAt": "2023-09-13T13:36:14Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nOn a term like this we typically use an integration by parts of the product of the term by the test function, rather than expand.\nWe simply do not want to represent \u2207.\u2207\u03c6 in the finite element problem, as you need a second order basis to make that non-zero\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-6990644",
                  "updatedAt": "2023-09-13T13:50:18Z",
                  "publishedAt": "2023-09-13T13:50:17Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "vermaprk"
                          },
                          "bodyText": "Integration by parts followed by divergence results in weak form as:\n(\u2207\u03a8,c\u2207\u03c6) - <\u03a8, c\u2207\u03c6 . n> (please verify)\nBut, this results in coupled variable in boundary condition.\nThanks",
                          "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-6991570",
                          "updatedAt": "2023-09-13T15:04:56Z",
                          "publishedAt": "2023-09-13T15:04:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "But, this results in coupled variable in boundary condition.\n\nThat s not a problem, you can create a new one or just use Neumann if you know the flux",
                          "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-6991844",
                          "updatedAt": "2023-09-13T15:22:47Z",
                          "publishedAt": "2023-09-13T15:22:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "vermaprk"
                          },
                          "bodyText": "ok. Thanks Will trouble you again in writing the jacobians",
                          "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-6992260",
                          "updatedAt": "2023-09-13T15:55:49Z",
                          "publishedAt": "2023-09-13T15:55:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "use automatic differentiation (AD) to avoid having to do that manually",
                          "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-6992508",
                          "updatedAt": "2023-09-13T16:18:27Z",
                          "publishedAt": "2023-09-13T16:18:27Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "vermaprk"
                  },
                  "bodyText": "Integration by parts followed by divergence results in weak form as: (\u2207\u03a8,c\u2207\u03c6) - <\u03a8, c\u2207\u03c6 . n> (please verify) But, this results in coupled variable in boundary condition. Thanks\nPlease check the maths:\n\n\u2207.(\u03a8(c\u2207\u03c6)) = \u03a8\u2207.(c\u2207\u03c6) + c\u2207\u03c6.\u2207\u03a8\n\u03a8\u2207.(c\u2207\u03c6) = \u2207.(\u03a8(c\u2207\u03c6)) - c\u2207\u03c6.\u2207\u03a8\ntaking volume integral and using divergence theorem\n-int (\u03a8\u2207.(c\u2207\u03c6)) dV = -int (\u03a8(c\u2207\u03c6.n))dS + int( c\u2207\u03c6.\u2207\u03a8) dv\nweak form.              =  - <\u03a8, c\u2207\u03c6 . n>      +  (\u2207\u03a8,c\u2207\u03c6) \n\nkernel coded as:\n{\n  return   _grad_test[_i][_qp] * _u[_qp] * _grad_phi[_qp];\n}\n\nHowever, I have found a different math used in code at:\nhttps://github.com/anilkunwar/danphe/blob/working_codes/src/kernel/NernstPlanckConvection.C\nline 63\n{\nreturn ion_velocity * _grad_u[_qp] * _test[_i][_qp];\n}\n\nHere grad of _u[_qp] is taken instead of the test function.\nThanks",
                  "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-6999577",
                  "updatedAt": "2023-09-14T09:27:16Z",
                  "publishedAt": "2023-09-14T09:27:15Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "vermaprk"
                          },
                          "bodyText": "@GiudGiud",
                          "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-7010049",
                          "updatedAt": "2023-09-15T05:48:47Z",
                          "publishedAt": "2023-09-15T05:48:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Hello\nThat kernel you linked to is a convection term, it does not look like a diffusion term\nIf you look at a diffusion kernel you ll see what it should look like\nhttps://github.com/idaholab/moose/blob/next/framework/src/kernels/Diffusion.C\nwhich btw your diffusion term seems atypical? div c grad phi would mean that phi is the variable being diffused and c is the diffusivity?\nOr am I missing something\nthe problem in the code you wrote is that 'grad_phi' corresponds to the gradient of the trial function.\nIt's not the gradient of the coupled variable. You need to do in your constructor:\n... (rest of initialization list),\ngrad_coupled_var(coupledGradient(\" parameter name for that coupled variable \")\n\nand in the parameters you must have \"variable = c\" to make sure that _u corresponds to c.\nThen you can use for the residual:\nADReal\ncomputeQpResidual\n{\n  return   _grad_test[_i][_qp] * _u[_qp] * _grad_coupled_var[_qp];\n}",
                          "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-7013227",
                          "updatedAt": "2023-09-15T11:50:18Z",
                          "publishedAt": "2023-09-15T11:50:17Z",
                          "isAnswer": true
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "vermaprk"
                          },
                          "bodyText": "Yes, I have done the same thing but what I missed was that \"phi is reserved for trial function\". My coupled variable was also named as phi and the gradient of coupled variable was _grad_phi. However, I have benchmarked the results with phi being used as coupled variables with comsol. May be I have overwritten the trial function with my coupled variable.\nI think its better to used some other name than phi.\nThanks",
                          "url": "https://github.com/idaholab/moose/discussions/25448#discussioncomment-7016302",
                          "updatedAt": "2023-09-15T16:46:22Z",
                          "publishedAt": "2023-09-15T16:46:21Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "I would like to know what the units in peacock are",
          "author": {
            "login": "lei123abc"
          },
          "bodyText": "Reason\n\nDesign\n\nImpact",
          "url": "https://github.com/idaholab/moose/discussions/25459",
          "updatedAt": "2023-09-15T03:21:13Z",
          "publishedAt": "2023-09-14T02:28:25Z",
          "category": {
            "name": "Q&A Tools"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "dschwen"
                  },
                  "bodyText": "There are no intrinsic units. They are whatever your input dictates and what you decide your parameter units are. If your diffusion coefficient is in m^2/s then your length units will be m and your time units will be s.",
                  "url": "https://github.com/idaholab/moose/discussions/25459#discussioncomment-6996993",
                  "updatedAt": "2023-09-14T03:30:25Z",
                  "publishedAt": "2023-09-14T03:30:25Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "lei123abc"
                          },
                          "bodyText": "I got it,thank you for your answer.",
                          "url": "https://github.com/idaholab/moose/discussions/25459#discussioncomment-6997110",
                          "updatedAt": "2023-09-14T04:00:30Z",
                          "publishedAt": "2023-09-14T04:00:29Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "the main item that determines the units to use is usually the units that you used to make your mesh.\nEverything has to be consistent with your mesh",
                          "url": "https://github.com/idaholab/moose/discussions/25459#discussioncomment-7001477",
                          "updatedAt": "2023-09-14T13:00:29Z",
                          "publishedAt": "2023-09-14T13:00:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lei123abc"
                          },
                          "bodyText": "I'm a little confused now, does it depend on the units of my mesh or the units of the input file? For example, the mesh uses millimeter units, but the input file uses m. After the moose calculation is completed, is the displacement mm or m?",
                          "url": "https://github.com/idaholab/moose/discussions/25459#discussioncomment-7008989",
                          "updatedAt": "2023-09-15T02:42:54Z",
                          "publishedAt": "2023-09-15T02:42:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "they both need to be consistent. You cannot have the mesh in mm and the input in m. You can scale back your mesh to meters using the TransformGenerator btw.",
                          "url": "https://github.com/idaholab/moose/discussions/25459#discussioncomment-7009089",
                          "updatedAt": "2023-09-15T03:06:49Z",
                          "publishedAt": "2023-09-15T03:06:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lei123abc"
                          },
                          "bodyText": "OK,thank you.I'll try.",
                          "url": "https://github.com/idaholab/moose/discussions/25459#discussioncomment-7009140",
                          "updatedAt": "2023-09-15T03:21:14Z",
                          "publishedAt": "2023-09-15T03:21:13Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "libmesh_opt.so: undefined reference to \u2018TIMPI:: ...\u2019",
          "author": {
            "login": "lipxisi"
          },
          "bodyText": "Holle\nWhen I bulid libmesh, three functions were not found\n/usr/bin/ld: ./.libs/libmesh_opt.so: undefined reference to TIMPI::Communicator::Communicator(int const&)' /usr/bin/ld: ./.libs/libmesh_opt.so: undefined reference to TIMPI::TIMPIInit::TIMPIInit(int, char const* const*, bool, bool, int)'\n/usr/bin/ld: ./.libs/libmesh_opt.so: undefined reference to `TIMPI::Request::Request(int const&)'\ncollect2: error: ld returned 1 exit status\nWhen I use ldd-r to show the dependency of libmesh_opt, three are undefinded\nundefined symbol: _ZN5TIMPI12CommunicatorC2ERKi    (.libs/libmesh_opt.so)\nundefined symbol: _ZN5TIMPI7RequestC1ERKi    (.libs/libmesh_opt.so)\nundefined symbol: _ZN5TIMPI9TIMPIInitC1EiPKPKcbbi    (.libs/libmesh_opt.so)\nWhich library might lead to the problem,and how do I find out what the problem is.\nThank you very much for your suggestions and answers.",
          "url": "https://github.com/idaholab/moose/discussions/25462",
          "updatedAt": "2023-09-14T14:17:18Z",
          "publishedAt": "2023-09-14T13:58:41Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "It would seem to me that perhaps some of libMesh's contribs were not updated (a submodule update within libmesh).",
                  "url": "https://github.com/idaholab/moose/discussions/25462#discussioncomment-7002365",
                  "updatedAt": "2023-09-14T14:17:19Z",
                  "publishedAt": "2023-09-14T14:17:18Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "How to make computation faster",
          "author": {
            "login": "pshen20127"
          },
          "bodyText": "Hello All\nI wrote some codes in .C files based on source codes in the directory  /home/pshen/Mercury2/Projects/moose/modules/tensor_mechanics/src/materials/crystal_plasticity/ and made corresponding header files in /home/pshen/Mercury2/Projects/moose/modules/tensor_mechanics/include/materials/crystal_plasticity/. I actually just created some new variables, made them can be output. These variables don't influence the calculation of previous codes. But that change makes computation very slow and can't converge when the load goes after 5% of strain. Do you know how to improve it, make it faster and converge? Below is my codes and input files: https://github.com/pshen20127/Test.git\nThanks\nPshen",
          "url": "https://github.com/idaholab/moose/discussions/25338",
          "updatedAt": "2023-09-13T17:40:50Z",
          "publishedAt": "2023-08-29T17:55:36Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nCan you please profile so we have an idea what's slow?\nhttps://mooseframework.inl.gov/application_development/profiling.html\nAlso do you have the console log for a simulation? To get more insights on the cost drivers\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/25338#discussioncomment-6857240",
                  "updatedAt": "2023-08-29T20:12:49Z",
                  "publishedAt": "2023-08-29T20:12:48Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "sapitts"
                  },
                  "bodyText": "In addition to the profiling Guillaume suggested (which I suspect will in part point to the Rank2tensor operations you've added for output purposes), you may also need to loosen the tolerances within the crystal plasticity model as well. I'd recommend going back to the original CrystalPlasticityKalidindiUpdate class, with the new material properties you have in your input file, and explore the impact of slightly loosening the following tolerances:\n\nslip_increment_tolerance: the tolerance for the slip increment on each slip system. If you expect your system to have a lot of plastic deformation, the default value might be too small\nresistance_tol: the slip system resistance tolerance, for each individual slip system. If your system experiences a lot of hardening as plastic deformation occurs, you may need to increase this tolerance value\n\nThe impact of the rtol value (the tolerance for the stress residual delta to declare the stress state for the timestep as converged) within ComputeMultipleCrystalPlasticityStress may also need to be adjusted, but I would start with the two tolerance values listed above first.\nHope this helps,\nStephanie",
                  "url": "https://github.com/idaholab/moose/discussions/25338#discussioncomment-6857455",
                  "updatedAt": "2023-08-29T20:50:11Z",
                  "publishedAt": "2023-08-29T20:50:10Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "pshen20127"
                          },
                          "bodyText": "Sorry for just noticing your message. Are slip_increment_tolerance and resistance_tol what you said as the picture below? Do you know where these 2 variables are defined and could you please recommend 2 loose values for 2 variables?",
                          "url": "https://github.com/idaholab/moose/discussions/25338#discussioncomment-6985128",
                          "updatedAt": "2023-09-13T03:08:27Z",
                          "publishedAt": "2023-09-13T03:08:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "sapitts"
                          },
                          "bodyText": "Yes, the _slip_incr_tol variable corresponds to the slip_increment_tolerance input file parameter, and the variable _resistance_tol corresponds to the resistance_tol input file parameter. Both input file parameters are defined in the CrystalPlasticityStressUpdateBase class.\nDepending on the hardening behavior of your system (please see the discussion in my first post), I would recommend changing one, but not both, of the tolerance values by up-to an order-of-magnitude to see if that allows the system to converge (e.g. change the resistance_tol from the default 0.01 to 0.1). If this change allows the simulation to converge, then I would then try to tighten the tolerance back to 0.05 or 0.025. I do recommend completing this testing with the original Kalidindi model: the extra output Rank2tensors in your classes will make the simulation run slowly.\nPerforming the profiling that @GiudGiud recommended is also a good step to identify where your simulation is being slowed down.",
                          "url": "https://github.com/idaholab/moose/discussions/25338#discussioncomment-6992906",
                          "updatedAt": "2023-09-13T16:58:09Z",
                          "publishedAt": "2023-09-13T16:58:08Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "pshen20127"
                          },
                          "bodyText": "I will try, thank you so much.",
                          "url": "https://github.com/idaholab/moose/discussions/25338#discussioncomment-6993298",
                          "updatedAt": "2023-09-13T17:40:51Z",
                          "publishedAt": "2023-09-13T17:40:50Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Combining meshes",
          "author": {
            "login": "sinaomrani96"
          },
          "bodyText": "Hi,\nHope you are well.\nI was wondering if there is a way to combine two meshes in which we can keep the blocks in one of them and elements from other one. Assuming that both of them are identical. Thanks.",
          "url": "https://github.com/idaholab/moose/discussions/25430",
          "updatedAt": "2023-09-13T16:20:13Z",
          "publishedAt": "2023-09-08T14:06:17Z",
          "category": {
            "name": "Q&A Meshing"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nso you want only the elements from one of the meshes? But use the subdomain names from the other?\ni feel like using the combinerGenerator, the renameSubdomainGenerator and the blockDeletionGenerator (once to remove and once to add elements to a domain) you can make that work.",
                  "url": "https://github.com/idaholab/moose/discussions/25430#discussioncomment-6948917",
                  "updatedAt": "2023-09-08T14:10:48Z",
                  "publishedAt": "2023-09-08T14:10:47Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "sinaomrani96"
                          },
                          "bodyText": "Thank you @GiudGiud, that gives me some ideas. On another note, is there a way to do adaptivity on a mesh that refines around blocks interfaces and coarsen anywhere else? I am trying this and only get the refinement around the subdomains but the coarsening on the domain do not work.",
                          "url": "https://github.com/idaholab/moose/discussions/25430#discussioncomment-6949572",
                          "updatedAt": "2023-09-08T15:12:32Z",
                          "publishedAt": "2023-09-08T15:12:32Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "We can refine on interfaces using boundary markers for example.\nwe can only coarsen what has been previously refined. So if you generate a very coarse mesh you can refine it once at the beginning then coarsen again for regions that don\u2019t need the refinement",
                          "url": "https://github.com/idaholab/moose/discussions/25430#discussioncomment-6949976",
                          "updatedAt": "2023-09-08T15:54:25Z",
                          "publishedAt": "2023-09-08T15:54:24Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "sinaomrani96"
                          },
                          "bodyText": "Hi @GiudGiud,\nAs you mentioned we only can coarsen what has been previously refined, I was wondering if we can remesh a mesh. The issue is that I have an image and to capture its features I need to match the number of pixels with the elements using GeneratedMeshGenerator and ImageSubdomainGenerator. However, this leads to computationally expensive problem and I want to use adaptivity to refine only around blocks and boundaries. I followed your suggestion of using blockDeletionGenerator but I need to remesh it first and then refine the boundaries. I was wondering if you have any suggestions. Thanks.",
                          "url": "https://github.com/idaholab/moose/discussions/25430#discussioncomment-6965904",
                          "updatedAt": "2023-09-11T10:03:57Z",
                          "publishedAt": "2023-09-11T10:03:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Hello\nif you delete an entire volume you can remesh that volume using the XYDelaunayMG in 2D\nYou can also probably use external software like cubit to import the mesh and remesh parts of it\nGuillaume",
                          "url": "https://github.com/idaholab/moose/discussions/25430#discussioncomment-6966367",
                          "updatedAt": "2023-09-11T10:58:55Z",
                          "publishedAt": "2023-09-11T10:58:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "sinaomrani96"
                          },
                          "bodyText": "Dear @GiudGiud,\nThanks for the help. Sorry to ask too many questions, but I was wondering if there is a way to control the minimum element size after adaptivity. I do not know the calculation behind it, and would like to know how I can control the minimum element size based on initial number of elements, initial_steps, and max_h_level etc. Thanks.",
                          "url": "https://github.com/idaholab/moose/discussions/25430#discussioncomment-6992211",
                          "updatedAt": "2023-09-13T15:49:44Z",
                          "publishedAt": "2023-09-13T15:49:24Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "You can bake that criterion inside a custom indicator or a custom marker",
                          "url": "https://github.com/idaholab/moose/discussions/25430#discussioncomment-6992535",
                          "updatedAt": "2023-09-13T16:20:14Z",
                          "publishedAt": "2023-09-13T16:20:13Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Thermal-Hydraulics model problem: using the iteration algorithm to calculate Tw",
          "author": {
            "login": "SomnusYu"
          },
          "bodyText": "Hi all,\nI would like to use the Wolf-McCarthy correlation to calculate Tw by giving a constant wall heat flux in ThermalHydraulic model. The way is using this formula: Tw = qw / Hw + Tf.\nBut the Wolf-McCarthy correlation needs Tw to calculate Hw. So both Tw and Hw are unknown. Therefore, I need to use the iteration algorithm to calculate this.\nI changed the function in ADWallHeatTransferCoefficientWolfMcCarthyMaterial.C like this:\nvoid\nADWallHeatTransferCoefficientWolfMcCarthyMaterial::computeQpProperties()\n{\n  ADReal qw = 1.0e5; // given value\n  ADReal deta_Tw = 10.0; // just give an initial value\n  ADReal Tw_init = 500.0; // just give an initial value\n  ADReal Tw_itera;\n  ADReal Tw_calc = Tw_init;\n  ADReal Pr;\n  ADReal Re;\n  ADReal Nu;\n  while(deta_Tw > 0.01)\n  {\n    \n    Tw_itera = Tw_calc;\n    Pr = THM::Prandtl(_cp[_qp], _mu[_qp], _k[_qp]);\n    Re = std::max(1.0, THM::Reynolds(1., _rho[_qp], _vel[_qp], _D_h[_qp], _mu[_qp]));\n    Nu = 0.025 * std::pow(Re, 0.8) * std::pow(Pr, 0.4) *\n                std::pow(std::max(_T[_qp], Tw_itera) / _T[_qp], -0.55);\n    _Hw[_qp] = THM::wallHeatTransferCoefficient(Nu, _k[_qp], _D_h[_qp]);\n    \n    Tw_calc = qw / _Hw[_qp] + _T[_qp];\n\n    deta_Tw = std::abs(Tw_itera - Tw_calc);\n  }\n\n  _T_wall[_qp] = Tw_calc;\n}\n\nBut when I run the case, It is always in the state of \"Performing Initial Setup...\".\n\nWhat is the problem? Could anyone kindly tell me?\nBest regards!",
          "url": "https://github.com/idaholab/moose/discussions/25447",
          "updatedAt": "2023-09-13T17:03:42Z",
          "publishedAt": "2023-09-13T11:24:09Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYour algorithm is not converging and you're stuck in an infinite loop would be my guess.\nYou should:\n\nprint the values or use a debugger to see what is going on in the loop\nconsider using Newton's method instead of Picard as it converges faster\n\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/25447#discussioncomment-6990666",
                  "updatedAt": "2023-09-13T13:52:03Z",
                  "publishedAt": "2023-09-13T13:52:02Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "SomnusYu"
                          },
                          "bodyText": "Thank you for your suggestions.\nI have fixed this problem. The problem is that I give the wrong boundary condition.\nBy the way, what Newton's method should be in this example?\nThank you very much!",
                          "url": "https://github.com/idaholab/moose/discussions/25447#discussioncomment-6991955",
                          "updatedAt": "2023-09-13T15:27:53Z",
                          "publishedAt": "2023-09-13T15:27:52Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Newton-Raphson ?\nThe basic one for solving f(x) = 0",
                          "url": "https://github.com/idaholab/moose/discussions/25447#discussioncomment-6992026",
                          "updatedAt": "2023-09-13T15:32:56Z",
                          "publishedAt": "2023-09-13T15:32:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "SomnusYu"
                          },
                          "bodyText": "I will have a try. Thank you very much!",
                          "url": "https://github.com/idaholab/moose/discussions/25447#discussioncomment-6992400",
                          "updatedAt": "2023-09-13T16:08:05Z",
                          "publishedAt": "2023-09-13T16:08:04Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}