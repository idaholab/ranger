{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyMi0xMC0yNFQwNjo0NzozMS0wNjowMM4ARJyN"
    },
    "edges": [
      {
        "node": {
          "title": "Hypre Boomerang Simulation freezes",
          "author": {
            "login": "Edward-Eth"
          },
          "bodyText": "I've recently encountered an issue while using Hypre Boomerang as my petsc options, similar to Q+A #17058 but not exactly the same.\nIn that thread the user found that removing the Chebyshev relaxation they resolved their issue, however my HYPRE options were just:\nline_search = 'none'\npetsc_options = '-snes_ksp_ew'\npetsc_options_iname = '-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter'\npetsc_options_value = '2001                hypre    boomeramg      20'\n\nWhich was causing hang-ups/freezes during nonlinear/linear iterations (it would print a nonlinear iteration then just stop, so maybe on the transition from NL to L?) but often not until an hour or more into the simulation. Running top on the nodes involved in the job would reveal that while their CPU usage was still maxed out, they were no longer using any memory at all. I don't believe memory was the issue, as I was only running around 2000 local NL DOFs so there was not much information being stored on each node.\nI'm not very familiar with debugging at all, and fear that given it takes about an hour to fail on opt mode it would take a very long time to reach failure in debug. However, I believe the issue was hypre boomeramg as a run on petsc ilu with the following options:\nline_search = 'default'\npetsc_options_iname = '-pc_type  -snes_linesearch_type -pc_factor_shift_type -snes_max_it -ksp_max_it'\npetsc_options_value = 'ilu        basic                 NONZERO               20           40'\n\nHas just lasted several hours without issue.\nInterestingly, I also find that disabling distributed mesh while still using HYPRE BOOMERANG also fixes the freezing issue, so I'm not sure what the correlation there is.",
          "url": "https://github.com/idaholab/moose/discussions/22367",
          "updatedAt": "2022-11-15T19:20:06Z",
          "publishedAt": "2022-10-11T13:09:20Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nDo you not get any live print?\nCan you turn on the linear residual printing? The max linear iterations is 10k so that can feel like a freeze\nIn Outputs: print_linear_residual = true\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22367#discussioncomment-3850980",
                  "updatedAt": "2022-10-11T14:05:07Z",
                  "publishedAt": "2022-10-11T14:05:06Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "Linear residual printing is on, the simulation normally takes about 20 seconds for a timestep but will freeze indefinitely (I've tried waiting multiple hours) after printing a nonlinear iteration.",
                          "url": "https://github.com/idaholab/moose/discussions/22367#discussioncomment-3851232",
                          "updatedAt": "2022-10-11T14:31:41Z",
                          "publishedAt": "2022-10-11T14:31:41Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "can you please paste the input file here?",
                          "url": "https://github.com/idaholab/moose/discussions/22367#discussioncomment-3851265",
                          "updatedAt": "2022-10-11T14:35:58Z",
                          "publishedAt": "2022-10-11T14:35:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "I've been attempting to make an MWE, will post if I manage to make one that's simple/doesn't contain any information.",
                          "url": "https://github.com/idaholab/moose/discussions/22367#discussioncomment-3851672",
                          "updatedAt": "2022-10-11T15:08:40Z",
                          "publishedAt": "2022-10-11T15:08:40Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Any update on this?",
                          "url": "https://github.com/idaholab/moose/discussions/22367#discussioncomment-3937893",
                          "updatedAt": "2022-10-22T00:01:55Z",
                          "publishedAt": "2022-10-22T00:01:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Edward-Eth"
                          },
                          "bodyText": "So I've not been able to make an MWE that I'm able to share here, but I managed to \"resolve\" the issue by totally removing the petsc_options, petsc_options_iname, petsc_options_value lines. I'm not sure what petsc options this means I'm now running? I was also observing freezes when using HMG as my -pc_type",
                          "url": "https://github.com/idaholab/moose/discussions/22367#discussioncomment-3983628",
                          "updatedAt": "2022-10-27T15:59:04Z",
                          "publishedAt": "2022-10-27T15:59:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "ILU in serial, block Jacobi with ILU on the sub-blocks in parallel.\nYou can always run with the PETSc option -snes_view which will show all the information about your nonlinear solution algorithm in PETSC including the linear solution algorithm, or you can pass -ksp_view to just get info about the linear solve (although you'll get a printout for every linear solve)",
                          "url": "https://github.com/idaholab/moose/discussions/22367#discussioncomment-3986929",
                          "updatedAt": "2022-10-27T23:02:31Z",
                          "publishedAt": "2022-10-27T23:02:31Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Nonlinear solve did not converge",
          "author": {
            "login": "Ethan-xj"
          },
          "bodyText": "Hi, I run a steady case. But the nonlinear solve did not converge.\nHere is my input file:\n[GlobalParams]\n  gravity = -9.8\n  transient_term = false\n  lk = 1\n  sk = 0.5\n  kg = 0.5\n[]\n\n[Mesh]\n file = 'twopipe_beam2.e'\n[]\n\n[Variables]\n  [./p]\n    order = FIRST\n    family = LAGRANGE\n    block = '1 2'\n  [../]\n  [./u]\n    order = FIRST\n    family = LAGRANGE\n    block = '1 2'\n    [./InitialCondition]\n      type = ConstantIC\n      value = 0.15\n    [../]\n  [../]\n  [./T]\n    order = FIRST\n    family = LAGRANGE\n    block = '1 2'\n    [./InitialCondition]\n      type = ConstantIC\n      value = 550\n    [../]\n  [../]\n  [./w]\n    order = FIRST\n    family = LAGRANGE\n    block = '1 2'\n  [../]\n[]\n\n[Kernels]\n  [./MASS_EQUATION1]\n    type = mass\n    variable = p\n    vel = u\n    temp = T\n    press = p\n    lvel = w\n    block = '1 2'\n  [../]\n  [./Momentum_EQUATION]\n    type = momentum\n    variable = u\n    press = p\n    temp = T\n    vel = u\n    lvel = w\n    block = '1 2'\n   [../]\n  [./Energy_EQUATION1]\n    type = energy\n    variable = T\n    vel = u\n    press = p\n    temp = T\n    lvel = w\n    value = 1.0\n    block = '1'\n    function = test\n    linearfittingTEMP = TEMPVALUE2\n  [../]\n  [./Energy_EQUATION2]\n    type = energy\n    variable = T\n    vel = u\n    press = p\n    temp = T\n    lvel = w\n    value = 1.0\n    block = '2'\n    function = test\n    linearfittingTEMP = TEMPVALUE1\n  [../]\n  [./LateralMomentum_EQUATION1]\n    type = lateralmomentum\n    variable = w\n    lvel = w\n    vel = u\n    temp = T\n    press = p\n    linearfittingTEMP = TEMPVALUE2\n    linearfittingPRESS = PRESSVALUE2\n    linearfittingVEL = VELVALUE2\n    block = '1'\n  [../]\n  [./LateralMomentum_EQUATION2]\n    type = lateralmomentum\n    variable = w\n    lvel = w\n    vel = u\n    temp = T\n    press = p\n    linearfittingTEMP = TEMPVALUE1\n    linearfittingPRESS = PRESSVALUE1\n    linearfittingVEL = VELVALUE1\n    block = '2'\n  [../]\n[]\n\n[Functions]\n  [./test]\n    type = ParsedFunction\n    value = 1.0e8*sin(pi*x)\n  [../]\n[../]\n\n[BCs]\n  [./outlet_p]\n    type =  DirichletBC\n    boundary = '16 26'\n    variable = p\n    value = 2.0e5\n  [../]\n  [./inlet_u1]\n    type =  DirichletBC\n    boundary = '11'\n    variable = u\n    value = 0.1\n  [../]\n  [./inlet_u2]\n    type =  DirichletBC\n    boundary = '21'\n    variable = u\n    value = 0.2\n  [../]\n  [./inlet_T1]\n    type = DirichletBC\n    variable = T\n    boundary = '11'\n    value = 500\n  [../]\n  [./inlet_T2]\n    type = DirichletBC\n    variable = T\n    boundary = '21'\n    value = 600\n  [../]\n  [./inlet_w1]\n    type =  DirichletBC\n    boundary = '11'\n    variable = w\n    value = 100\n  [../]\n  [./inlet_w2]\n    type =  DirichletBC\n    boundary = '21'\n    variable = w\n    value = -100\n  [../]\n[]\n\n[Materials]\n  [./EM]\n    type = submaterial\n    is_sodium = false\n    constant_property = false\n    constant_f_h_property = true\n    f_coefficient = 0.01\n    diameter = 0.02\n    temp = T\n    block = '1 2'\n  [../]\n[]\n\n[Preconditioning]\n  [./FD]\n    type = SMP\n    full = true\n  [../]\n[]\n\n[UserObjects]\n  [./TEMPVALUE1]\n    type = linearfitting\n    paramname1 = TEMPADJ_VEC1\n    paramname2 = TEMPADJ_VEC1\n    vectorname1 = T\n    vectorname2 = x\n    broadcast1 = false\n    broadcast2 = false\n  [../]\n  [./TEMPVALUE2]\n    type = linearfitting\n    paramname1 = TEMPADJ_VEC2\n    paramname2 = TEMPADJ_VEC2\n    vectorname1 = T\n    vectorname2 = x\n    broadcast1 = false\n    broadcast2 = false\n  [../]\n  [./PRESSVALUE1]\n    type = linearfitting\n    paramname1 = PRESSADJ_VEC1\n    paramname2 = PRESSADJ_VEC1\n    vectorname1 = p\n    vectorname2 = x\n    broadcast1 = false\n    broadcast2 = false\n  [../]\n  [./PRESSVALUE2]\n    type = linearfitting\n    paramname1 = PRESSADJ_VEC2\n    paramname2 = PRESSADJ_VEC2\n    vectorname1 = p\n    vectorname2 = x\n    broadcast1 = false\n    broadcast2 = false\n  [../]\n  [./VELVALUE1]\n    type = linearfitting\n    paramname1 = VELADJ_VEC1\n    paramname2 = VELADJ_VEC1\n    vectorname1 = u\n    vectorname2 = x\n    broadcast1 = false\n    broadcast2 = false\n  [../]\n  [./VELVALUE2]\n    type = linearfitting\n    paramname1 = VELADJ_VEC2\n    paramname2 = VELADJ_VEC2\n    vectorname1 = u\n    vectorname2 = x\n    broadcast1 = false\n    broadcast2 = false\n  [../]\n[]\n\n[VectorPostprocessors]\n  [./VELADJ_VEC1]\n    type = NodalValueSampler\n    variable = u\n    block = '1'\n    sort_by = x\n    execute_on = 'INITIAL LINEAR NONLINEAR'\n  [../]\n  [./VELADJ_VEC2]\n    type = NodalValueSampler\n    variable = u\n    block = '2'\n    sort_by = x\n    execute_on = 'INITIAL LINEAR NONLINEAR'\n  [../]\n  [./PRESSADJ_VEC1]\n    type = NodalValueSampler\n    variable = p\n    block = '1'\n    sort_by = x\n    execute_on = 'INITIAL LINEAR NONLINEAR'\n  [../]\n  [./PRESSADJ_VEC2]\n    type = NodalValueSampler\n    variable = p\n    block = '2'\n    sort_by = x\n    execute_on = 'INITIAL LINEAR NONLINEAR'\n  [../]\n  [./TEMPADJ_VEC1]\n    type = NodalValueSampler\n    variable = T\n    block = '1'\n    sort_by = x\n    execute_on = 'INITIAL LINEAR NONLINEAR'\n  [../]\n  [./TEMPADJ_VEC2]\n    type = NodalValueSampler\n    variable = T\n    block = '2'\n    sort_by = x\n    execute_on = 'INITIAL LINEAR NONLINEAR'\n  [../]\n[]\n\n[Executioner]\n  type =  Steady\n  solve_type = PJFNK\n\n#  petsc_options = '-snes_converged_reason -ksp_converged_reason -pc_svd_monitor'\n#  petsc_options_iname = '-pc_type -pc_factor_shift_type -pc_factor_mat_solver_package'\n#  petsc_options_value = 'lu    NONZERO      superlu_dist '\n#  petsc_options = '-snes_monitor -ksp_monitor_true_residual -snes_converged_reason -ksp_converged_reason'\n\n#  petsc_options = '-pc_svd_monitor'\n#  petsc_options_iname = '-pc_type'\n#  petsc_options_value = 'svd'\n\n  petsc_options = '-snes_converged_reason -ksp_converged_reason -pc_svd_monitor'\n#  petsc_options = '-snes_monitor -ksp_monitor_true_residual -snes_converged_reason -ksp_converged_reason'\n  petsc_options_iname = '-pc_type -pc_factor_mat_solver_package'\n  petsc_options_value = 'lu superlu_dist'\n\n\n  nl_rel_tol = 1e-8\n  nl_abs_tol = 1e-12\n  nl_max_its = 50\n  l_tol = 1e-6\n  l_max_its = 100\n  line_search = 'none'\n[]\n\n[Outputs]\n  exodus = true\n  csv = true\n[]\n\nError info is:\nFramework Information:\nMOOSE Version:           git commit 5d2aa15248 on 2022-04-01\nLibMesh Version:         \nPETSc Version:           3.16.5\nSLEPc Version:           3.16.2\nCurrent Time:            Mon Oct 17 22:48:03 2022\nExecutable Timestamp:    Mon Oct 17 07:47:49 2022\n\nParallelism:\n  Num Processors:          1\n  Num Threads:             1\n\nMesh: \n  Parallel Type:           replicated\n  Mesh Dimension:          1\n  Spatial Dimension:       2\n  Nodes:                   12\n  Elems:                   10\n  Num Subdomains:          2\n\nNonlinear System:\n  Num DOFs:                48\n  Num Local DOFs:          48\n  Variables:               { \"p\" \"u\" \"T\" \"w\" } \n  Finite Element Types:    \"LAGRANGE\" \n  Approximation Orders:    \"FIRST\" \n\nExecution Information:\n  Executioner:             Steady\n  Solver Mode:             Preconditioned JFNK\n  MOOSE Preconditioner:    SMP\n\n 0 Nonlinear |R| = 9.684908e+07\n      0 Linear |R| = 9.684908e+07\n      1 Linear |R| = 7.262913e+07\n      2 Linear |R| = 4.003316e+07\n      3 Linear |R| = 1.662636e+05\n      4 Linear |R| = 1.268994e+05\n      5 Linear |R| = 7.886449e+04\n      6 Linear |R| = 1.264851e+04\n      7 Linear |R| = 3.485096e+03\n      8 Linear |R| = 3.375993e+03\n      9 Linear |R| = 1.502126e+03\n     10 Linear |R| = 1.369914e+03\n     11 Linear |R| = 1.153357e+03\n     12 Linear |R| = 1.102386e+03\n     13 Linear |R| = 9.815075e+02\n     14 Linear |R| = 9.013048e+02\n     15 Linear |R| = 8.322066e+02\n     16 Linear |R| = 7.594054e+02\n     17 Linear |R| = 7.056265e+02\n     18 Linear |R| = 7.055377e+02\n     19 Linear |R| = 6.682807e+02\n     20 Linear |R| = 6.294849e+02\n     21 Linear |R| = 5.827533e+02\n     22 Linear |R| = 5.548326e+02\n     23 Linear |R| = 5.159567e+02\n     24 Linear |R| = 4.999194e+02\n     25 Linear |R| = 4.746365e+02\n     26 Linear |R| = 4.566083e+02\n     27 Linear |R| = 4.566082e+02\n     28 Linear |R| = 4.431755e+02\n     29 Linear |R| = 4.412566e+02\n     30 Linear |R| = 3.709834e+05\n     31 Linear |R| = 3.390672e+05\n     32 Linear |R| = 3.374639e+05\n     33 Linear |R| = 1.169134e+05\n     34 Linear |R| = 5.092162e+04\n     35 Linear |R| = 9.636646e+03\n     36 Linear |R| = 9.519738e+03\n     37 Linear |R| = 5.423694e+03\n     38 Linear |R| = 4.952410e+03\n     39 Linear |R| = 1.423640e+03\n     40 Linear |R| = 1.146720e+03\n     41 Linear |R| = 6.389495e+02\n     42 Linear |R| = 4.897847e+02\n     43 Linear |R| = 2.802632e+02\n     44 Linear |R| = 2.350840e+02\n     45 Linear |R| = 1.959855e+02\n     46 Linear |R| = 1.673932e+02\n     47 Linear |R| = 1.503125e+02\n     48 Linear |R| = 1.384166e+02\n     49 Linear |R| = 1.280600e+02\n     50 Linear |R| = 1.190889e+02\n     51 Linear |R| = 1.120673e+02\n     52 Linear |R| = 1.060448e+02\n     53 Linear |R| = 1.005545e+02\n     54 Linear |R| = 1.005402e+02\n     55 Linear |R| = 9.611802e+01\n  Linear solve converged due to CONVERGED_RTOL iterations 55\n 1 Nonlinear |R| = 1.795000e+14\n      0 Linear |R| = 1.795000e+14\n      1 Linear |R| = 6.115383e+12\n      2 Linear |R| = 5.000160e+12\n      3 Linear |R| = 4.915033e+12\n      4 Linear |R| = 3.349811e+12\n      5 Linear |R| = 2.004474e+12\n      6 Linear |R| = 1.903671e+12\n      7 Linear |R| = 1.092260e+11\n      8 Linear |R| = 1.089425e+11\n      9 Linear |R| = 2.346686e+10\n     10 Linear |R| = 3.576322e+09\n     11 Linear |R| = 1.675046e+09\n     12 Linear |R| = 1.492094e+09\n     13 Linear |R| = 1.347012e+09\n     14 Linear |R| = 1.188002e+09\n     15 Linear |R| = 1.062221e+09\n     16 Linear |R| = 6.002530e+08\n     17 Linear |R| = 3.337966e+08\n     18 Linear |R| = 1.049198e+08\n  Linear solve converged due to CONVERGED_RTOL iterations 18\n 2 Nonlinear |R| = 4.376385e+18\nNonlinear solve did not converge due to DIVERGED_DTOL iterations 2\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nI know there may be many reasons which cause the non-convergence of the nonlinear solve. I have browsed \"Why is Newton's method not converging?\" But I don't know how to use the petsc option to find out the problem. Can anybody give me some advice?\nEthan",
          "url": "https://github.com/idaholab/moose/discussions/22425",
          "updatedAt": "2022-11-15T18:17:31Z",
          "publishedAt": "2022-10-18T07:38:04Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\ncan you try tightening the linear solve convergence?\nWhile it does look like it s converging, the residual is still large when it considers it converged.\nI would also turn on automatic_scaling\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3905577",
                  "updatedAt": "2022-10-18T12:26:19Z",
                  "publishedAt": "2022-10-18T12:26:18Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "A helpful analysis when facing linear solve convergence issues is to look at the singular value decomposition. You already have the right options in your executioner block, just I comment those\npetsc_options = '-pc_svd_monitor'\npetsc_options_iname = '-pc_type'\npetsc_options_value = 'svd'\nand comment the others.\nThen please report back the log. You can attach it no need to paste",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3906187",
                          "updatedAt": "2022-10-18T13:30:35Z",
                          "publishedAt": "2022-10-18T13:29:33Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Ethan-xj"
                          },
                          "bodyText": "I've tried tightening the linear solve convergence and turn on automatic_scaling but no help.\nsvd info is like:\n0 Nonlinear |R| = 4.336556e+07\n      SVD: condition number 3.869546805366e+20, 2 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 7.401164605705e-16 2.093903784493e-15 1.262262987096e-03 1.262474141078e-03 2.044260149468e-03\n      SVD: largest singular values : 2.599575383639e+05 2.729892529714e+05 2.729892652737e+05 2.863910226199e+05 2.863915285599e+05\n      0 Linear |R| = 4.336556e+07\n      1 Linear |R| = 1.550253e+05\n      2 Linear |R| = 2.305613e+00\n 1 Nonlinear |R| = 5.218725e+10\n      SVD: condition number 6.627935421585e+10, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 1.006739393511e-02 1.053531141913e-02 1.135761460821e-02 1.172289713294e-02 1.465162648495e-02\n      SVD: largest singular values : 2.114990472696e+08 5.208574217496e+08 5.771913522718e+08 5.944399514397e+08 6.672603686557e+08\n      0 Linear |R| = 5.218725e+10\n      1 Linear |R| = 1.178826e+10\n      2 Linear |R| = 5.508254e+09\n      3 Linear |R| = 3.085541e+09\n      4 Linear |R| = 1.901834e+08\n      5 Linear |R| = 9.260299e+07\n      6 Linear |R| = 8.714542e+06\n      7 Linear |R| = 4.392612e+05\n      8 Linear |R| = 4.761062e+04\n 2 Nonlinear |R| = 1.349031e+10\n      SVD: condition number 1.391894828974e+11, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 1.580539139711e-03 3.275932978742e-03 4.430524260619e-03 4.735235287784e-03 7.747361393796e-03\n      SVD: largest singular values : 6.272104708957e+07 7.153468086483e+07 7.729908043561e+07 2.128491818299e+08 2.199944255554e+08\n      0 Linear |R| = 1.349031e+10\n      1 Linear |R| = 7.893490e+09\n      2 Linear |R| = 2.538318e+09\n      3 Linear |R| = 2.515361e+09\n      4 Linear |R| = 5.376503e+08\n      5 Linear |R| = 1.906544e+08\n      6 Linear |R| = 3.369192e+07\n      7 Linear |R| = 2.522291e+07\n      8 Linear |R| = 7.227505e+06\n      9 Linear |R| = 3.396977e+05\n     10 Linear |R| = 2.908401e+02\n 3 Nonlinear |R| = 2.632591e+10\n      SVD: condition number 2.159080800468e+12, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 4.337096716538e-04 2.198094868503e-03 2.683026624429e-03 6.807311730829e-03 7.929380549331e-03\n      SVD: largest singular values : 3.430059797055e+07 5.796045170453e+07 7.190534405850e+07 8.731796413478e+08 9.364142250447e+08\n      0 Linear |R| = 2.632591e+10\n      1 Linear |R| = 2.627780e+10\n      2 Linear |R| = 1.381449e+10\n      3 Linear |R| = 4.869077e+09\n      4 Linear |R| = 5.113363e+08\n      5 Linear |R| = 6.063945e+07\n      6 Linear |R| = 6.695045e+06\n      7 Linear |R| = 1.746305e+06\n      8 Linear |R| = 4.688312e+04\n      9 Linear |R| = 4.299942e+04\n     10 Linear |R| = 3.733407e+02\n 4 Nonlinear |R| = 1.907015e+10\n      SVD: condition number 6.242688330859e+11, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 1.152106577911e-03 1.488192388598e-03 1.735964403871e-03 5.951813298882e-03 8.160289470301e-03\n      SVD: largest singular values : 1.633330295388e+07 2.799562009590e+07 3.634915085794e+07 6.941264872982e+08 7.192242289828e+08\n      0 Linear |R| = 1.907015e+10\n      1 Linear |R| = 1.447033e+10\n      2 Linear |R| = 4.490343e+09\n      3 Linear |R| = 6.621869e+08\n      4 Linear |R| = 9.239841e+07\n      5 Linear |R| = 1.277331e+07\n      6 Linear |R| = 5.959127e+05\n      7 Linear |R| = 1.043141e+05\n      8 Linear |R| = 1.430702e+04\n 5 Nonlinear |R| = 1.541479e+10\n      SVD: condition number 1.156956576089e+13, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 7.191625627918e-05 8.055863105241e-04 9.806119362769e-04 2.816442203339e-03 3.494768662942e-03\n      SVD: largest singular values : 3.177573760032e+07 9.990360997803e+07 1.642756023806e+08 8.223471810242e+08 8.320398562989e+08\n      0 Linear |R| = 1.541479e+10\n      1 Linear |R| = 1.367224e+10\n      2 Linear |R| = 9.975120e+09\n      3 Linear |R| = 9.951815e+09\n      4 Linear |R| = 5.868451e+08\n      5 Linear |R| = 1.649037e+08\n      6 Linear |R| = 1.342734e+07\n      7 Linear |R| = 7.901587e+05\n      8 Linear |R| = 4.138576e+05\n      9 Linear |R| = 7.322996e+04\n     10 Linear |R| = 1.464983e+03\n 6 Nonlinear |R| = 1.919316e+11\n      SVD: condition number 7.856886224084e+12, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 2.771698601288e-04 1.659931619665e-03 3.747110951854e-03 4.109935096003e-03 6.376962113402e-03\n      SVD: largest singular values : 1.001629408638e+08 1.648023962539e+08 4.106232529724e+08 4.743677907204e+08 2.177692055777e+09\n      0 Linear |R| = 1.919316e+11\n      1 Linear |R| = 1.810633e+10\n      2 Linear |R| = 1.501036e+10\n      3 Linear |R| = 2.352895e+09\n      4 Linear |R| = 2.223281e+09\n      5 Linear |R| = 1.982148e+08\n      6 Linear |R| = 2.716037e+07\n      7 Linear |R| = 1.771982e+07\n      8 Linear |R| = 1.734676e+07\n      9 Linear |R| = 9.037296e+06\n     10 Linear |R| = 3.059233e+05\n     11 Linear |R| = 2.108584e+02\n 7 Nonlinear |R| = 5.586902e+10\n      SVD: condition number 5.575732828813e+13, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 1.467382572136e-05 1.564970666984e-04 1.899941423280e-03 2.585331012378e-03 3.021361309547e-03\n      SVD: largest singular values : 1.452532688690e+08 2.605609239556e+08 3.054394376255e+08 4.212224499198e+08 8.181733179885e+08\n      0 Linear |R| = 5.586902e+10\n      1 Linear |R| = 2.322391e+10\n      2 Linear |R| = 2.039387e+10\n      3 Linear |R| = 2.000107e+10\n      4 Linear |R| = 4.885113e+09\n      5 Linear |R| = 1.411450e+09\n      6 Linear |R| = 1.245704e+09\n      7 Linear |R| = 6.579378e+07\n      8 Linear |R| = 7.847188e+06\n      9 Linear |R| = 1.077280e+04\n 8 Nonlinear |R| = 5.997147e+11\n      SVD: condition number 2.075726717114e+13, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 2.646541277013e-04 1.792534957714e-03 2.475725789593e-03 5.786980982566e-03 7.924556220179e-03\n      SVD: largest singular values : 3.362456422443e+08 4.556671171541e+08 8.783230486809e+08 2.338810642850e+09 5.493496436642e+09\n      0 Linear |R| = 5.997147e+11\n      1 Linear |R| = 1.225080e+11\n      2 Linear |R| = 5.894974e+10\n      3 Linear |R| = 7.944822e+09\n      4 Linear |R| = 3.488516e+09\n      5 Linear |R| = 8.974561e+08\n      6 Linear |R| = 4.915812e+08\n      7 Linear |R| = 4.460547e+08\n      8 Linear |R| = 3.971313e+07\n      9 Linear |R| = 4.535522e+06\n     10 Linear |R| = 6.726619e+04\n 9 Nonlinear |R| = 1.676970e+11\n      SVD: condition number 1.234246390871e+14, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 2.235497959241e-05 2.172475717633e-04 9.510553119576e-04 2.924842471259e-03 3.564923002421e-03\n      SVD: largest singular values : 5.521310288351e+08 6.016433233184e+08 6.780278979133e+08 1.531072312753e+09 2.759155287992e+09\n      0 Linear |R| = 1.676970e+11\n      1 Linear |R| = 7.238843e+10\n      2 Linear |R| = 2.610884e+10\n      3 Linear |R| = 2.350698e+10\n      4 Linear |R| = 1.599008e+10\n      5 Linear |R| = 5.178251e+08\n      6 Linear |R| = 4.111981e+08\n      7 Linear |R| = 3.672563e+07\n      8 Linear |R| = 2.903827e+07\n      9 Linear |R| = 3.622527e+06\n     10 Linear |R| = 1.108048e+05\n10 Nonlinear |R| = 2.478522e+17\n      SVD: condition number 3.395490743077e+19, 0 of 48 singular values are (nearly) zero\n      SVD: smallest singular values: 4.830690350242e-06 6.858442416281e-06 2.935996989954e-04 3.982720677145e-04 6.644722188774e-04\n      SVD: largest singular values : 8.059227694498e+10 1.165332228769e+11 4.846322657941e+13 1.081321105022e+14 1.640256436692e+14\n      0 Linear |R| = 2.478522e+17\n      1 Linear |R| = 6.417952e+16\n      2 Linear |R| = 1.217168e+16\n      3 Linear |R| = 3.790699e+14\n      4 Linear |R| = 8.087065e+13\n      5 Linear |R| = 5.478043e+12\n      6 Linear |R| = 1.150552e+12\n      7 Linear |R| = 4.889437e+11\n      8 Linear |R| = 3.167855e+11\n      9 Linear |R| = 2.727717e+11\n     10 Linear |R| = 8.991009e+10\n11 Nonlinear |R| = 1.031504e+20\nNonlinear solve did not converge due to DIVERGED_DTOL iterations 11\n Solve Did NOT Converge!\nAborting as solve did not converge\n\nIt doesn't seem very normal.",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3906573",
                          "updatedAt": "2022-10-18T14:06:55Z",
                          "publishedAt": "2022-10-18T14:06:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "SVD: condition number 3.869546805366e+20, 2 of 48 singular values are (nearly) zero\nthis is not normal.\nVery likely something is wrong with your set up. Like the equation system is underdetermined because you forgot a boundary condition",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3909059",
                          "updatedAt": "2022-10-18T19:14:15Z",
                          "publishedAt": "2022-10-18T19:14:15Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Did you try checking the Jacobian?\nhttps://mooseframework.inl.gov/help/development/analyze_jacobian.html",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3933493",
                          "updatedAt": "2022-10-21T12:57:48Z",
                          "publishedAt": "2022-10-21T12:57:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Ethan-xj"
                          },
                          "bodyText": "I used the AD(or maybe even if I used the AD, I still need to check the Jacobian?).By the way, I want to ask where can I find the detailed linear and nonlinear counting process in MOOSE. I always feel like I don't know enough.\nAnd the situation now is:\nWhen my four equations are f1(x1,x2,x3)  f2(x1,x2,x3)  f3(x1,x2,x3)  f1(x1,x2,x3,x4) Converged.\nWhen my four equations are f1(x1,x2,x3,x4)  f2(x1,x2,x3,x4)  f3(x1,x2,x3,x4)  f1(x1,x2,x3,x4) Nonlinear did not converged.\nI'm not sure whether there is a solution when I add the fourth variable in the previous three equations or not.\nIf possible I can talk about the method I use to solve the equation which contains variables from different blocks.",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3943351",
                          "updatedAt": "2022-10-23T11:34:36Z",
                          "publishedAt": "2022-10-23T11:34:36Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Ethan-xj"
                          },
                          "bodyText": "Maybe there exists some problems in the method I use.",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3943357",
                          "updatedAt": "2022-10-23T11:35:43Z",
                          "publishedAt": "2022-10-23T11:35:42Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Yes you are right, you do not need to check the Jacobian if you use AD.\nThe 2 singular values is the problem here. Your equation system is undetermined and we need to find out why.\nMaybe you could try adding x4 to 3 out of the 4 equations and see if that still works? Just guessing, maybe it does not make sense\nThe best reference on the solves in MOOSE is the PETSc manual. For hypre we have specific documentation in MOOSE",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3944121",
                          "updatedAt": "2022-10-23T14:49:24Z",
                          "publishedAt": "2022-10-23T14:49:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Ethan-xj"
                          },
                          "bodyText": "just found that I misspelled the subscript of the equation.\nThe correct form is :\nWhen my four equations are f1(x1,x2,x3) f2(x1,x2,x3) f3(x1,x2,x3) f4(x1,x2,x3,x4) Converged.\nWhen my four equations are f1(x1,x2,x3,x4) f2(x1,x2,x3,x4) f3(x1,x2,x3,x4) f4(x1,x2,x3,x4) Nonlinear did not converged.\nI have tried adding x4 to previous 3 equqtions. But they don't converge.",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3947245",
                          "updatedAt": "2022-10-24T04:44:06Z",
                          "publishedAt": "2022-10-24T04:44:05Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Can you add it to only f1 or only f2 or only f3?\nCan you attach the logs for the two cases",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3951849",
                          "updatedAt": "2022-10-24T14:43:28Z",
                          "publishedAt": "2022-10-24T14:43:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Ethan-xj"
                          },
                          "bodyText": "Oh That's weird. I remembered that I've tried to add 'x4' only to one of the three equations and the result was not converged. But just now I add 'x4' to the f3, it converged. I think I should try more times. Later I will tell you the results.",
                          "url": "https://github.com/idaholab/moose/discussions/22425#discussioncomment-3958325",
                          "updatedAt": "2022-10-25T08:45:46Z",
                          "publishedAt": "2022-10-25T08:45:45Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Error reported after \"make\"",
          "author": {
            "login": "KangChenRui"
          },
          "bodyText": "Hello everyone!\nError reported after \"make\",But it worked fine yesterday. I don't konw what happened.\nPlease help me!",
          "url": "https://github.com/idaholab/moose/discussions/22510",
          "updatedAt": "2022-11-15T18:17:15Z",
          "publishedAt": "2022-10-27T02:11:39Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nSeems odd. Did you just udpate MOOSE?\nCan you make clobberall before building?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22510#discussioncomment-3976658",
                  "updatedAt": "2022-10-27T02:29:45Z",
                  "publishedAt": "2022-10-27T02:29:44Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "KangChenRui"
                          },
                          "bodyText": "I did not update MOOSE.",
                          "url": "https://github.com/idaholab/moose/discussions/22510#discussioncomment-3979151",
                          "updatedAt": "2022-10-27T08:21:56Z",
                          "publishedAt": "2022-10-27T08:21:56Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "please try cleaning the repository then building again",
                          "url": "https://github.com/idaholab/moose/discussions/22510#discussioncomment-3982540",
                          "updatedAt": "2022-10-27T14:12:08Z",
                          "publishedAt": "2022-10-27T14:12:07Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Date type setting of variables",
          "author": {
            "login": "abc-hy"
          },
          "bodyText": "Hi everyone,\nDoes anyone know how can I set the date type of any variables I define? Currently, I found the data type of the variable I define is cell data, however, I want it to be point data type, how to set the specific data type for the variables?\nThank you very much,\nBest",
          "url": "https://github.com/idaholab/moose/discussions/22488",
          "updatedAt": "2022-10-27T02:31:08Z",
          "publishedAt": "2022-10-25T00:12:45Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYou set the finite element family with the family parameter in the variables block.\ncell_data is usually elemental variables, while point data is nodal variables.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3955760",
                  "updatedAt": "2022-10-25T00:26:04Z",
                  "publishedAt": "2022-10-25T00:26:03Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "abc-hy"
                          },
                          "bodyText": "This is how I set the variable, how to change it to make this variable become point data? Currently, the data type I got is cell data.",
                          "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3955788",
                          "updatedAt": "2022-10-25T00:32:34Z",
                          "publishedAt": "2022-10-25T00:32:33Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "You can convert point data to cell data in Paraview directly. There's an option, maybe in the advanced settings after clicking the little cogwheel.\nIf you want moose to output point data, you ll need to create an auxiliary FIRST (order) LAGRANGE variable and project your CONSTANT MONOMIAL variable",
                          "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3955817",
                          "updatedAt": "2022-10-25T00:39:26Z",
                          "publishedAt": "2022-10-25T00:39:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "abc-hy"
                          },
                          "bodyText": "Got it. Thank you",
                          "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3956250",
                          "updatedAt": "2022-10-25T01:55:55Z",
                          "publishedAt": "2022-10-25T01:55:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "abc-hy"
                          },
                          "bodyText": "After I set the laplacian to be FIRST and LAGRANGE, I keep getting this error message. When I change back to set laplacian as CONSTANT and MONOMIAL, I can get it run. Why is this? Does that mean some variable just cannot be set as point data?\nAlso, last time I used paraview to convert cell data to point data, and I found the data at the interface is very very little, is the convertion able to maintain the accuracy? Or is cell data just not as accurate as point data?",
                          "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3971079",
                          "updatedAt": "2022-10-26T15:01:21Z",
                          "publishedAt": "2022-10-26T15:01:21Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Is laplacian a variable?\nwhat is your current [Mesh] block?",
                          "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3972387",
                          "updatedAt": "2022-10-26T17:24:52Z",
                          "publishedAt": "2022-10-26T17:24:52Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "abc-hy"
                          },
                          "bodyText": "Laplacian is calculated from w and c, w and c are all variables.\n\nThis is my mesh",
                          "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3973543",
                          "updatedAt": "2022-10-26T19:53:20Z",
                          "publishedAt": "2022-10-26T19:53:19Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "nz = 0 is not needed.\nAre you running in parallel?\nDo you hit any issue with less refinement?\nAnd there are no second order variables anywhere in the simulation?",
                          "url": "https://github.com/idaholab/moose/discussions/22488#discussioncomment-3976690",
                          "updatedAt": "2022-10-27T02:31:08Z",
                          "publishedAt": "2022-10-27T02:31:08Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "FV variable gradient in FVElemental kernel",
          "author": {
            "login": "heinono1"
          },
          "bodyText": "I need to write an FV kernel that inherits from FVElementalKernel but includes gradients of FV variables. I understand that I cannot just use coupledGradient as I would for the usual FE variables. Is there a \"ready-made\" way to access or compute (element-averages of)  gradients of FV variables using the procedures outlined in \"Reconstruction\" on https://mooseframework.inl.gov/moose/finite_volumes/fv_design.html, or do I have to figure out how to compute the element-average gradient?\nThanks.",
          "url": "https://github.com/idaholab/moose/discussions/22484",
          "updatedAt": "2022-10-26T23:36:15Z",
          "publishedAt": "2022-10-24T20:31:21Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nDid you try the functor element gradient?\nhttps://mooseframework.inl.gov/docs/doxygen/moose/classMoose_1_1FunctorBase.html#a9af8d394649b42b3c4ca9c4c7ba07e42\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3954959",
                  "updatedAt": "2022-10-24T21:22:09Z",
                  "publishedAt": "2022-10-24T21:22:09Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "heinono1"
                  },
                  "bodyText": "Hi,\n\nThanks. Sorry for being a bit slow on the uptake, but do you know of an\nexample of usage?\n\u2026\nOn Mon, Oct 24, 2022 at 4:22 PM Guillaume Giudicelli < ***@***.***> wrote:\n Hello\n\n Did you try the functor element gradient?\n\n https://mooseframework.inl.gov/docs/doxygen/moose/classMoose_1_1FunctorBase.html#a9af8d394649b42b3c4ca9c4c7ba07e42\n\n Guillaume\n\n \u2014\n Reply to this email directly, view it on GitHub\n <#22484 (comment)>,\n or unsubscribe\n <https://github.com/notifications/unsubscribe-auth/AEKZEFYT7YCH4PKVOYQ2J33WE34YXANCNFSM6AAAAAARNKQ5U4>\n .\n You are receiving this because you authored the thread.Message ID:\n ***@***.***>\n\n\n-- \nOlle Heinonen\n***@***.***",
                  "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3955235",
                  "updatedAt": "2022-10-24T22:24:19Z",
                  "publishedAt": "2022-10-24T22:24:18Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I guess I dont\nI thought this one had\nhttps://github.com/idaholab/moose/blob/next/modules/navier_stokes/src/fvkernels/INSFVMixingLengthReynoldsStress.C\nbut it uses another API, adGradSln, which should work too",
                          "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3955284",
                          "updatedAt": "2022-10-24T22:37:21Z",
                          "publishedAt": "2022-10-24T22:37:21Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "An example of what @GiudGiud suggested (which is a great option), is here",
                          "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3964430",
                          "updatedAt": "2022-10-25T21:30:44Z",
                          "publishedAt": "2022-10-25T21:30:43Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "heinono1"
                  },
                  "bodyText": "Thanks. I'll give it a try.\n\u2026\nOn Mon, Oct 24, 2022 at 5:37 PM Guillaume Giudicelli < ***@***.***> wrote:\n I guess I dont\n I thought this one had\n\n https://github.com/idaholab/moose/blob/next/modules/navier_stokes/src/fvkernels/INSFVMixingLengthReynoldsStress.C\n\n but it uses another API, adGradSln, which should work too\n\n \u2014\n Reply to this email directly, view it on GitHub\n <#22484 (reply in thread)>,\n or unsubscribe\n <https://github.com/notifications/unsubscribe-auth/AEKZEFYIDDW2WPSD5WUYRSDWE4FSXANCNFSM6AAAAAARNKQ5U4>\n .\n You are receiving this because you authored the thread.Message ID:\n ***@***.***>\n\n\n-- \nOlle Heinonen\n***@***.***",
                  "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3960477",
                  "updatedAt": "2022-10-25T13:17:20Z",
                  "publishedAt": "2022-10-25T13:17:19Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "lindsayad"
                  },
                  "bodyText": "We're trying to encourage our posters to use threads in their responses to answers. You can't use coupleGradient, but you should be able to use adCoupledGradient as you would for an AD kernel in FE",
                  "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3964417",
                  "updatedAt": "2022-10-25T21:28:29Z",
                  "publishedAt": "2022-10-25T21:28:28Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "heinono1"
                          },
                          "bodyText": "Thanks, Alex. Sorry about breaking the thread.",
                          "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3970022",
                          "updatedAt": "2022-10-26T13:22:34Z",
                          "publishedAt": "2022-10-26T13:22:34Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "No problem at all!",
                          "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3971997",
                          "updatedAt": "2022-10-26T16:38:28Z",
                          "publishedAt": "2022-10-26T16:38:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "heinono1"
                          },
                          "bodyText": "@lindsayad so does adCoupledGradient work in the FV system so I can use it directly to calculate an element-average gradient (FVElementalKernel) without any other extra steps (eg getting element faces etc etc)?",
                          "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3974178",
                          "updatedAt": "2022-10-26T21:15:48Z",
                          "publishedAt": "2022-10-26T21:15:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "Correct. For a finite volume variable, adCoupledGradient returns a cell-average gradient computed via Green-Gauss",
                          "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3974575",
                          "updatedAt": "2022-10-26T22:01:14Z",
                          "publishedAt": "2022-10-26T22:01:13Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "heinono1"
                          },
                          "bodyText": "That is awesome! Thank you, MOOSE team!",
                          "url": "https://github.com/idaholab/moose/discussions/22484#discussioncomment-3975630",
                          "updatedAt": "2022-10-26T23:36:16Z",
                          "publishedAt": "2022-10-26T23:36:15Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Strain at t_points at shell integration points",
          "author": {
            "login": "Zoophish"
          },
          "bodyText": "Hi, I'm trying to extract curvature values from shell elements by using some AuxVariables. To do this, I'm accessing the strain values at the two t_points above and below the shell mid surface at each quadrature point using the RankTwoTensor AuxKernel, like in the modules/tensor_mechanics/test/tests/shell/static/straintest.i example.\nIf I use the material property total_global_strain_t_points_, like in the example, the strain values all output zero at every element, despite my model being under load and producing non-zero displacement. Interestingly, the global_stress_t_points_ material property outputs valid stress values, so it seems to only be an issue with the strain.\nDoes anyone know the correct way to extract the strain values at the t_points, or why they may be outputting zero? I will add my input file as a comment.\nThanks,\nSam",
          "url": "https://github.com/idaholab/moose/discussions/22460",
          "updatedAt": "2022-10-26T17:04:02Z",
          "publishedAt": "2022-10-21T10:11:35Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "Zoophish"
                  },
                  "bodyText": "This is my input file:\nx_size = 100 #mm\ny_size = 25 #mm\nn_plies = 16\nply_thickness = '${fparse 5/n_plies}'\nn_elems_x = 64\n# n_elems_y should be even to allow for the creation of the centerline sideset\nn_elems_y = 16\nforce = 500 # N\npressure = '${fparse force / (y_size)}'\n\n[Mesh]\n  [Generator]\n    type = GeneratedMeshGenerator\n    dim = 2\n    xmax = ${x_size}\n    ymax = ${y_size}\n    nx = ${n_elems_x}\n    ny = ${n_elems_y}\n  []\n  [SampleXCenterline]\n    type = ParsedGenerateSideset\n    input = Generator\n    new_sideset_name = Centerline\n    combinatorial_geometry = 'x=${fparse x_size/2}'\n  []\n[]\n\n[Variables]\n  [disp_x]\n  []\n  [disp_y]\n  []\n  [disp_z]\n  []\n  [rot_x]\n  []\n  [rot_y]\n  []\n[]\n\n[AuxVariables]\n  [strain_xx_bottom]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n  [strain_xx_top]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n  [strain_yy_bottom]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n  [strain_yy_top]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n  [strain_xx_midplane]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n  [kxx]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n[]\n\n[AuxKernels]\n  [strain_xx_bottom]\n    type = RankTwoAux\n    variable = strain_xx_bottom\n    # quadrature underneath the midplane\n    rank_two_tensor = total_global_strain_t_points_0\n    index_i = 0\n    index_j = 0\n  []\n  [stress_xx_top]\n    type = RankTwoAux\n    variable = strain_xx_top\n    # quadrature above the midplane\n    rank_two_tensor = global_stress_t_points_1\n    index_i = 0\n    index_j = 0\n  []\n  [strain_yy_bottom]\n    type = RankTwoAux\n    variable = strain_yy_bottom\n    # quadrature underneath the midplane\n    rank_two_tensor = total_global_strain_t_points_0\n    index_i = 1\n    index_j = 1\n  []\n  [strain_yy_top]\n    type = RankTwoAux\n    variable = strain_yy_top\n    # quadrature above the midplane\n    rank_two_tensor = total_global_strain_t_points_1\n    index_i = 1\n    index_j = 1\n  []\n[]\n\n[GlobalParams]\n  displacements = 'disp_x disp_y disp_z'\n  rotations = 'rot_x rot_y'\n[]\n\n[Kernels]\n  [solid_disp_x]\n    type = ADStressDivergenceShell\n    block = '0'\n    component = 0\n    variable = disp_x\n    through_thickness_order = SECOND\n  []\n  [solid_disp_y]\n    type = ADStressDivergenceShell\n    block = '0'\n    component = 1\n    variable = disp_y\n    through_thickness_order = SECOND\n  []\n  [solid_disp_z]\n    type = ADStressDivergenceShell\n    block = '0'\n    component = 2\n    variable = disp_z\n    through_thickness_order = SECOND\n  []\n  [solid_rot_x]\n    type = ADStressDivergenceShell\n    block = '0'\n    component = 3\n    variable = rot_x\n    through_thickness_order = SECOND\n  []\n  [solid_rot_y]\n    type = ADStressDivergenceShell\n    block = '0'\n    component = 4\n    variable = rot_y\n    through_thickness_order = SECOND\n  []\n[]\n\n[Materials]\n  # Materials are computed using the shell functions, see the moose docs on Shells.\n  [stress]\n    type = ADComputeShellStress\n    through_thickness_order = SECOND\n  []\n  [elasticity]\n    # isotropic aluminium\n    type = ADComputeIsotropicElasticityTensorShell\n    youngs_modulus = 70e3\n    poissons_ratio = 0.31\n    through_thickness_order = SECOND\n    block = 0\n  []\n  [strain]\n    type = ADComputeFiniteShellStrain\n    thickness = '${fparse ply_thickness*n_plies}'\n    through_thickness_order = SECOND\n  []\n[]\n\n[BCs]\n  [Fixed_X]\n    type = ADDirichletBC\n    boundary = left\n    value = 0\n    variable = disp_x\n  []\n  [Fixed_Y]\n    type = ADDirichletBC\n    boundary = Centerline\n    value = 0\n    variable = disp_y\n  []\n  [Fixed_Z]\n    type = ADDirichletBC\n    boundary = 'left right'\n    value = 0\n    variable = disp_z\n  []\n  [Load]\n    type = ADNeumannBC\n    boundary = Centerline\n    value = '${fparse -pressure/2}'\n    variable = disp_z\n  []\n[]\n\n[Preconditioning]\n  [smp]\n    type = SMP\n    full = false\n  []\n[]\n\n[Executioner]\n  type = Transient\n  dt = 1\n  dtmin = 1\n  end_time = 1\n  automatic_scaling = TRUE\n  solve_type = 'NEWTON'\n  line_search = 'default'\n  petsc_options_iname = '-pc_type  -snes_linesearch_type -pc_factor_shift_type -snes_max_it  -ksp_max_it'\n  petsc_options_value = 'lu        basic                 NONZERO               20            30'\n[]\n\n[Postprocessors]\n  [Strain_XX]\n    type = ElementalVariableValue\n    elementid = 543\n    variable = strain_xx_bottom\n  []\n[]\n\n[Outputs]\n  [output_file]\n    type = Exodus\n    file_base = shell_cantilever_stress_gradient\n  []\n[]",
                  "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3932236",
                  "updatedAt": "2022-10-21T10:59:00Z",
                  "publishedAt": "2022-10-21T10:12:53Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "@neuphris @recuero",
                  "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3933446",
                  "updatedAt": "2022-10-21T12:52:24Z",
                  "publishedAt": "2022-10-21T12:52:23Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "Zoophish"
                  },
                  "bodyText": "So I just discovered that changing ADComputeFiniteShellStrain to ADComputeIncrementalShellStrain solves the issue, however I am not sure why this is. Would anyone be able to explain?\nOn a slight side note, I was also having an issue using ADComputeIncrementalShellStrain where it was giving the error \"Shell element needs to have exactly four quadrature points.\" for the above input file. However, I verified that all of the elements in the model had exactly 4 quadrature points using a custom AuxKernel. I removed the error-throwing code in the ADComputeIncrementalShellStrain C++ file,  recompiled it and it worked. Could this be a bug?",
                  "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3933534",
                  "updatedAt": "2022-10-21T13:02:07Z",
                  "publishedAt": "2022-10-21T13:02:07Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "neuphris"
                          },
                          "bodyText": "My first guess that \" Shell Element needs to have exactly four quadrature points\"   may have been generated due to the BC that was developed to be applied at the area and is being applied at the edge (I don't know how ADNeuman BC works) because when I tried to create a test with pressure BC (that should be applied over the area) at the edge of shell element, it led to the failure of the test cases and we decided to generate that error for such mismatch. Refer to the comment at the end of #20771",
                          "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3935801",
                          "updatedAt": "2022-10-21T17:03:56Z",
                          "publishedAt": "2022-10-21T17:03:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Zoophish"
                          },
                          "bodyText": "Okay that's interesting, I think my workaround for now will be to comment out the error as I seem to be getting valid results with the Neumann boundary.\nWould you be able to explain why ADComputeFiniteShellStrain does not work?",
                          "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3948199",
                          "updatedAt": "2022-10-24T07:45:28Z",
                          "publishedAt": "2022-10-24T07:45:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "neuphris"
                          },
                          "bodyText": "I went through the code quickly and found that the strains in the contravariant system are not converted to the global strain values which would have been stored in _total_global_strain variable for output in the ADComputeFiniteShellStrain due to which you are getting zero values for the strain.\nThe stress are correct because the strains in contravariant system are used to calculate the stress in the covariant  system and is converted into the global system.\nI think it should be an easy fix. Just adding the few lines of code in theend of  ADFiniteShellStrain::computeProperties() (similar to ADIncrementalShellStrain::computeProperties())\n  for (unsigned int ii = 0; ii < 3; ++ii)\n    for (unsigned int jj = 0; jj < 3; ++jj)\n      _unrotated_total_strain(ii, jj) = MetaPhysicL::raw_value((*_total_strain[j])[i](ii, jj));\n  (*_total_global_strain[j])[i] = (*_contravariant_transformation_matrix[j])[i] *\n                                  _unrotated_total_strain *\n                                  (*_contravariant_transformation_matrix[j])[i].transpose();",
                          "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3963151",
                          "updatedAt": "2022-10-25T18:21:09Z",
                          "publishedAt": "2022-10-25T18:20:29Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Zoophish"
                          },
                          "bodyText": "Thanks for the help, I'll try out those changes.",
                          "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3967700",
                          "updatedAt": "2022-10-26T08:26:03Z",
                          "publishedAt": "2022-10-26T08:26:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "neuphris"
                          },
                          "bodyText": "@bwspenc We never noticed this. It needs to be fixed (i haven't tried, but it seems like the above-mentioned change is the only thing missing) and merged.",
                          "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3971797",
                          "updatedAt": "2022-10-26T16:18:10Z",
                          "publishedAt": "2022-10-26T16:18:10Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Zoophish"
                          },
                          "bodyText": "I can confirm the changes you suggested worked when I added it to my copy of MOOSE and recompiled.",
                          "url": "https://github.com/idaholab/moose/discussions/22460#discussioncomment-3972231",
                          "updatedAt": "2022-10-26T17:04:02Z",
                          "publishedAt": "2022-10-26T17:04:01Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Periodic Boundary Conditions in TensorMechanics",
          "author": {
            "login": "Aayush-T"
          },
          "bodyText": "Hi everyone,\ngreetings!\nI am trying to use periodic boundary conditions for my Tensor Mechanics model. I use mesh file of either .inp or .msh type. I am attaching a few sample mesh files and input files with a sample example. I have developed my model based on FiniteStrainUObasedCP on very similar lines as described in the example.\nOn using automatic PBCs, moose throws error: *** ERROR ***\nCouldn't auto-detect a paired boundary for use with periodic boundary conditions\nwhereas when I try using translation PBC method, it doesn't produce any error but still won't utilize the periodic boundary conditions and model will work as if PBCs are not applied. Even writing wrong/non-existant primary/secondary boundary names doesn't throw any other and the model works as if no PBCs are applied.\nI verified that the model is not using PBCs by looking at disp_x from the generated .e file using paraview.\nI am uploading files for both inp and msh mesh type as well as input files for both. Had to add.txt in the end as github doesn't allow a few file formats to be uploaded. Apologies for that.\neuler_ang_file.txt\nfilename_updated_new.inp.txt\nfinal.msh.txt\ninput_slip_sys.txt\nsave_euler_pbc_gmsh.i.txt\nsave_euler_pbc_inp.i.txt",
          "url": "https://github.com/idaholab/moose/discussions/22441",
          "updatedAt": "2022-10-25T16:59:31Z",
          "publishedAt": "2022-10-19T12:16:17Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nI just run your simulation for 3 time steps\nI added\nconstruct_side_list_from_node_list = true to help visualize x0 x1 y0 y1\nthe three points I checked had the expected periodicity.\nCould you please double check?\npoints on x0 and matching points and x1 should have the same disp_y right?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22441#discussioncomment-3933964",
                  "updatedAt": "2022-10-21T13:54:51Z",
                  "publishedAt": "2022-10-21T13:54:50Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Aayush-T"
                          },
                          "bodyText": "Yes, on adding \"construct_side_list_from_node_list = true\", we get expected periodicity in both the cases, but without it, we do not get periodicity.\nThanks a lot!",
                          "url": "https://github.com/idaholab/moose/discussions/22441#discussioncomment-3962298",
                          "updatedAt": "2022-10-25T16:38:16Z",
                          "publishedAt": "2022-10-25T16:38:15Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "ok thanks for reporting it. I created #22496 to keep track of this",
                          "url": "https://github.com/idaholab/moose/discussions/22441#discussioncomment-3962449",
                          "updatedAt": "2022-10-25T16:53:26Z",
                          "publishedAt": "2022-10-25T16:53:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Aayush-T"
                          },
                          "bodyText": "Thank you again! Also, I wanted to know if there is some specific reason for this to happen? Or is it perfectly normal thing.",
                          "url": "https://github.com/idaholab/moose/discussions/22441#discussioncomment-3962513",
                          "updatedAt": "2022-10-25T16:57:47Z",
                          "publishedAt": "2022-10-25T16:57:45Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I m not an expert on this subsystem so I dont know.\nIt could be a bug or it could have been intentional",
                          "url": "https://github.com/idaholab/moose/discussions/22441#discussioncomment-3962539",
                          "updatedAt": "2022-10-25T16:59:32Z",
                          "publishedAt": "2022-10-25T16:59:31Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "How to set fine grid number only at the interface not the whole model?",
          "author": {
            "login": "abc-hy"
          },
          "bodyText": "Hi everyone,\nDoes anyone know how to set a fine grid number only at the interface not the whole model?\nThe following is the figure I got, I currently set the fine grid number for the whole model, how to only set a fine grid number at the interface? In this case I can save the computational cost.\n\nThank you very much,\nBest,",
          "url": "https://github.com/idaholab/moose/discussions/22495",
          "updatedAt": "2022-11-15T18:11:16Z",
          "publishedAt": "2022-10-25T15:58:48Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYes you may add this mesh generator to refine only the boundary\nhttps://mooseframework.inl.gov/source/meshgenerators/RefineSidesetGenerator.html\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22495#discussioncomment-3961951",
                  "updatedAt": "2022-10-25T16:00:11Z",
                  "publishedAt": "2022-10-25T16:00:11Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "abc-hy"
                          },
                          "bodyText": "It seems that I need to label the interface coordinates? But, what if my interface is moving in the simulation? If it is moving, then how to determine the location?",
                          "url": "https://github.com/idaholab/moose/discussions/22495#discussioncomment-3962171",
                          "updatedAt": "2022-10-25T16:24:04Z",
                          "publishedAt": "2022-10-25T16:24:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "if it's moving then you should look at adaptivity instead. This will be run during the simulation",
                          "url": "https://github.com/idaholab/moose/discussions/22495#discussioncomment-3962216",
                          "updatedAt": "2022-10-25T16:28:51Z",
                          "publishedAt": "2022-10-25T16:28:51Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "abc-hy"
                          },
                          "bodyText": "I am currently using this adaptivity block, which parameter should I change?",
                          "url": "https://github.com/idaholab/moose/discussions/22495#discussioncomment-3962353",
                          "updatedAt": "2022-10-25T16:43:54Z",
                          "publishedAt": "2022-10-25T16:43:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "You need to add an indicator and make sure it indicates the area you want to refine",
                          "url": "https://github.com/idaholab/moose/discussions/22495#discussioncomment-3962460",
                          "updatedAt": "2022-10-25T16:54:34Z",
                          "publishedAt": "2022-10-25T16:54:33Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "abc-hy"
                          },
                          "bodyText": "how to add indicator?",
                          "url": "https://github.com/idaholab/moose/discussions/22495#discussioncomment-3962470",
                          "updatedAt": "2022-10-25T16:55:12Z",
                          "publishedAt": "2022-10-25T16:55:12Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "https://mooseframework.inl.gov/syntax/Adaptivity/index.html\nhttps://mooseframework.inl.gov/syntax/Adaptivity/Indicators/index.html\nhttps://mooseframework.inl.gov/syntax/Adaptivity/Markers/index.html\nmaybe this marker is exactly what you want\nhttps://mooseframework.inl.gov/source/markers/BoundaryMarker.html",
                          "url": "https://github.com/idaholab/moose/discussions/22495#discussioncomment-3962531",
                          "updatedAt": "2022-10-25T16:58:46Z",
                          "publishedAt": "2022-10-25T16:58:45Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Definition of density for large strain problems (UpdatedLagrangian formulation)",
          "author": {
            "login": "saturn00000"
          },
          "bodyText": "Dear MOOSE Team,\nas you can see in the attached picture. if we try to solve heat transfer problems at large deformations (_\"strain = FINITE\", UpdatedLagrangian formulation), do we need to modify the density \\rho in the codes?\ne.g.\n_rho[_qp] ->  _rho[_qp]*det(F)\nor\n_rho[_qp] ->  _rho[_qp]*J \n[Modules/TensorMechanics/Master]\n[all]\n# This block adds all of the proper Kernels, strain calculators, and Variables\n# for TensorMechanics in the correct coordinate system (autodetected)\nadd_variables = true\nstrain = FINITE\neigenstrain_names = eigenstrain\nuse_automatic_differentiation = true\ngenerate_output = 'vonmises_stress elastic_strain_xx elastic_strain_yy strain_xx strain_yy'\n[]\n[]\n(ref: moose\\tutorials\\darcy_thermo_mech\\step09_mechanics\\problems)",
          "url": "https://github.com/idaholab/moose/discussions/22467",
          "updatedAt": "2022-11-15T18:11:04Z",
          "publishedAt": "2022-10-22T00:20:35Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "hugary1995"
                  },
                  "bodyText": "You have three choices:\n\nIn the reference configuration, implement _test[_i][_qp] * _rho[_qp] * _e_dot[_qp]  * _F[_qp].det().\nIn the reference configuration, implement _test[_i][_qp] * _rho_0[_qp] * _e_dot[_qp]. This is the right half of your picture.\nIn the current (deformed) configuration, implement _test[_i][_qp] * _rho[_qp] * _e_dot[_qp]. This is the left half of your picture.\n\nTo integrate on the undisplaced mesh, you set use_displaced_mesh = false. To integrate on the displaced mesh, you set use_displaced_mesh = true. In cases 1 and 3, you will specify the density of the material in the deformed configuration, e.g. \\rho. In case 2, you will specify the density of the material in the reference configuration, e.g. \\rho_0.\nAs you can see, cases 2 and 3 have the same functional form. So that's what most moose objects offer, as you can easily switch between them using use_displaced_mesh. Case 1 is still useful if you don't want to keep track of the displaced mesh when you only have the measurement of the density in the deformed configuration.",
                  "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3937986",
                  "updatedAt": "2022-10-22T01:03:20Z",
                  "publishedAt": "2022-10-22T00:49:14Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "By \"Lagrangian formulation\", are you referring to the new system in tensor mechanics, e.g. new_system = true in the action? We always do solid mechanics using a Lagrangian description, at least in the tensor_mechanics module. Though sometimes we distinguish between total Lagrangian and updated Lagrangian.",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3937993",
                          "updatedAt": "2022-10-22T00:53:33Z",
                          "publishedAt": "2022-10-22T00:53:32Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "saturn00000"
                          },
                          "bodyText": "Dear @hugary1995\nfor UpdatedLagrangian formulation in Moose, you may see moose\\tutorials\\darcy_thermo_mech\\step09_mechanics\\problems\\step9.i\nIn step9.i,  the density parameters are defined in the reference configuration (i.e.  \\rho_{0}). These density paramters in step9.i are \\rho_{0}, not \\rho_{t}.\nAs you know, if we use UpdatedLagrangian formulation in MOOSE, we need to use \\rho_{t}, not \\rho_{0}...",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3938063",
                          "updatedAt": "2022-10-22T01:21:37Z",
                          "publishedAt": "2022-10-22T01:21:36Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "That probably is an oversight. Is this from a tutorial you were trying to follow? If so, can you give me the link to that tutorial? I'll create an issue if I can confirm this.",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3938091",
                          "updatedAt": "2022-10-22T01:33:03Z",
                          "publishedAt": "2022-10-22T01:33:03Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "saturn00000"
                          },
                          "bodyText": "@hugary1995 the link to the tutorial: [https://github.com/idaholab/moose/blob/next/tutorials/darcy_thermo_mech/step09_mechanics/problems/step9.i]\nWe may note that:\n1.)  in your \"raccoon\" modules,  total Lagrangian is used, therefore, \\rho_{0} is okay, as we do everything in the reference configuration\n2.) But for  [Modules/TensorMechanics/Master]\n[all]\nstrain = FINITE\n...\n[]\nUpdatedLagrangian formulation is used, thus everything in the deformed configuration.  \\rho_{0} is NOT okay, OR?",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3939642",
                          "updatedAt": "2022-10-22T11:57:31Z",
                          "publishedAt": "2022-10-22T11:57:30Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "UpdatedLagrangian formulation is used, thus everything in the deformed configuration.\n\nThis statement is not entirely correct. We still have the freedom to perform the integration on whichever configuration we like.\n\nIn step9.i, the density parameters are defined in the reference configuration (i.e. \\rho_{0}).\n\nI'm not sure I follow. Why do you think the density values in that input file are \\rho_0?",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3940961",
                          "updatedAt": "2022-10-22T18:01:38Z",
                          "publishedAt": "2022-10-22T18:01:38Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "saturn00000"
                          },
                          "bodyText": "UpdatedLagrangian formulation is used, thus everything in the deformed configuration.\n\nThis statement is not entirely correct. We still have the freedom to perform the integration on whichever configuration we like.\n\nis  the updatedLagrangian formulation  used in step9.i?  or NOT ?\n[Modules/TensorMechanics/Master]\n[all]\nstrain = FINITE\n...\n[]\nIf yes,  this statement is entirely correct in this case.\n\n\nIn step9.i, the density parameters are defined in the reference configuration (i.e. \\rho_{0}).\n\nI'm not sure I follow. Why do you think the density values in that input file are \\rho_0?\n\ncan you find line 126 in step9.i:   density_file = data/water_density.csv\nhere we define the density ... ...\nhow to define the density value in the input file for solving the updatedLagrangian formulation problems in MOOSE?\nPlease note that the density \\rho for large deformation problems is NOT constant in case of  the updatedLagrangian formulation...",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3941213",
                          "updatedAt": "2022-10-22T19:35:25Z",
                          "publishedAt": "2022-10-22T19:21:34Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "The tutorial is doing the right thing (case 2 in my original answer).",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3950367",
                          "updatedAt": "2022-10-24T12:53:48Z",
                          "publishedAt": "2022-10-24T12:53:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "saturn00000"
                          },
                          "bodyText": "The updatedLagrangian formulation is used in step9.i (the tutorial you mean)...\nIf the updatedLagrangian formulation is used in this case, why is the density \\rho constant?\nPlease see",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3954428",
                          "updatedAt": "2022-10-24T19:54:43Z",
                          "publishedAt": "2022-10-24T19:47:50Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "saturn00000"
                          },
                          "bodyText": "Hello @hugary1995\nstep9.i may need some modifications for , e.g.\n...\n    density /= detF;\n  }\n\n  _density[_qp] = density;\n\ndensity /= detF;\nRef : Density.C and  power_law_creep_restart1.i in MOOSE",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3956328",
                          "updatedAt": "2022-10-25T02:12:14Z",
                          "publishedAt": "2022-10-25T02:12:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "The implementation in Density.C is also correct. It defines \\rho in the deformed configuration.\nAgain, in which configuration you choose to integrate the kernel is irrelevant to the objective frame.",
                          "url": "https://github.com/idaholab/moose/discussions/22467#discussioncomment-3956658",
                          "updatedAt": "2022-10-25T03:27:11Z",
                          "publishedAt": "2022-10-25T03:27:10Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "why there is no coupledVectorNeighborValue?",
          "author": {
            "login": "dingqiushi"
          },
          "bodyText": "I can find coupledNeighborValue() function in moose. But I need to couple vector value in my kernel. Is there any way to achieve this? I have not find fuction coupledVectorNeighborValue.",
          "url": "https://github.com/idaholab/moose/discussions/22473",
          "updatedAt": "2022-10-24T12:47:31Z",
          "publishedAt": "2022-10-23T10:48:00Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nSo you are using a vector variable?\nI'm not sure why we dont have that one but we have:\nadCoupledVectorNeighborValue\n\nand you can always retrieve the value from an AD number\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/22473#discussioncomment-3944140",
                  "updatedAt": "2022-10-23T14:53:55Z",
                  "publishedAt": "2022-10-23T14:53:55Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "dingqiushi"
                          },
                          "bodyText": "Thank you.\nI am using vector variable. But not AD number. I find  CZMMaterialBase retrieve neighbor displacements vector value like:\nInputParameters\nCZMMaterialBase::validParams()\n{\n  InputParameters params = InterfaceMaterial::validParams();\n\n  params.addClassDescription(\"Base class for cohesive zone mateirla models\");\n  params.addRequiredCoupledVar(\"displacements\",\n                               \"The string of displacements suitable for the problem statement\");\n  return params;\n}\n\nCZMMaterialBase::CZMMaterialBase(const InputParameters & parameters)\n  : InterfaceMaterial(parameters),\n    _normals(_assembly.normals()),\n    _ndisp(coupledComponents(\"displacements\")),\n    _disp(_ndisp),\n    _disp_neighbor(_ndisp),\n    _displacement_jump_global(declareProperty<RealVectorValue>(\"displacement_jump_global\")),\n    _displacement_jump(declareProperty<RealVectorValue>(\"displacement_jump\")),\n    _traction_global(declareProperty<RealVectorValue>(\"traction_global\")),\n    _traction(declareProperty<RealVectorValue>(\"traction\")),\n    _traction_derivatives_global(declareProperty<RankTwoTensor>(\"traction_derivatives_global\")),\n    _traction_derivatives(declareProperty<RankTwoTensor>(\"traction_derivatives\"))\n{\n  if (_ndisp > 3 || _ndisp < 1)\n    mooseError(\"the CZM material requires 1, 2 or 3 displacement variables\");\n\n  if (getParam<bool>(\"use_displaced_mesh\") == true)\n    mooseError(\"This material cannot be used with use_displaced_mesh = true\");\n\n  // initializing the displacement vectors\n  for (unsigned int i = 0; i < _ndisp; ++i)\n  {\n    _disp[i] = &coupledValue(\"displacements\", i);\n    _disp_neighbor[i] = &coupledNeighborValue(\"displacements\", i);\n  }\n}\n\nCan I use the same method to couple neighbor vector value in my kernel?",
                          "url": "https://github.com/idaholab/moose/discussions/22473#discussioncomment-3946421",
                          "updatedAt": "2022-10-24T01:19:57Z",
                          "publishedAt": "2022-10-24T01:19:31Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Yes, it s ok to retrieve the AD coupled value. When you use it you can do var.value() to retrieve the number\nEither that or you add this coupledVectorNeighborValue routine to MOOSE. It wont be too hard since the AD version exists already",
                          "url": "https://github.com/idaholab/moose/discussions/22473#discussioncomment-3946494",
                          "updatedAt": "2022-10-24T01:35:06Z",
                          "publishedAt": "2022-10-24T01:35:06Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "There might be a misunderstanding in terminology. Displacement is a vector, yes -- that's how I would say that in maths... But in MOOSE, a \"vector variable\" has a very specific meaning. A vector variable in MOOSE is a variable that has exactly three components, for example of family LAGRANGE_VEC. There are then apparently two ways of defining the displacement variables in MOOSE:\n\nAs a vector variable:\n\n[disp]\n  order = FIRST\n  family = LAGRANGE_VEC\n[]\n\nAs three variables:\n\n[disp_x]\n  order = FIRST\n  family = LAGRANGE\n[]\n[disp_y]\n  order = FIRST\n  family = LAGRANGE\n[]\n[disp_z]\n  order = FIRST\n  family = LAGRANGE\n[]\nIn the tensor_mechanics module, we always do option 2, in which case we need to loop over the components like in the code you pasted above:\nfor (unsigned int i = 0; i < _ndisp; ++i)\n    _disp[i] = &coupledValue(\"displacements\", i);\nor use an equivalent shortcut:\n_disp = coupledValues(\"displacements\");\nSo you'll want to do something similar if you choose option 2.\nYou need coupledVectorValue and/or coupledVectorNeighborValue only if you are doing option 1.",
                          "url": "https://github.com/idaholab/moose/discussions/22473#discussioncomment-3950313",
                          "updatedAt": "2022-10-24T12:47:31Z",
                          "publishedAt": "2022-10-24T12:47:30Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}