{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyNC0wNy0xNlQxNToxMzo1OS0wNjowMM4AaY2a"
    },
    "edges": [
      {
        "node": {
          "title": "MOOSE on Linux will not \"release\" cores after simulation is done",
          "author": {
            "login": "jackeggemeyer"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nI am currently running MOOSE on a Linux desktop, and I use VS code to edit my kernel and input files, as well as enter commands into the terminal. However, since I updated MOOSE and Linux, after the first simulation I ran, MOOSE never \"releases\" the cores. This means the cores assigned to that simulation remain at 100% usage even after the simulation is ended. If I start another simulation in MOOSE, it doesn't use the cores that were already allocated to MOOSE in the previous simulation; it uses other available cores. So if I run simulations back to back without restarting the terminal or my entire computer occasionally, my CPU usage gets pinned to 100% very quickly. The screenshot below is after I ran one simulation on 6 cores, ended the simulation, and then started another 6-core simulation. After I ended the 2nd simulation, 12 cores still remained allocated under moose/VS code. This also occurs if I use the terminal outside of VS Code.\nI know Linux or MOOSE could cause this issue, but I figured this was the best place to start. I don't know how to give more information about the problem so please let me know what more information would be helpful. It's annoying to have to restart MOOSE every time.\nThank you for the Help!\n\nThen after I close the terminal all the cores are released:",
          "url": "https://github.com/idaholab/moose/discussions/28122",
          "updatedAt": "2024-07-18T15:50:05Z",
          "publishedAt": "2024-07-12T16:45:00Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nHow did you end the simulation ?\nWith ctrl C?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10045708",
                  "updatedAt": "2024-07-14T22:25:02Z",
                  "publishedAt": "2024-07-14T22:25:01Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "Yes, I am using ctrl C to end the program. Is there a better way to do that?",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10051977",
                          "updatedAt": "2024-07-15T14:34:23Z",
                          "publishedAt": "2024-07-15T14:34:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "ctrl-c should work though... Something else is happening.\nHow are you launching the executable?",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10052065",
                          "updatedAt": "2024-07-15T14:40:47Z",
                          "publishedAt": "2024-07-15T14:40:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "I launch my input files like this:\nmpiexec -n 6 ./wombat-opt -i input/07-12/sinkoppositeMOD.i\nAny issues with this?",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10052112",
                          "updatedAt": "2024-07-15T14:43:58Z",
                          "publishedAt": "2024-07-15T14:43:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "Not on my machine. Not with moose_test-opt anyway. Can you confirm this happens with the MOOSE test app?",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10052662",
                          "updatedAt": "2024-07-15T15:20:39Z",
                          "publishedAt": "2024-07-15T15:20:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "I got to the test folder and tried running my input file, but it doesn't work; says it's missing a lot of kernels. What file should I run to do this test?\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/moose/test$ mpiexec -n 6 ./moose_test-opt -i",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10052971",
                          "updatedAt": "2024-07-15T15:49:58Z",
                          "publishedAt": "2024-07-15T15:49:31Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "cd ~/projects/moose/test/tests/kernels/simple_diffusion\nmpiexec -n 6 ../../../moose_test-opt -i simple_diffusion.i\n(or any input files you find in ~/projects/moose/test/tests/* will suffice)\nEdit:\nThe above test is super quick. So you might not even have time to ctl-c it. In this case, add some refinement to slow it down:\nmpiexec -n 6 ../../../moose_test-opt -i simple_diffusion.i -r 5",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10053023",
                          "updatedAt": "2024-07-15T15:58:07Z",
                          "publishedAt": "2024-07-15T15:57:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "Odd, that worked perfectly everytime, it released the cores when I used ctrl+c. This seems to only happen to my applications. I tried doing it in VScode's terminal as well to see if that was the factor and it was not. It must be my custom app which I have only added a kernel to the phase field model. Is there a way I can provide more information? I don't even know at this point.",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10054444",
                          "updatedAt": "2024-07-15T18:37:28Z",
                          "publishedAt": "2024-07-15T18:37:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "Is your application available publicly? I myself know next to nothing about C++... but perhaps one of our other developers...",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10054505",
                          "updatedAt": "2024-07-15T18:43:48Z",
                          "publishedAt": "2024-07-15T18:43:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "I am also not a coding person, so I could never get my application to be \"available\" on github(I think linux makes it difficult). However, I have added two files to create one kernel that works with the phase field model. I have pasted them below but I don't see how these would affect the MPI.\nH file:\n#pragma once\n\n#include \"DerivativeMaterialInterface.h\"\n#include \"Kernel.h\"\n#include \"Material.h\"\n#include \"JvarMapInterface.h\"\n\nclass GrandPotentialRecombination : public DerivativeMaterialInterface<JvarMapInterfaceBase<Kernel>>\n{\npublic:\n  static InputParameters validParams();\n  GrandPotentialRecombination(const InputParameters & parameters);\n  virtual void initialSetup() override;\n\nprotected:\n  virtual Real computeQpResidual() override;\n  virtual Real computeQpJacobian() override;\n  // virtual Real computeQpOffDiagJacobian(unsigned int jvar) override;\n\n  const VariableValue & _v_var;\n  const unsigned int _v_var_num;\n  const MaterialProperty<Real> & Rho;\n  const MaterialProperty<Real> & dRhodv;\n  const MaterialProperty<Real> & Rhos;\n  const MaterialProperty<Real> & dRhosdv;\n  const MaterialProperty<Real> & hm;\n  const MaterialProperty<Real> & dhmdv;\n  const MaterialProperty<Real> & kiv;\n\n  // std::vector<const MaterialProperty<Real> *> _dRhodarg;\n  // std::vector<const MaterialProperty<Real> *> _dRhosdarg;\n  // std::vector<const MaterialProperty<Real> *> _dhmdarg;\n};\n\nC file:\n#include \"GrandPotentialRecombination.h\"\n\nregisterMooseObject(\"PhaseFieldApp\", GrandPotentialRecombination);\n\nInputParameters\nGrandPotentialRecombination::validParams()\n{\n  InputParameters params = DerivativeMaterialInterface<JvarMapKernelInterface<Kernel>>::validParams();\n  params.addClassDescription(\"Adds sink and recombination to grand potential multi-phase model.\");\n  params.addRequiredParam<MaterialPropertyName>(\"Rho\", \"Material property for Rho.\");\n  params.addRequiredParam<MaterialPropertyName>(\"Rhos\", \"Material property for Rhos.\");\n  params.addRequiredParam<MaterialPropertyName>(\"hm\", \"Material property for the switching function h.\");\n  params.addRequiredParam<MaterialPropertyName>(\"kiv\", \"Material property for the rate of vacancy-interstitial recombination.\");\n  params.addCoupledVar(\"coupled_variables\", \"Order parameter variable and free energy of opposite rho.\");\n  return params;\n}\n\nGrandPotentialRecombination::GrandPotentialRecombination(const InputParameters & parameters)\n  : DerivativeMaterialInterface<JvarMapInterfaceBase<Kernel>>(parameters),\n    _v_var(coupledValue(\"coupled_variables\")),\n    _v_var_num(_coupled_moose_vars.size()),\n    Rho(getMaterialProperty<Real>(\"Rho\")),\n    dRhodv(getMaterialPropertyDerivative<Real>(\"Rho\", _var.name())),\n    Rhos(getMaterialProperty<Real>(\"Rhos\")),\n    dRhosdv(getMaterialPropertyDerivative<Real>(\"Rhos\", _var.name())),\n    hm(getMaterialProperty<Real>(\"hm\")),\n    dhmdv(getMaterialPropertyDerivative<Real>(\"hm\", _var.name())),\n    kiv(getMaterialProperty<Real>(\"kiv\"))\n    // _dRhodarg(_v_var_num),\n    // _dRhosdarg(_v_var_num),\n    // _dhmdarg(_v_var_num)\n{\n//   // fetch derivatives\n//   for (unsigned int i = 0; i < _v_var_num; ++i)\n//     _dRhodarg[i] = &getMaterialPropertyDerivative<Real>(\"Rho\", _coupled_moose_vars[i]->name()),\n//     _dRhosdarg[i] = &getMaterialPropertyDerivative<Real>(\"Rhos\", _coupled_moose_vars[i]->name()),\n//     _dhmdarg[i] = &getMaterialPropertyDerivative<Real>(\"hm\", _coupled_moose_vars[i]->name());\n }\n\nvoid\nGrandPotentialRecombination::initialSetup()\n{\n  // validateNonlinearCoupling<Real>(\"Rho\");\n  // validateNonlinearCoupling<Real>(\"hm\");\n  // validateNonlinearCoupling<Real>(\"Rhos\");\n}\n\nReal\nGrandPotentialRecombination::computeQpResidual()\n{\n  return hm[_qp] * kiv[_qp] * Rho[_qp] * Rhos[_qp];\n}\n\nReal\nGrandPotentialRecombination::computeQpJacobian()\n{\n  return dhmdv[_qp] * kiv[_qp] * Rho[_qp] * Rhos[_qp] * _phi[_j][_qp] + \n         hm[_qp] * kiv[_qp] * dRhodv[_qp] * Rhos[_qp] * _phi[_j][_qp] + \n         hm[_qp] * kiv[_qp] * Rho[_qp] * dRhosdv[_qp] * _phi[_j][_qp];\n}\n\n// Real\n// GrandPotentialRecombination::computeQpOffDiagJacobian(unsigned int jvar)\n// {\n//     const unsigned int cvar = mapJvarToCvar(jvar);\n  \n//     Real sum = (*_dhmdarg[cvar])[_qp] * kiv[_qp] * Rho[_qp] * Rhos[_qp] +\n//                hm[_qp] * kiv[_qp] * (*_dRhodarg[cvar])[_qp] * Rhos[_qp] +\n//                hm[_qp] * kiv[_qp] * Rho[_qp] * (*_dRhosdarg[cvar])[_qp];\n\n//     return _phi[_j][_qp] * sum * _test[_i][_qp];\n  \n// }",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063163",
                          "updatedAt": "2024-07-16T14:03:54Z",
                          "publishedAt": "2024-07-16T14:03:53Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "loganharbour"
                  },
                  "bodyText": "When you run with MPI, the MPI process manager is what manages the rest of the processes running. When you send ctrl+c, it sends a kill command to rank 0, but not the others. MPI on rank 0 will receive the kill signal, and will send a kill signal to the remaining processes. Which means what's happening here is that rank 0 isn't telling the other ranks to die.\nWhat MPI implementation are you using? Is it the one from our basic install instructions using conda?",
                  "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10055043",
                  "updatedAt": "2024-07-15T19:51:46Z",
                  "publishedAt": "2024-07-15T19:51:45Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "I am using whatever the stock MPI that comes with the standard implementation of MOOSE. I am not close to qualified to be messing with that kind of stuff. All I have added is a kernel, which adds some functionality to the Phase Field Model. I don't know how that would affect the MPI, other than omitting something that makes it compatible with parallel processes.\nH file:\n#pragma once\n\n#include \"DerivativeMaterialInterface.h\"\n#include \"Kernel.h\"\n#include \"Material.h\"\n#include \"JvarMapInterface.h\"\n\nclass GrandPotentialRecombination : public DerivativeMaterialInterface<JvarMapInterfaceBase<Kernel>>\n{\npublic:\n  static InputParameters validParams();\n  GrandPotentialRecombination(const InputParameters & parameters);\n  virtual void initialSetup() override;\n\nprotected:\n  virtual Real computeQpResidual() override;\n  virtual Real computeQpJacobian() override;\n  // virtual Real computeQpOffDiagJacobian(unsigned int jvar) override;\n\n  const VariableValue & _v_var;\n  const unsigned int _v_var_num;\n  const MaterialProperty<Real> & Rho;\n  const MaterialProperty<Real> & dRhodv;\n  const MaterialProperty<Real> & Rhos;\n  const MaterialProperty<Real> & dRhosdv;\n  const MaterialProperty<Real> & hm;\n  const MaterialProperty<Real> & dhmdv;\n  const MaterialProperty<Real> & kiv;\n\n  // std::vector<const MaterialProperty<Real> *> _dRhodarg;\n  // std::vector<const MaterialProperty<Real> *> _dRhosdarg;\n  // std::vector<const MaterialProperty<Real> *> _dhmdarg;\n};\n\n\nC File:\n#include \"GrandPotentialRecombination.h\"\n\nregisterMooseObject(\"PhaseFieldApp\", GrandPotentialRecombination);\n\nInputParameters\nGrandPotentialRecombination::validParams()\n{\n  InputParameters params = DerivativeMaterialInterface<JvarMapKernelInterface<Kernel>>::validParams();\n  params.addClassDescription(\"Adds sink and recombination to grand potential multi-phase model.\");\n  params.addRequiredParam<MaterialPropertyName>(\"Rho\", \"Material property for Rho.\");\n  params.addRequiredParam<MaterialPropertyName>(\"Rhos\", \"Material property for Rhos.\");\n  params.addRequiredParam<MaterialPropertyName>(\"hm\", \"Material property for the switching function h.\");\n  params.addRequiredParam<MaterialPropertyName>(\"kiv\", \"Material property for the rate of vacancy-interstitial recombination.\");\n  params.addCoupledVar(\"coupled_variables\", \"Order parameter variable and free energy of opposite rho.\");\n  return params;\n}\n\nGrandPotentialRecombination::GrandPotentialRecombination(const InputParameters & parameters)\n  : DerivativeMaterialInterface<JvarMapInterfaceBase<Kernel>>(parameters),\n    _v_var(coupledValue(\"coupled_variables\")),\n    _v_var_num(_coupled_moose_vars.size()),\n    Rho(getMaterialProperty<Real>(\"Rho\")),\n    dRhodv(getMaterialPropertyDerivative<Real>(\"Rho\", _var.name())),\n    Rhos(getMaterialProperty<Real>(\"Rhos\")),\n    dRhosdv(getMaterialPropertyDerivative<Real>(\"Rhos\", _var.name())),\n    hm(getMaterialProperty<Real>(\"hm\")),\n    dhmdv(getMaterialPropertyDerivative<Real>(\"hm\", _var.name())),\n    kiv(getMaterialProperty<Real>(\"kiv\"))\n    // _dRhodarg(_v_var_num),\n    // _dRhosdarg(_v_var_num),\n    // _dhmdarg(_v_var_num)\n{\n//   // fetch derivatives\n//   for (unsigned int i = 0; i < _v_var_num; ++i)\n//     _dRhodarg[i] = &getMaterialPropertyDerivative<Real>(\"Rho\", _coupled_moose_vars[i]->name()),\n//     _dRhosdarg[i] = &getMaterialPropertyDerivative<Real>(\"Rhos\", _coupled_moose_vars[i]->name()),\n//     _dhmdarg[i] = &getMaterialPropertyDerivative<Real>(\"hm\", _coupled_moose_vars[i]->name());\n }\n\nvoid\nGrandPotentialRecombination::initialSetup()\n{\n  // validateNonlinearCoupling<Real>(\"Rho\");\n  // validateNonlinearCoupling<Real>(\"hm\");\n  // validateNonlinearCoupling<Real>(\"Rhos\");\n}\n\nReal\nGrandPotentialRecombination::computeQpResidual()\n{\n  return hm[_qp] * kiv[_qp] * Rho[_qp] * Rhos[_qp];\n}\n\nReal\nGrandPotentialRecombination::computeQpJacobian()\n{\n  return dhmdv[_qp] * kiv[_qp] * Rho[_qp] * Rhos[_qp] * _phi[_j][_qp] + \n         hm[_qp] * kiv[_qp] * dRhodv[_qp] * Rhos[_qp] * _phi[_j][_qp] + \n         hm[_qp] * kiv[_qp] * Rho[_qp] * dRhosdv[_qp] * _phi[_j][_qp];\n}\n\n// Real\n// GrandPotentialRecombination::computeQpOffDiagJacobian(unsigned int jvar)\n// {\n//     const unsigned int cvar = mapJvarToCvar(jvar);\n  \n//     Real sum = (*_dhmdarg[cvar])[_qp] * kiv[_qp] * Rho[_qp] * Rhos[_qp] +\n//                hm[_qp] * kiv[_qp] * (*_dRhodarg[cvar])[_qp] * Rhos[_qp] +\n//                hm[_qp] * kiv[_qp] * Rho[_qp] * (*_dRhosdarg[cvar])[_qp];\n\n//     return _phi[_j][_qp] * sum * _test[_i][_qp];\n  \n// }",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063140",
                          "updatedAt": "2024-07-16T14:01:23Z",
                          "publishedAt": "2024-07-16T14:00:22Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "what does which mpirun return? same for mpicxx",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063188",
                          "updatedAt": "2024-07-16T14:06:36Z",
                          "publishedAt": "2024-07-16T14:06:36Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "Is this what your looking for?\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$ which mpirun\n/home/jeggeme/miniforge/envs/moose/bin/mpirun\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$ which mpicxx\n/home/jeggeme/miniforge/envs/moose/bin/mpicxx\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$ \n\nAlso did this if this helps:\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$ mpicxx\nError: Command line argument is needed!\nThis script (/home/jeggeme/miniforge/envs/moose/bin/mpicxx) is being called recursively, check that MPICH_CXX does not refer to mpicxx.\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$ mpirun\n[mpiexec@jeggeme-OptiPlex-Tower-7010] HYDU_create_proxy_list (utils/alloc/alloc.c:436): Missing executable.\n[mpiexec@jeggeme-OptiPlex-Tower-7010] main (ui/mpich/mpiexec.c:263): unable to create proxy list\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063224",
                          "updatedAt": "2024-07-16T14:09:49Z",
                          "publishedAt": "2024-07-16T14:08:58Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "yes.\nnow mpirun --version, same for mpicxx",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063272",
                          "updatedAt": "2024-07-16T14:13:36Z",
                          "publishedAt": "2024-07-16T14:13:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "Sweet thank you!\nMPIRUN:\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$ mpirun --version\nHYDRA build details:\n    Version:                                 4.0.2\n    Release Date:                            Thu Apr  7 12:34:45 CDT 2022\n    CC:                              x86_64-conda-linux-gnu-cc -I/home/jeggeme/miniforge/envs/moose/include -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/jeggeme/miniforge/envs/moose/include -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/jeggeme/miniforge/envs/moose/include -I/home/jeggeme/miniforge/envs/moose/include -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -L/home/jeggeme/miniforge/envs/moose/lib -Wl,-rpath,/home/jeggeme/miniforge/envs/moose/lib \n    Configure options:                       '--disable-option-checking' '--prefix=/home/jeggeme/miniforge/envs/moose' '--disable-dependency-tracking' '--enable-cxx' '--enable-fortran' '--disable-wrapper-rpath' '--disable-opencl' '--with-device=ch3' 'build_alias=x86_64-conda-linux-gnu' 'host_alias=x86_64-conda-linux-gnu' 'MPICHLIB_CFLAGS=-march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' 'MPICHLIB_CPPFLAGS=-DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/jeggeme/miniforge/envs/moose/include -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/jeggeme/miniforge/envs/moose/include' 'MPICHLIB_CXXFLAGS=-fvisibility-inlines-hidden -std=c++17 -fmessage-length=0 -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' 'MPICHLIB_FFLAGS=-march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' 'MPICHLIB_FCFLAGS=-march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' 'CC=x86_64-conda-linux-gnu-cc' 'CFLAGS=-I/home/jeggeme/miniforge/envs/moose/include -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' 'LDFLAGS=-L/home/jeggeme/miniforge/envs/moose/lib -Wl,-rpath,/home/jeggeme/miniforge/envs/moose/lib' 'CPPFLAGS=-I/home/jeggeme/miniforge/envs/moose/include -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/jeggeme/miniforge/envs/moose/include -DNDEBUG -D_FORTIFY_SOURCE=2 -O2 -isystem /home/jeggeme/miniforge/envs/moose/include' 'CPP=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/_build_env/bin/x86_64-conda-linux-gnu-cpp' 'CXX=x86_64-conda-linux-gnu-c++' 'CXXFLAGS=-I/home/jeggeme/miniforge/envs/moose/include -fvisibility-inlines-hidden -std=c++17 -fmessage-length=0 -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' 'FC=x86_64-conda-linux-gnu-gfortran' 'FCFLAGS=-I/home/jeggeme/miniforge/envs/moose/include -fallow-argument-mismatch -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' 'FFLAGS=-I/home/jeggeme/miniforge/envs/moose/include -fallow-argument-mismatch -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix -march=nocona -mtune=haswell -ftree-vectorize -fPIC -fstack-protector-strong -fno-plt -O2 -ffunction-sections -pipe -isystem /home/jeggeme/miniforge/envs/moose/include -fdebug-prefix-map=/home/conda/feedstock_root/build_artifacts/mpich-mpi_1649456688865/work=/usr/local/src/conda/mpich-4.0.2 -fdebug-prefix-map=/home/jeggeme/miniforge/envs/moose=/usr/local/src/conda-prefix' '--cache-file=/dev/null' '--srcdir=.' 'LIBS='\n    Process Manager:                         pmi\n    Launchers available:                     ssh rsh fork slurm ll lsf sge manual persist\n    Topology libraries available:            hwloc\n    Resource management kernels available:   user slurm ll lsf sge pbs cobalt\n    Demux engines available:                 poll select\n\n\nMPICXX:\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$ mpicxx --version\nx86_64-conda-linux-gnu-c++ (conda-forge gcc 10.4.0-19) 10.4.0\nCopyright (C) 2020 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n(moose) jeggeme@jeggeme-OptiPlex-Tower-7010:~/projects/wombat$",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063337",
                          "updatedAt": "2024-07-16T14:19:43Z",
                          "publishedAt": "2024-07-16T14:19:42Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "ok so it's mpich 4.0.2\nwe dont have any reported issue on this\na quick workaround would be to use a killall on your process\nsomething like\nkillall -s 9 -e wombat-opt",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063408",
                          "updatedAt": "2024-07-16T14:26:05Z",
                          "publishedAt": "2024-07-16T14:26:04Z",
                          "isAnswer": true
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "thank you so much! Should I just use that until a future MOOSE update hopefully fixes this?",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063532",
                          "updatedAt": "2024-07-16T14:39:26Z",
                          "publishedAt": "2024-07-16T14:39:25Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "we are adding an openmpi option soon so you can try this soon too",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10063549",
                          "updatedAt": "2024-07-16T14:40:29Z",
                          "publishedAt": "2024-07-16T14:40:29Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "jackeggemeyer"
                          },
                          "bodyText": "I have found another weird thing about Moose/Conda holding onto cores. It will only happen if an instance of paraview is open. This is a Conda issue more than a moose issue. Because today, when I closed Paravuew but did not end the moose simulation, it released a bunch of cores, and MOOSE held onto the other 6 it was allocated. (This is all in Linux)",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10076486",
                          "updatedAt": "2024-07-17T18:09:56Z",
                          "publishedAt": "2024-07-17T18:09:36Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I've never heard of this kind of behavior being so common on a machine before...\nThe OpenMPI variant packages are now available if you wish to try those:\nconda deactivate\nconda activate base\nconda env remove -n moose\nconda create -n moose moose-dev openmpi",
                          "url": "https://github.com/idaholab/moose/discussions/28122#discussioncomment-10083672",
                          "updatedAt": "2024-07-18T11:37:49Z",
                          "publishedAt": "2024-07-18T11:37:49Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Offline installation problem",
          "author": {
            "login": "lucuo"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n I have consulted the Posting Guidelines.\n I have searched the Discussions Forum and MOOSE Framework Troubleshooting and have not found what I was looking for\n Q&A Getting Started is the most appropriate category for my question (trouble installing, beginner user, ...)\n\nIssue or question about MOOSE\nAn error is reported when running\n./update_and_rebuild_petsc.sh --skip-submodule-update --with-packages-download-dir=~/projects/downloads\nduring  offline installation. What is the reason\uff1f\n=============================================================================================\n=============================================================================================\n               Configuring SCALAPACK with CMake; this may take several minutes\n=============================================================================================\n=============================================================================================\n              Compiling and installing SCALAPACK; this may take several minutes\n=============================================================================================\n=============================================================================================\n       Trying to download /home/Rookie01/projects/downloads/v7.1.4.tar.gz for STRUMPACK\n=============================================================================================\n=============================================================================================\n               Configuring STRUMPACK with CMake; this may take several minutes\n=============================================================================================\n=============================================================================================\n              Compiling and installing STRUMPACK; this may take several minutes\n=============================================================================================\n\n*********************************************************************************************\n           UNABLE to CONFIGURE with GIVEN OPTIONS (see configure.log for details):\n---------------------------------------------------------------------------------------------\n                               Error running make on  STRUMPACK\n*********************************************************************************************\n\nThere was an error. Exiting...\n\nhere is configure.log\nconfigure.log\n(Optional) code in question / simulation log / errors\nNo response\nEncountering Errors? Please include diagnostic output\nNo response",
          "url": "https://github.com/idaholab/moose/discussions/28160",
          "updatedAt": "2024-07-18T11:57:40Z",
          "publishedAt": "2024-07-17T16:02:12Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "milljm"
                  },
                  "bodyText": "I think your installation of Fortran might be too old:\n-- The CXX compiler identification is GNU 9.3.1\n-- The C compiler identification is GNU 9.3.1\n-- The Fortran compiler identification is GNU 4.8.5\n\nI might be wrong about fortran being too old though. I recall GCC and Fortran versions can differ. \ud83e\udd37\u200d\u2642\ufe0f\nCan you run the following tool:\ncd moose/scripts\n./diagnostics.sh\nIf you can, please refrain from posting images of text.",
                  "url": "https://github.com/idaholab/moose/discussions/28160#discussioncomment-10075597",
                  "updatedAt": "2024-07-17T16:14:40Z",
                  "publishedAt": "2024-07-17T16:14:39Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "lucuo"
                          },
                          "bodyText": "after ./diagnostics.sh\nThe output is as follows\n##################################################################################################\nCompiler(s) (CC CXX FC F77 F90):\n\nCC=/mpich-3.4.2/bin/mpicc\nCC -show:\ngcc -I/mpich-3.4.2/include -L/mpich-3.4.2/lib -Wl,-rpath -Wl,/mpich-3.4.2/lib -Wl,--enable-new-dtags -lmpi\nCC version:     gcc (GCC) 9.3.1 20200408 (Red Hat 9.3.1-2)\n\nCXX=/mpich-3.4.2/bin/mpicxx\nCXX -show:\ng++ -I/mpich-3.4.2/include -L/mpich-3.4.2/lib -lmpicxx -Wl,-rpath -Wl,/mpich-3.4.2/lib -Wl,--enable-new-dtags -lmpi\nCXX version:    g++ (GCC) 9.3.1 20200408 (Red Hat 9.3.1-2)\n\nFC=/mpich-3.4.2/bin/mpif90\nFC -show:\ngfortran -I/mpich-3.4.2/include -I/mpich-3.4.2/include -L/mpich-3.4.2/lib -lmpifort -Wl,-rpath -Wl,/mpich-3.4.2/lib -Wl,--enable-new-dtags -lmpi\nFC version:     GNU Fortran (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44)\n\nF77=/mpich-3.4.2/bin/mpif77\nF77 -show:\ngfortran -I/mpich-3.4.2/include -I/mpich-3.4.2/include -L/mpich-3.4.2/lib -lmpifort -Wl,-rpath -Wl,/mpich-3.4.2/lib -Wl,--enable-new-dtags -lmpi\nF77 version:    GNU Fortran (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44)\n\nF90=/mpich-3.4.2/bin/mpif90\nF90 -show:\ngfortran -I/mpich-3.4.2/include -I/mpich-3.4.2/include -L/mpich-3.4.2/lib -lmpifort -Wl,-rpath -Wl,/mpich-3.4.2/lib -Wl,--enable-new-dtags -lmpi\nF90 version:    GNU Fortran (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44)\n\nOK\n\n##################################################################################################\nPython Sanity Checks\n\nVerify `/usr/bin/env python3 --version` (reporting as: Python 3.6.8),\nmatches versions for: `which python3 && which python`\n\nPython 2.7.5\nFAIL: Python 2.7.5\n/usr/bin/python --version (reporting as ) != Python 3.6.8\n\nThis will likely result in the TestHarness failing. Or WASP/HIT parsing errors.\n\n##################################################################################################\nPython Modules (TestHarness, run-ability)\n\nFAIL:    python module: `packaging` not available\nWARNING: python module: `yaml` not available\nWARNING: python module: `jinja2` not available\n\nFailing Python packages will prevent you from building MOOSE.\nWarning Python packages may cause miscellaneous runtime issues.\n\nEither install the above packages, or perhaps you have yet to activate your\nmoose environment: `conda activate moose`.",
                          "url": "https://github.com/idaholab/moose/discussions/28160#discussioncomment-10075678",
                          "updatedAt": "2024-07-17T16:36:52Z",
                          "publishedAt": "2024-07-17T16:23:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "My guess is that your version of Fortran is too old to build some of the PETSc contribs. It looks like these versions should match (as they do for me):\n[~] which gcc\n/opt/rh/gcc-toolset-12/root/usr/bin/gcc\n\n[~] which gfortran\n/opt/rh/gcc-toolset-12/root/usr/bin/gfortran\n\n[~] gcc --version\ngcc (GCC) 12.2.1 20221121 (Red Hat 12.2.1-7)\nCopyright (C) 2022 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n[~] gfortran --version\nGNU Fortran (GCC) 12.2.1 20221121 (Red Hat 12.2.1-7)\nCopyright (C) 2022 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\n[~]",
                          "url": "https://github.com/idaholab/moose/discussions/28160#discussioncomment-10076058",
                          "updatedAt": "2024-07-17T17:12:15Z",
                          "publishedAt": "2024-07-17T17:12:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "In our containers, we have to perform the following to install and make available GCC and gfortran 12.x for example:\n    dnf install -y gcc-toolset-12 gcc-toolset-12-gcc gcc-toolset-12-gcc-gfortran \\\n        gcc-toolset-12-gcc-c++ gcc-toolset-12-gdb\n\n    source /opt/rh/gcc-toolset-12/enable\nAs we can see, there is a separate package for gfortran. Perhaps all you need to do is install that one package:\ndnf install gcc-toolset-9-gcc-gfortran",
                          "url": "https://github.com/idaholab/moose/discussions/28160#discussioncomment-10076118",
                          "updatedAt": "2024-07-17T17:19:57Z",
                          "publishedAt": "2024-07-17T17:18:29Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lucuo"
                          },
                          "bodyText": "I tried to skip the installation of STRUMPACK, but still got an error.\n...\n...\n         CC arch-moose/obj/src/tao/bound/impls/blmvm/blmvm.o\n         CC arch-moose/obj/src/tao/bound/impls/bqnk/bqnktl.o\n         CC arch-moose/obj/src/tao/bound/impls/bqnk/bqnkls.o\n         CC arch-moose/obj/src/tao/bound/impls/bqnk/bqnk.o\n         CC arch-moose/obj/src/tao/bound/impls/bqnk/bqnktr.o\n         CC arch-moose/obj/src/tao/bound/impls/bnk/bnls.o\n         CC arch-moose/obj/src/tao/constrained/impls/ipm/pdipm.o\n         CC arch-moose/obj/src/tao/bound/impls/bnk/bntr.o\n         CC arch-moose/obj/src/tao/bound/impls/bnk/bntl.o\n         CC arch-moose/obj/src/tao/bound/impls/bqnls/bqnls.o\n         CC arch-moose/obj/src/tao/bound/impls/bnk/bnk.o\n         CC arch-moose/obj/src/tao/bound/impls/tron/tron.o\n         CC arch-moose/obj/src/tao/quadratic/impls/gpcg/gpcg.o\n         CC arch-moose/obj/src/tao/bound/impls/bncg/bncg.o\n         CC arch-moose/obj/src/tao/quadratic/impls/bqpip/bqpip.o\n         CC arch-moose/obj/src/tao/util/tao_util.o\n    CLINKER arch-moose/lib/libpetsc.so.3.20.3\nmake[3]: Leaving directory '/home/Rookie01/project2/moose/petsc'\n*** Building SLEPc ***\nChecking environment... done\nChecking PETSc installation...\nERROR: Unable to link with PETSc\nERROR: See \"arch-moose/lib/slepc/conf/configure.log\" file for details\n**************************ERROR*************************************\nError building SLEPc.\n********************************************************************\nmake[2]: *** [/home/Rookie01/project2/moose/scripts/../petsc/arch-moose/lib/petsc/conf/petscrules:29: slepcbuild] Error 1\nmake[2]: Leaving directory '/home/Rookie01/project2/moose/petsc'\n**************************ERROR*************************************\n  Error during compile, check arch-moose/lib/petsc/conf/make.log\n  Send it and arch-moose/lib/petsc/conf/configure.log to petsc-maint@mcs.anl.gov\n********************************************************************\nmake[1]: *** [all] Error 1\nmake: *** [all] Error 2\nThere was an error. Exiting...\nAre these errors related?\nconfigure.log\nmake.log",
                          "url": "https://github.com/idaholab/moose/discussions/28160#discussioncomment-10081325",
                          "updatedAt": "2024-07-18T07:49:17Z",
                          "publishedAt": "2024-07-18T07:49:16Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I was about to try and reproduce this in a container, but I cannot gain a version of Gfortran that old.\nI really do think you need to install the same version of Fortran, that you have for GCC.\nRocky-8:\nApptainer> gfortran --version\nGNU Fortran (GCC) 8.5.0 20210514 (Red Hat 8.5.0-22)\nCopyright (C) 2018 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n\nYours:\nFortran compiler version: GNU Fortran (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44)\n\nI suspect your binaries are going to be in the following locations (as I was trying to duplicate your issue:\nApptainer> which gcc gfortran\n/opt/rh/gcc-toolset-12/root/usr/bin/gcc\n/usr/bin/gfortran\n(latest GCC 12.x sitting in correct location, while gfortran is old-system version sitting in /usr/bin)",
                          "url": "https://github.com/idaholab/moose/discussions/28160#discussioncomment-10083828",
                          "updatedAt": "2024-07-18T12:00:13Z",
                          "publishedAt": "2024-07-18T11:57:40Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nPlease include the diagnostics output from moose/scripts/diagnostics.sh",
                  "url": "https://github.com/idaholab/moose/discussions/28160#discussioncomment-10075607",
                  "updatedAt": "2024-07-17T16:15:18Z",
                  "publishedAt": "2024-07-17T16:15:18Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "The failed incremental solving in axisymmetric RZ coordinate",
          "author": {
            "login": "TJT-post95"
          },
          "bodyText": "I have a problem which could be solved with total stain (linear elastic) in axisymmetric RZ coordinate, while the solving with incremental strain is failed. Because the plastic deformation will be considered in the following work, so the incremental scheme can not be ignored! Is there any issue with my input card or problem? The followings are my input card and geometry.\n[Mesh]\n  file = metal3.e\n  dim = 2\n[]\n\n[GlobalParams]\n  order = FIRST\n  family = LAGRANGE\n  displacements = 'disp_r disp_z'\n[]\n\n[Variables]\n  [disp_r]\n  []\n  [disp_z]\n  []\n[]\n\n[AuxVariables]\n  [stress_r]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n  [stress_z]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n[]\n\n[Problem]\n  type = FEProblem\n  coord_type = RZ\n[]\n\n[Kernels]\n  [disp_x]\n    type = StressDivergenceRZTensors\n    variable = disp_r\n    component = 0\n  []\n  [disp_y]\n    type = StressDivergenceRZTensors\n    variable = disp_z\n    component = 1\n  []\n[]\n\n[AuxKernels]\n  [stress_r]\n    type = RankTwoAux\n    rank_two_tensor = stress\n    variable = stress_r\n    index_i = 0\n    index_j = 0\n    execute_on = 'TIMESTEP_END'\n  []\n  [stress_z]\n    type = RankTwoAux\n    rank_two_tensor = stress\n    variable = stress_z\n    index_i = 1\n    index_j = 1\n    execute_on = 'TIMESTEP_END'\n  []\n[]\n\n[Functions]\n  [loading]\n    type = ParsedFunction\n    value = 1e6*t\n  []\n[]\n\n[BCs]\n  [in]\n    type = Pressure\n    variable = disp_r\n    boundary = 'in2 in1 in3'\n    function = loading\n    # function = 1e7\n  []\n  [in2]\n    type = Pressure\n    variable = disp_z\n    boundary = 'in2 in1 in3'\n    function = loading\n    # function = 1e7\n  []\n  [bottom_z]\n    type = DirichletBC\n    variable = disp_z\n    value = 0\n    boundary = bottom\n  []\n  [left_r]\n    type = DirichletBC\n    variable = disp_r\n    value = 0\n    boundary = left\n  []\n[]\n\n[Materials]\n  [elasticity_tensor]\n    type = ComputeIsotropicElasticityTensor\n    poissons_ratio = 0.33\n    youngs_modulus = 69e9\n  []\n  [strain]\n    type = ComputeAxisymmetricRZIncrementalStrain\n  []\n  [stress]\n    type = ComputeFiniteStrainElasticStress\n  []\n  # [strain]\n  #   type = ComputeAxisymmetricRZSmallStrain\n  # []\n  # [stress]\n  #   type = ComputeLinearElasticStress\n  # []\n[]\n\n[Executioner]\n  type = Transient\n  # type = Steady\n\n  solve_type = NEWTON\n\n  automatic_scaling = true\n\n  petsc_options = '-snes_ksp_ew'\n  petsc_options_iname = '-pc_type -pc_factor_mat_solver_package -ksp_gmres_restart'\n  petsc_options_value = 'lu superlu_dist 101'\n\n  # controls for linear iterations\n  l_max_its = 100\n  l_tol = 1e-12\n\n  # controls for nonlinear iterations\n  nl_max_its = 200\n  nl_rel_tol = 1e-6\n  nl_abs_tol = 1e-8\n\n  # time control\n  start_time = 0.0\n  dt = 0.05\n  end_time = 10.0\n[]\n\n[Outputs]\n  [out]\n    type = Exodus\n  []\n[]",
          "url": "https://github.com/idaholab/moose/discussions/28159",
          "updatedAt": "2024-07-18T04:43:26Z",
          "publishedAt": "2024-07-17T16:00:23Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nPlease try using the Physics syntax in a separate input to see if you missed anything in the input.\nThen if it still does not work let's look at the simulation log\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10075626",
                  "updatedAt": "2024-07-17T16:17:44Z",
                  "publishedAt": "2024-07-17T16:17:43Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "TJT-post95"
                          },
                          "bodyText": "Thanks for your reply! Sorry, I\u2019m not in front of my computer right now. And the solving in incremental scheme.  the first few incremental steps can converge, while after this the residual will not decrease to meet the tolerance.",
                          "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10075870",
                          "updatedAt": "2024-07-17T16:50:00Z",
                          "publishedAt": "2024-07-17T16:49:59Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "TJT-post95"
                          },
                          "bodyText": "The solution log is as follows.",
                          "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10079571",
                          "updatedAt": "2024-07-18T03:25:07Z",
                          "publishedAt": "2024-07-18T03:25:06Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "It does not look like it's solving much with a constant residual.\nUsing the Physics syntax is a good first step to make sure the input is well formed.",
                          "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10079706",
                          "updatedAt": "2024-07-18T03:48:48Z",
                          "publishedAt": "2024-07-18T03:48:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "TJT-post95"
                          },
                          "bodyText": "Yep. I have updated the input card only with incremental scheme. But the result is bad as shown in log.\n[Mesh]\n  file = test.e\n  dim = 2\n[]\n\n[GlobalParams]\n  order = FIRST\n  family = LAGRANGE\n  displacements = 'disp_r disp_z'\n[]\n\n[Variables]\n  [disp_r]\n  []\n  [disp_z]\n  []\n[]\n\n[AuxVariables]\n  [stress_r]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n  [stress_z]\n    order = CONSTANT\n    family = MONOMIAL\n  []\n[]\n\n[Problem]\n  type = FEProblem\n  coord_type = RZ\n[]\n\n[Kernels]\n  [disp_x]\n    type = StressDivergenceRZTensors\n    variable = disp_r\n    component = 0\n  []\n  [disp_y]\n    type = StressDivergenceRZTensors\n    variable = disp_z\n    component = 1\n  []\n[]\n\n[AuxKernels]\n  [stress_r]\n    type = RankTwoAux\n    rank_two_tensor = stress\n    variable = stress_r\n    index_i = 0\n    index_j = 0\n    execute_on = 'TIMESTEP_END'\n  []\n  [stress_z]\n    type = RankTwoAux\n    rank_two_tensor = stress\n    variable = stress_z\n    index_i = 1\n    index_j = 1\n    execute_on = 'TIMESTEP_END'\n  []\n[]\n\n[Functions]\n  [loading]\n    type = ParsedFunction\n    value = 1e6*t\n  []\n[]\n\n[BCs]\n  [in]\n    type = Pressure\n    variable = disp_r\n    boundary = 'in2 in1 in3'\n    function = loading\n  []\n  [in2]\n    type = Pressure\n    variable = disp_z\n    boundary = 'in2 in1 in3'\n    function = loading\n  []\n  [bottom_z]\n    type = DirichletBC\n    variable = disp_z\n    value = 0\n    boundary = bottom\n  []\n  [left_r]\n    type = DirichletBC\n    variable = disp_r\n    value = 0\n    boundary = left\n  []\n[]\n\n[Materials]\n  [elasticity_tensor]\n    type = ComputeIsotropicElasticityTensor\n    poissons_ratio = 0.33\n    youngs_modulus = 69e9\n  []\n  [strain]\n    type = ComputeAxisymmetricRZIncrementalStrain\n  []\n  [stress]\n    type = ComputeFiniteStrainElasticStress\n  []\n[]\n\n[Executioner]\n  type = Transient\n\n  solve_type = NEWTON\n\n  automatic_scaling = true\n\n  petsc_options = '-snes_ksp_ew'\n  petsc_options_iname = '-pc_type -pc_factor_mat_solver_package -ksp_gmres_restart'\n  petsc_options_value = 'lu superlu_dist 101'\n\n  # controls for linear iterations\n  l_max_its = 100\n  l_tol = 1e-10\n\n  # controls for nonlinear iterations\n  nl_max_its = 200\n  nl_rel_tol = 1e-6\n  nl_abs_tol = 1e-8\n\n  # time control\n  start_time = 0.0\n  dt = 0.001\n  end_time = 10.0\n[]\n\n[Outputs]\n  [out]\n    type = Exodus\n  []\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10079925",
                          "updatedAt": "2024-07-18T04:31:13Z",
                          "publishedAt": "2024-07-18T04:31:12Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "by Physics syntax I mean this\nhttps://mooseframework.inl.gov/moose/source/physics/QuasiStaticSolidMechanicsPhysics.html",
                          "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10079957",
                          "updatedAt": "2024-07-18T04:40:31Z",
                          "publishedAt": "2024-07-18T04:40:30Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "TJT-post95"
                          },
                          "bodyText": "OK. I try it again.",
                          "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10079966",
                          "updatedAt": "2024-07-18T04:41:54Z",
                          "publishedAt": "2024-07-18T04:41:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "l_tol = 1e-10\nThis is very tight, much more than needed\nOn the other hand these are kind of loose, a little too loose to be sure about the results\nnl_rel_tol = 1e-6\nnl_abs_tol = 1e-8\nadd this\nautomatic_scaling = true\nto normalize the residuals",
                          "url": "https://github.com/idaholab/moose/discussions/28159#discussioncomment-10079973",
                          "updatedAt": "2024-07-18T04:43:26Z",
                          "publishedAt": "2024-07-18T04:43:26Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Parsed Optimization Objects not found?",
          "author": {
            "login": "Ryan7291"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nMoose not able to find some objects in the optimization library even though the make file has \"ALL_MODULES\" checked. Of the optimization module objects those labeled 'Parsed...' usually have issues. Ex....\n*** ERROR ***\nA 'ParsedVectorVectorRealReductionReporter' is not a registered object.\n\nIf you are trying to find this object in a dynamically loaded library, make sure that\nthe library can be found either in your \"Problem/library_path\" parameter or in the\nMOOSE_LIBRARY_PATH environment variable.\n\n\n-----------OTHER ERROR CODE W/ SAME MAKEFILE--------------------------\n*** ERROR ***\nA 'ParsedVectorReporter' is not a registered object.\n\nIf you are trying to find this object in a dynamically loaded library, make sure that\nthe library can be found either in your \"Problem/library_path\" parameter or in the\nMOOSE_LIBRARY_PATH environment variable.",
          "url": "https://github.com/idaholab/moose/discussions/28170",
          "updatedAt": "2024-07-19T22:08:46Z",
          "publishedAt": "2024-07-18T02:44:08Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThese  objects are kind of new. how old is your version of moose?\nIt should say in the header of any simulation\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28170#discussioncomment-10079435",
                  "updatedAt": "2024-07-18T03:00:49Z",
                  "publishedAt": "2024-07-18T03:00:47Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Ryan7291"
                          },
                          "bodyText": "This is what shows up\nMOOSE Version:           git commit 6152da8bd7 on 2023-11-12",
                          "url": "https://github.com/idaholab/moose/discussions/28170#discussioncomment-10079552",
                          "updatedAt": "2024-07-18T03:20:30Z",
                          "publishedAt": "2024-07-18T03:20:30Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "too old. please update moose and recompile your app",
                          "url": "https://github.com/idaholab/moose/discussions/28170#discussioncomment-10079564",
                          "updatedAt": "2024-07-18T03:24:15Z",
                          "publishedAt": "2024-07-18T03:24:14Z",
                          "isAnswer": true
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Unable to do debugging after installing the recent version of MOOSE  ->  Error: Floating point exception signaled, libMesh terminating:",
          "author": {
            "login": "vikramroybarc"
          },
          "bodyText": "Check these boxes if you have followed the posting rules.\n\n Q&A General is the most appropriate section for my question\n I have consulted the posting Guidelines on the Discussions front page\n I have searched the Discussions forum and my question has not been asked before\n I have searched the MOOSE website and the documentation does not answer my question\n I have formatted my post following the posting guidelines (screenshots as a last resort, triple back quotes around pasted text)\n\nQuestion\nHi Moose Team,\nI\u2019m encountering an issue with debugging my MOOSE application following an update. Here are my system details:\nFramework Information:\nMOOSE Version: git commit c15cdce on 2024-07-17\nLibMesh Version: [Version Information Missing]\nPETSc Version: 3.20.3\nSLEPc Version: 3.20.1\nCurrent Time: Wed Jul 17 19:41:27 2024\nExecutable Timestamp: Wed Jul 17 19:33:20 2024\nI updated my MOOSE and conda environments today. Prior to the update, I was able to debug by compiling the application in dbg mode. However, after updating MOOSE, debugging with the gdb debugger in VSCode no longer works. I receive the following error when attempting to run MOOSE with the dbg application:\n(base) vikramr@VikramRoy:~/projects/rhocp$ ./rhocp-dbg -i tantalum/strain_rate_effect/1e-3ps/bcc_pxtal.i \n\n\n*** Warning, This code is deprecated and will be removed in future versions:\n/home/vikramr/projects/rhocp/tantalum/strain_rate_effect/1e-3ps/bcc_pxtal.i:105.3: The 'Kernels/TensorMechanics' syntax is deprecated. Please use 'Physics/SolidMechanics/QuasiStatic' instead.\nStack frames: 17\n0: libMesh::print_trace(std::ostream&)\n1: void moose::internal::mooseDeprecatedStream<libMesh::BasicOStreamProxy<char, std::char_traits<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(libMesh::BasicOStreamProxy<char, std::char_traits<char> >&, bool, bool, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&)\n2: void mooseDeprecated<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&)\n3: Moose::Builder::walkRaw(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, hit::Node*)\n4: Moose::Builder::walk(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, hit::Node*)\n5: hit::Node::walk(hit::Walker*, hit::NodeType, hit::TraversalOrder)\n6: hit::Node::walk(hit::Walker*, hit::NodeType, hit::TraversalOrder)\n7: hit::Node::walk(hit::Walker*, hit::NodeType, hit::TraversalOrder)\n8: /home/vikramr/projects/moose/framework/libmoose-dbg.so.0(+0x2d7f886) [0x7747e797f886]\n9: Moose::Builder::build()\n10: MooseApp::setupOptions()\n11: MooseApp::run()\n12: ./rhocp-dbg(+0x3e7e) [0x56ede3817e7e]\n13: main\n14: /lib/x86_64-linux-gnu/libc.so.6(+0x29d90) [0x7747d3829d90]\n15: __libc_start_main\n16: ./rhocp-dbg(+0x3079) [0x56ede3817079]\n\n\n\n*** Info ***\nSolidMechanics Action: selecting 'incremental finite strain' formulation.\n\n\n*** Warning, This code is deprecated and will be removed in future versions:\n/home/vikramr/projects/rhocp/tantalum/strain_rate_effect/1e-3ps/bcc_pxtal.i:417: (Outputs/interval):\n'interval' has been deprecated and will be removed on 02/01/2025. Please use 'time_step_interval' instead.\n\n\nFloating point exception signaled (invalid floating point operation)!\nlibMesh terminating:\n\nTo track this down, compile in debug mode, then in gdb do:\n  break libmesh_handleFPE\n  run ...\n  bt\nStack frames: 19\n0: libMesh::print_trace(std::ostream&)\n1: libMesh::MacroFunctions::report_error(char const*, int, char const*, char const*, std::ostream&)\n2: /home/vikramr/miniforge/envs/moose/libmesh/lib/libmesh_dbg.so.0(+0x2215a5d) [0x7747e0815a5d]\n3: /lib/x86_64-linux-gnu/libc.so.6(+0x42520) [0x7747d3842520]\n4: fedisableexcept\n5: libMesh::enableFPE(bool)\n6: /home/vikramr/projects/moose/framework/libmoose-dbg.so.0(+0xd852ce) [0x7747e59852ce]\n7: FEProblemBase::updateMortarMesh()\n8: SetupMeshCompleteAction::act()\n9: Action::timedAct()\n10: ActionWarehouse::executeActionsWithAction(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)\n11: ActionWarehouse::executeAllActions()\n12: MooseApp::runInputFile()\n13: MooseApp::run()\n14: ./rhocp-dbg(+0x3e7e) [0x56ede3817e7e]\n15: main\n16: /lib/x86_64-linux-gnu/libc.so.6(+0x29d90) [0x7747d3829d90]\n17: __libc_start_main\n18: ./rhocp-dbg(+0x3079) [0x56ede3817079]\n[0] ../src/base/libmesh.C, line 139, compiled Jul 15 2024 at 23:19:14\n\nAbort(1) on node 0 (rank 0 in comm 0): application called MPI_Abort(MPI_COMM_WORLD, 1) - process 0\nThe application and inputfiles runs fine with the opt executable as can be seen below:\n(base) vikramr@VikramRoy:~/projects/rhocp$ ./rhocp-opt -i tantalum/strain_rate_effect/1e-3ps/bcc_pxtal.i \n\n\n*** Warning, This code is deprecated and will be removed in future versions:\n/home/vikramr/projects/rhocp/tantalum/strain_rate_effect/1e-3ps/bcc_pxtal.i:105.3: The 'Kernels/TensorMechanics' syntax is deprecated. Please use 'Physics/SolidMechanics/QuasiStatic' instead.\nStack frames: 15\n0: libMesh::print_trace(std::ostream&)\n1: void moose::internal::mooseDeprecatedStream<libMesh::BasicOStreamProxy<char, std::char_traits<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > >(libMesh::BasicOStreamProxy<char, std::char_traits<char> >&, bool, bool, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&&)\n2: Moose::Builder::walkRaw(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, hit::Node*)\n3: Moose::Builder::walk(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, hit::Node*)\n4: hit::Node::walk(hit::Walker*, hit::NodeType, hit::TraversalOrder)\n5: hit::Node::walk(hit::Walker*, hit::NodeType, hit::TraversalOrder)\n6: hit::Node::walk(hit::Walker*, hit::NodeType, hit::TraversalOrder)\n7: Moose::Builder::build()\n8: MooseApp::setupOptions()\n9: MooseApp::run()\n10: ./rhocp-opt(+0x20e8) [0x5fb0e88bd0e8]\n11: main\n12: /lib/x86_64-linux-gnu/libc.so.6(+0x29d90) [0x7b0210c29d90]\n13: __libc_start_main\n14: ./rhocp-opt(+0x238b) [0x5fb0e88bd38b]\n\n\n\n*** Info ***\nSolidMechanics Action: selecting 'incremental finite strain' formulation.\n\n\n*** Warning, This code is deprecated and will be removed in future versions:\n/home/vikramr/projects/rhocp/tantalum/strain_rate_effect/1e-3ps/bcc_pxtal.i:417: (Outputs/interval):\n'interval' has been deprecated and will be removed on 02/01/2025. Please use 'time_step_interval' instead.\n\nFramework Information:\nMOOSE Version:           git commit c15cdce7d3 on 2024-07-17\nLibMesh Version:         \nPETSc Version:           3.20.3\nSLEPc Version:           3.20.1\nCurrent Time:            Wed Jul 17 19:41:27 2024\nExecutable Timestamp:    Wed Jul 17 19:33:20 2024\n\nCheckpoint:\n  Wall Time Interval:      Every 3600.000000 s\n  User Checkpoint:         Outputs/cp\n  # Checkpoints Kept:      2\n  Execute On:              TIMESTEP_END \n\nParallelism:\n  Num Processors:          1\n  Num Threads:             1\n\nMesh: \n  Parallel Type:           replicated\n  Mesh Dimension:          3\n  Spatial Dimension:       3\n  Nodes:                   729\n  Elems:                   512\n  Num Subdomains:          64\n\nNonlinear System:\n  Num DOFs:                2187\n  Num Local DOFs:          2187\n  Variables:               { \"disp_x\" \"disp_y\" \"disp_z\" } \n  Finite Element Types:    \"LAGRANGE\" \n  Approximation Orders:    \"FIRST\" \n\nAuxiliary System:\n  Num DOFs:                8704\n  Num Local DOFs:          8704\n  Variables:               { \"strain_xx\" \"strain_yy\" \"strain_zz\" \"stress_xx\" \"stress_yy\" ... \"Phi\" \"phi_2\" \n                             \"rho_m\" \"rho_i\" \"Ep_eff\" } \"eeq\" \n  Finite Element Types:    \"MONOMIAL\" \"MONOMIAL\" \n  Approximation Orders:    \"CONSTANT\" \"FIRST\" \n\nExecution Information:\n  Executioner:             Transient\n  TimeStepper:             FunctionDT\n  TimeIntegrator:          ImplicitEuler\n  Solver Mode:             NEWTON\n  PETSc Preconditioner:    lu mat_superlu_dist_fact: SamePattern  mat_superlu_dist_replacetinypivot: true \n  MOOSE Preconditioner:    SMP\n\n\nTime Step 0, time = 0\n\nPostprocessor Values:\n+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+\n| time           | Ep_eff         | Phi            | eeq            | phi_1          | phi_2          | rho_i          | rho_m          | strain_xx      | strain_yy      |\n+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+----------------+\n+----------------+----------------+----------------+----------------+----------------+----------------+\n| time           | strain_zz      | stress_xx      | stress_yy      | stress_zz      | vonmises       |\n+----------------+----------------+----------------+----------------+----------------+----------------+\n|   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |   0.000000e+00 |\n+----------------+----------------+----------------+----------------+----------------+----------------+\n\n\nTime Step 1, time = 0.0001, dt = 0.0001\n Skipping predictor this step\n Solve Converged!\n\nTime Step 2, time = 0.00022, dt = 0.00012\n  Applying predictor with scale factor = 1\n Solve Converged!\n\nTime Step 3, time = 0.000364, dt = 0.000144\n  Applying predictor with scale factor = 1\n\n\nI also tried the debug version of the app. In that version I am also getting the same error.\nCan anyone please assist with this issue so that I can continue debugging with MOOSE?\nThank you!",
          "url": "https://github.com/idaholab/moose/discussions/28158",
          "updatedAt": "2024-07-17T14:46:03Z",
          "publishedAt": "2024-07-17T14:22:59Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nIt s finding for you a problem in debug mode, namely a floating point exception.\nPlease follow what the prompt says and place a breakpoint on the floating point exception handler, and report the stack trace here\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/28158#discussioncomment-10074604",
                  "updatedAt": "2024-07-17T14:35:43Z",
                  "publishedAt": "2024-07-17T14:35:42Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "vikramroybarc"
                  },
                  "bodyText": "Hi Giud,\nThis is what I getting in my terminal\nKindly look into it and tell what is to be done so as for debugging\nvikramr@VikramRoy:~/projects/rhocp$ gdb rhocp-dbg\nGNU gdb (Ubuntu 12.1-0ubuntu1~22.04.2) 12.1\nCopyright (C) 2022 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType \"show copying\" and \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n<https://www.gnu.org/software/gdb/bugs/>.\nFind the GDB manual and other documentation resources online at:\n    <http://www.gnu.org/software/gdb/documentation/>.\n\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from rhocp-dbg...\n(gdb) set args -i tantalum/strain_rate_effect/1e-3ps/bcc_pxtal.i\n(gdb) break libmesh_handleFPE\nFunction \"libmesh_handleFPE\" not defined.\nMake breakpoint pending on future shared library load? (y or [n]) y\nBreakpoint 1 (libmesh_handleFPE) pending.\n(gdb) run ...\nStarting program: /home/vikramr/projects/rhocp/rhocp-dbg ...\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n[New Thread 0x7fffe15eb640 (LWP 67186)]\n[New Thread 0x7fffe0dea640 (LWP 67187)]\n[New Thread 0x7fffdf3fd640 (LWP 67188)]\nUsage: rhocp-dbg [<options>]\n\nOptions:\n  --allow-test-objects                              Register test objects and syntax.\n  -w --allow-unused                                 Warn about unused input file options instead of erroring.\n  --app <AppName>                                   Specify the application that should be used to run the input file. This must match an application name registered to the application factory. Note that this option is case-sensitive.\n  Application/type=<app_type>                       Specify the application type.\n  --type                                            Return the name of the application object.\n  --check-input                                     Check the input file (i.e. requires -i <filename>) and quit.\n  --color [auto,on,off]                             Whether to use color in console output (default 'on').\n  --copy-inputs <dir>                               Copies installed inputs (e.g. tests, examples, etc.) to an directory named  <appname>_<dir>.\n  --definition                                      Shows a SON style input definition dump for input validation\n  --disable-perf-graph-live                         Disables PerfGraph Live Printing.\n  -v --version                                      Print application version\n  --distributed-mesh                                The libMesh Mesh underlying MooseMesh should always be a DistributedMesh\n  --dump [search_string]                            Shows a dump of available input file syntax.\n  --error                                           Turn all warnings into errors\n  --error-deprecated                                Turn deprecated code messages into Errors\n  -o --error-override                               Error when encountering overridden or parameters supplied multiple times\n  -e --error-unused                                 Error when encountering unused input file options\n  -h --help                                         Displays CLI usage statement.\n  -i <input_files>                                  Specify one or multiple input files. Multiple files get merged into a single simulation input.\n  --json                                            Dumps input file syntax in JSON format.\n  --keep-cout                                       Keep standard output from all processors when running in parallel\n  --language-server                                 Starts a process to communicate with development tools using the language server protocol\n  --libtorch-device                                 The device type we want to run libtorch on.\n  --list-constructed-objects                        List all moose object type names constructed by the master app factory.\n  --mesh-only [mesh_file_name]                      Setup and Output the input mesh only (Default: \"<input_file_name>_in.e\")\n  --minimal                                         Ignore input file and build a minimal application with Transient executioner.\n  --n-threads=<n>                                   Runs the specified number of threads per process\n  --no-color                                        Disable coloring of all Console outputs.\n  --no-timing                                       Disabled performance logging. Overrides -t or --timing if passed in conjunction with this flag\n  --no-trap-fpe                                     Disable Floating Point Exception handling in critical sections of code when using DEBUG mode.\n  --output-wall-time-interval [interval]            The target wall time interval (in seconds) at which to write to output. USE FOR TEST SUITE PROBLEMS ONLY, FOR ALL OTHER USES SEE THE wall_time_interval IN DERIVED Output OBJECTS.\n  --perf-graph-live-all                             Forces printing of ALL progress messages.\n  --recover [file_base]                             Continue the calculation.  If file_base is omitted then the most recent recovery file will be utilized\n  --redirect-stdout                                 Keep standard output from all processors when running in parallel\n  -r <n>                                            Specify additional initial uniform mesh refinements for grid convergence studies\n  --registry                                        Lists all known objects and actions.\n  --registry-hit                                    Lists all known objects and actions in hit format.\n  --run                                             Runs the inputs in the current directory copied to a user-writable location by \"--copy-inputs\"\n  --show-controls                                   Shows the Control logic available and executed.\n  --docs                                            print url/path to the documentation website\n  --show-input                                      Shows the parsed input file before running the simulation.\n  --show-copyable-inputs                            Shows the directories able to be installed (copied) into a user-writable location\n  --show-outputs                                    Shows the output execution time information.\n  --split-file [filename]                           optional name of split mesh file(s) to write/read\n  --split-mesh [splits]                             comma-separated list of numbers of chunks to split the mesh into\n  --start-in-debugger <debugger>                    Start the application and attach a debugger.  This will launch xterm windows using the command you specify for 'debugger'\n  --stop-for-debugger [seconds]                     Pauses the application during startup for the specified time to allow for connection of debuggers.\n  --syntax                                          Dumps the associated Action syntax paths ONLY\n  --test-checkpoint-half-transient                  When true the simulation will only run half of its specified transient (ie half the timesteps) with checkpoints enabled. This is useful for testing recovery and restart and should only be used in the test harness.\n  -t --timing                                       Enable all performance logging for timing purposes. This will disable all screen output of performance logs for all Console objects.\n  --timpi-sync <sync type>                          Changes the sync type used in spare parallel communitations within the TIMPI library (advanced option).\n  --trap-fpe                                        Enable Floating Point Exception handling in critical sections of code.  This is enabled automatically in DEBUG mode\n  --executor                                        Use the new Executor system instead of Executioners\n  --use-split                                       use split distributed mesh files\n  --yaml                                            Dumps input file syntax in YAML format.\n\nSolver Options:\n  See solver manual for details (Petsc or Trilinos)\n[Thread 0x7fffdf3fd640 (LWP 67188) exited]\n[Thread 0x7fffe15eb640 (LWP 67186) exited]\n[Thread 0x7fffe0dea640 (LWP 67187) exited]\n\n ---------------------------------------------------------------------------- \n| Reference count information                                                |\n ---------------------------------------------------------------------------- \n| N7libMesh10Parameters5ValueE reference count information:\n|  Creations:    358\n|  Destructions: 358\n| N7libMesh4ElemE reference count information:\n|  Creations:    1\n|  Destructions: 1\n| N7libMesh9DofObjectE reference count information:\n|  Creations:    1\n|  Destructions: 1\n ---------------------------------------------------------------------------- \n[Inferior 1 (process 67146) exited normally]\n(gdb)",
                  "url": "https://github.com/idaholab/moose/discussions/28158#discussioncomment-10074726",
                  "updatedAt": "2024-07-17T14:46:04Z",
                  "publishedAt": "2024-07-17T14:46:02Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "What will be my Jacobian if the Residual is zero?",
          "author": {
            "login": "ashishdhole"
          },
          "bodyText": "Hello,\nIf my residual is zero, I have already reached the solution. In that case what should be my Jacobian?\n  switch (type)\n  {\n    case Residual:\n    {\n      Real Res = 1.0;\n      if (std::abs(total) > std::abs(friction_energy))\n      {\n        Res = ((_mu[_qp] * ((op * op * op) - op + (3.0 * op * SumOPj)))) -\n              (_sigma[_qp] * sgn * 3.0 * op * SumOPGj * g);\n      }\n      else\n        Res = 0.0;\n\n      return Res;\n    }\n\n    case Jacobian:\n    {\n      Real Jac = 1.0;\n      if (std::abs(total) > std::abs(friction_energy))\n        Jac = (_mu[_qp] * (_phi[_j][_qp] * ((3.0 * op * op )- 1.0 + (3.0 * SumOPj)))) -\n              (_phi[_j][_qp] * _sigma[_qp] * 3.0 * SumOPGj * g * sgn);\n      else\n        Jac = 0.0;\n\n      return Jac;\n    }\n\nis this correct?\nThank you",
          "url": "https://github.com/idaholab/moose/discussions/28156",
          "updatedAt": "2024-07-17T13:59:07Z",
          "publishedAt": "2024-07-17T09:41:58Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\na sum of terms that sums to 0 can have non-zero derivatives. But a constant 0 residual has 0 derivatives, so 0 as well.\nin the case you have 0 is fine",
                  "url": "https://github.com/idaholab/moose/discussions/28156#discussioncomment-10074151",
                  "updatedAt": "2024-07-17T13:59:08Z",
                  "publishedAt": "2024-07-17T13:59:07Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Can MOOSE Handle Salt Precipitation and Its Induced Porosity and Permeability Changes?",
          "author": {
            "login": "robo-boluo"
          },
          "bodyText": "Dear MOOSE Team,\nI am writing to inquire about the capabilities of MOOSE regarding NaCl precipitation during CO\u2082 injection into a brine aquifer. Specifically, I am interested in understanding whether the current version of MOOSE can model the effects of salt precipitation on porosity and permeability changes.\nIf this functionality is not currently available, could you provide guidance on how to implement this feature?\nThank you for your assistance.",
          "url": "https://github.com/idaholab/moose/discussions/27832",
          "updatedAt": "2024-07-17T04:02:05Z",
          "publishedAt": "2024-06-08T05:08:29Z",
          "category": {
            "name": "Q&A Modules: Porous Flow"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nPorosity and permeability are both material properties which can be set dynamically during the simulation as a function of NaCl precipitate concentration.\nSo yes, you could model this. Implementing new material properties should be (relatively) straightforward after going through the tutorial\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9710930",
                  "updatedAt": "2024-06-08T06:19:15Z",
                  "publishedAt": "2024-06-08T06:18:55Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "robo-boluo"
                  },
                  "bodyText": "Hi GiudGiud, @GiudGiud  @cpgr\nI want to express my gratitude for your valuable advice. In response to it, I created new source files 'PorousFlowPorosity_nacl.h' and 'PorousFlowPorosity_nacl.C' (link)to incorporate salt precipitation.\nHowever, upon implementing PorousFlowPorosity_nacl in the [Materials] block, I encountered an issue during testing. It appears that '(PorousFlow_density_qp, dPorousFlow_density_qp_dvar, PorousFlow_xnacl_qp, dPorousFlow_xnacl_qp_dvar, PorousFlow_density_nodal, dPorousFlow_density_nodal_dvar, PorousFlow_xnacl_nodal, dPorousFlow_xnacl_nodal_dvar)' are not defined on the specified blocks (caps and aquifer).\nI called the PorousFlowPorosity_nacl using the following format:\n   [porosity]\n    type = PorousFlowPorosity_nacl\n    block=aquifer\n    fluid = true\n    mechanical = true\n    thermal = true\n    salt_precip = true\n    porosity_zero = 0.2\n    reference_temperature = 105\n    reference_porepressure = 15.5E6\n    thermal_expansion_coeff = 15E-6 # volumetric\n    solid_bulk = 8E9 # unimportant since biot = 1\n    xnacl_L = 0.30\n    rho_nacl = 2165.0\n    r_m = 1.0e-5\n    xnacl=xnacl\n    density=density_h2o\n  []\n\nCould you please provide suggestions on how to address this issue at your convenience?\nThank you very much!",
                  "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9743178",
                  "updatedAt": "2024-06-11T19:57:44Z",
                  "publishedAt": "2024-06-11T19:52:39Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "hello\nuse Debug/show_material_props to see which properties are being defined, and which are missing based on the current error you are getting.\nit might be that they are all being defined, but the names are not quite what is expected",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9743234",
                          "updatedAt": "2024-06-11T19:58:42Z",
                          "publishedAt": "2024-06-11T19:58:41Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Hi GiudGiud,\nThank you for your prompt response.\nThe codes currently are not executable, so the [debug] does not show any info.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9743354",
                          "updatedAt": "2024-06-11T20:11:26Z",
                          "publishedAt": "2024-06-11T20:11:25Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Comment out the material giving the error to try to get far enough into the setup that\n[Debug]\n  show_material_props = true\n[]\n\nshows information",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9743367",
                          "updatedAt": "2024-06-11T20:13:05Z",
                          "publishedAt": "2024-06-11T20:13:05Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Hello GiudGiud @GiudGiud,\nI am grateful for your kind response to my previous question.\nI'm a bit confused about how to implement the variable 'xnacl' to my new 'PorousFlowPorosity_nacl' application. I've tried two methods to implement 'xnacl', but I'm still encountering issues. Could you please provide some guidance on this matter?\n\nTake 'xnacl' as a  MaterialProperty, similar to 'pf' fluid pressure\n.h file\n\n  const MaterialProperty<Real> * const _xnacl;\n  const MaterialProperty<std::vector<Real>> * const _dxnacl_dvar;\n\nand .C file\n    _xnacl(_salt_precip ? (_nodal_material\n                      ? &getMaterialProperty<Real>(\"PorousFlow_mass_frac_nodal\")\n                      : &getMaterialProperty<Real>(\"PorousFlow_mass_frac_qp\"))\n               : nullptr),\n    _dxnacl_dvar(_salt_precip ? (_nodal_material ? &getMaterialProperty<std::vector<Real>>(\n                                              \"dPorousFlow_mass_frac_nodal_dvar\")\n                                        : &getMaterialProperty<std::vector<Real>>(\n                                              \"dPorousFlow_mass_frac_qp_dvar\"))\n                     : nullptr),\n\n\n\nTake 'xnacl' as a  MaterialProperty, similar to '_saturation' fluid saturation\n.h file\n\n  const MaterialProperty<std::vector<Real>> * const _xnacl;\n  const MaterialProperty<std::vector<std::vector<Real>>> * const _dxnacl_dvar;\n\nand .C file\n     _xnacl(_salt_precip \n                    ? (_nodal_material\n                           ? &getMaterialProperty<std::vector<Real>>(\"PorousFlow_mass_frac_nodal\")\n                           : &getMaterialProperty<std::vector<Real>>(\"PorousFlow_mass_frac_qp\"))\n                    : nullptr),\n    _dxnacl_dvar(_salt_precip \n                          ? (_nodal_material ? &getMaterialProperty<std::vector<std::vector<Real>>>(\n                                                   \"dPorousFlow_mass_frac_nodal_dvar\")\n                                             : &getMaterialProperty<std::vector<std::vector<Real>>>(\n                                                   \"dPorousFlow_mass_frac_qp_dvar\"))\n                          : nullptr),",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9767212",
                          "updatedAt": "2024-06-13T19:57:08Z",
                          "publishedAt": "2024-06-13T19:49:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Hello\nAre you planning to solve for x_nacl ? Or can it be computed directly from the other quantities being solved for?\nSo you are asking if it should be a Real (one float value per quadrature point) or a std::vector (a vector of values on every quadrature point) ?\nIs there any reason it should be a vector? Does every phase have a different x_nacl ?",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9774974",
                          "updatedAt": "2024-06-14T13:39:24Z",
                          "publishedAt": "2024-06-14T13:39:23Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Hello @GiudGiud\nNaCl only exists in the aqueous phase. In my developed 'PorousFlowPorosity_nacl' app, I plan to use the mass fraction 'x_nacl' as a variable. However, I am unsure how to integrate 'x_nacl' into my 'PorousFlowPorosity_nacl' app. Typically, 'x_nacl' is defined in [FluidProperties], [UserObjects], and [Materials].\n[FluidProperties]\n  [co2]\n    type = CO2FluidProperties\n  []\n  [brine]\n    type = BrineFluidProperties\n  []\n[]\n\n[UserObjects]\n  [dictator]\n    type = PorousFlowDictator\n    porous_flow_vars = 'pgas zi xnacl temperature disp_r'\n    number_fluid_phases = 2\n    number_fluid_components = 3\n  []\n  [pc]\n    type = PorousFlowCapillaryPressureConst\n    pc = 0\n  []\n   [fs]\n    type = PorousFlowBrineCO2\n    brine_fp = brine\n    co2_fp = co2\n    capillary_pressure = pc\n  []\n[]\n\n[Materials]\n  [brineco2]\n    type = PorousFlowFluidState\n    gas_porepressure = pgas\n    z = zi\n    temperature = temperature\n    temperature_unit = Celsius\n    xnacl = xnacl\n    capillary_pressure = pc\n    fluid_state = fs\n  []\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9775395",
                          "updatedAt": "2024-06-14T14:18:16Z",
                          "publishedAt": "2024-06-14T14:18:15Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "It is being specified as a variable to the PorousFlowDictator ?\nIf it s a variable, then the question is do you solve for it, or can you compute it from the other quantities?\nThis determines if it should be a Variable or an AuxVariable",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9775554",
                          "updatedAt": "2024-06-14T14:34:06Z",
                          "publishedAt": "2024-06-14T14:34:06Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "It is a variable defined in [Variables] and is used to compute 'MassTimeDerivative', 'AdvectiveFlux', and 'DispersiveFlux' in [Kernels], similar to how temperature and pressure variables are used. You can access the input file via this link .\nThe application of 'xnacl' follows the examples provided in the MOOSE folder. The current issue is how to incorporate 'xnacl' into my developed 'PorousFlowPorosity_nacl.h' and 'PorousFlowPorosity_nacl.C' files.\nKernels]\n  [mass]\n    type = PorousFlowMassTimeDerivative\n    fluid_component = 2\n    variable = xnacl\n  []\n  [flux]\n    type = PorousFlowAdvectiveFlux\n    fluid_component = 2\n    variable = xnacl\n    use_displaced_mesh = false\n  []\n  [diff]\n    type = PorousFlowDispersiveFlux\n    fluid_component = 2\n    variable = xnacl\n    disp_long = '0 0'\n    disp_trans = '0 0'\n  []\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9775860",
                          "updatedAt": "2024-06-14T15:02:45Z",
                          "publishedAt": "2024-06-14T14:58:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Why are you retrieving it as a material property then?\nI understand for the derivatives.\nIf it s a variable then Real is the right type",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9776078",
                          "updatedAt": "2024-06-14T15:22:45Z",
                          "publishedAt": "2024-06-14T15:22:19Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "I attempted to retrieve 'xnacl' as a material property, but it did not work. Could you please guide me on how to retrieve 'xnacl' for my 'PorousFlowPorosity_nacl' application?\nThank you.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9776358",
                          "updatedAt": "2024-06-14T15:52:27Z",
                          "publishedAt": "2024-06-14T15:52:26Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "robo-boluo"
                  },
                  "bodyText": "Hi Guillaume Giudicelli, @GiudGiud\nThis is a quick update of the addition of ConstantBounds in the input file (link).  Two simulation results are observed.\n(1) Regarding the mass fraction shuffle\nAt Timestep 31 in Fig.1, the injection inlet reaches the maximum mass fraction of (xnacl_L= 0.3). Subsequently, there is a mass fraction shuffle in the next timestep (as seen in Fig.2). Following this, the NaCl propagates further into the formation, maintaining a maximum mass concentration of 0.3 (as depicted in Fig.3 and Fig.4). The mass fraction shuffle refers to the redistribution or rearrangement of NaCl within the system. How to intepret the mass fraction shuffle?\n\nFig.1\n\nFig.2\n\nFig.3\n\nFig.4\n(2) Regarding the lack of porosity changes in the reservoir layer\nDespite reaching its limit (xnacl_L), no porosity reduction is observed in the reservoir layer (see Fig.5)\n\nFig.5",
                  "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9798881",
                  "updatedAt": "2024-06-17T20:41:36Z",
                  "publishedAt": "2024-06-17T20:35:51Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "these results do not look converged\n  nl_abs_tol = 1e-7\n  nl_rel_tol = 1e-5\n\nis probably too loose.\n(2) Is this the output from your material? Is it possible that the logic you put in the material is not correct?\nwhich part in the expression changes based on xna_cl being too big?",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9798952",
                          "updatedAt": "2024-06-17T20:48:49Z",
                          "publishedAt": "2024-06-17T20:48:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Thanks for the prompt reply.\n(1). Will add more strict limit.\n(2) In the PorousFlowPorosity_nacl.C file, line 207 and line 229 when compute the atNegInfinityQp and datNegInfinityQp respectively.\n\nReal\nPorousFlowPorosity_nacl::atNegInfinityQp() const\n{\n  Real result = _biot; \n  if (_salt_precip)\n  { \n    const Real delta_xnacl = ((_xnacl)[_qp] - _xnacl_L);\n    if (delta_xnacl > 0)\n    {\n      _halite_conc += _dt * _r_m * (*_porosity_old)[_qp] * (*_saturation)[_qp][_aq_ph] * (*_density)[_qp][_aq_ph] * delta_xnacl / _rho_nacl;\n      result -= _halite_conc;\n    }\n  }\n  return result;\n}\n\n\n\n\nReal\nPorousFlowPorosity_nacl::datNegInfinityQp(unsigned pvar) const\n{\n  Real result = 0.0;\n  if (_salt_precip && (_t_step >= 1 || _app.isRestarting()))\n  { \n    const Real delta_xnacl = ((_xnacl)[_qp] - _xnacl_L);\n    if (delta_xnacl > 0)\n    {\n      result -= _dt * (*_porosity_old)[_qp] *\n                ( _r_m * (*_density)[_qp][_aq_ph] * delta_xnacl / _rho_nacl * (*_dsaturation_dvar)[_qp][_aq_ph][pvar] \n                + (*_saturation)[_qp][_aq_ph] * _r_m / _rho_nacl * ((*_ddensity_dvar)[_qp][_aq_ph][pvar] * delta_xnacl + (_grad_xnacl)[_qp] * (*_density)[_qp][_aq_ph]) );\n    }\n  }\n  return result;\n}\n\n\nPorosity is an an AuxVariables and defined in the [AuxKernels] block (line 193) in the input.i file:\n[AuxKernels] \n  [porosity]\n    type = PorousFlowPropertyAux\n    variable = porosity\n    property = porosity\n    execute_on = timestep_end\n  []\n[]\n\nAnd the porosity is also used In the [Materials] block for aquifer and caprocks:\n\n  [porosity_aquifer]\n    type = PorousFlowPorosity_nacl\n    block=aquifer\n    fluid = true\n    mechanical = true\n    thermal = true\n    salt_precip = true\n    porosity_zero = 0.2\n    reference_temperature = 105\n    reference_porepressure = 15.5E6\n    thermal_expansion_coeff = 15E-6 # volumetric\n    solid_bulk = 8E9 # unimportant since biot = 1\n    xnacl_L = 0.30\n    rho_nacl = 2165.0\n    r_m = 1.0e-2\n    xnacl=xnacl\n  []\n\n  [porosity_caps]\n    type = PorousFlowPorosity_nacl\n    block=caps\n    fluid = true\n    mechanical = true\n    thermal = true\n    salt_precip = true\n    porosity_zero = 0.1\n    reference_temperature = 105\n    reference_porepressure = 15.5E6\n    thermal_expansion_coeff = 15E-6 # volumetric\n    solid_bulk = 8E9 # unimportant since biot = 1\n    xnacl_L = 0.30\n    rho_nacl = 2165.0\n    r_m = 1.0e-2\n    xnacl=xnacl\n  []",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9799096",
                          "updatedAt": "2024-06-17T21:13:13Z",
                          "publishedAt": "2024-06-17T21:13:12Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "(2) In the PorousFlowPorosity_nacl.C file, line 207 and line 229 when compute the atNegInfinityQp and datNegInfinityQp respectively.\n\nBut the bounds will prevent it from going over the limit? So it will never affect these lines",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9799230",
                          "updatedAt": "2024-06-17T21:30:48Z",
                          "publishedAt": "2024-06-17T21:30:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Yes, this is the tricky part.\nFirstly, we should use the ConstantBounds to constrain xnacl \u2264 xnacl_L because of the mechanism of maximum solubility. Secondly, if we limit the value of xnacl, no halite will be produced.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9799285",
                          "updatedAt": "2024-06-17T21:40:12Z",
                          "publishedAt": "2024-06-17T21:40:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Firstly, we should use the ConstantBounds to constrain xnacl \u2264 xnacl_L because of the mechanism of maximum solubility. Secondly, if we limit the value of xnacl, no halite will be produced.\n\nexactly. So I would say:\n\ndont use bounds\nuse a physical mechanism like a \"Rate\" term (constant? or propoertional to (x_nacl-limit), whichever is most physical) in your equations which is only active after xnacl > xnacl_L and works to reduce x_nacl",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9799349",
                          "updatedAt": "2024-06-17T21:54:12Z",
                          "publishedAt": "2024-06-17T21:54:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "I agree with your suggestion. However, I still have one question. After the halite precipitation, I can update the new xnacl_new in PorousFlowPorosity_nacl.C using the formula:\n\ud835\udc65\ud835\udc5b\ud835\udc4e\ud835\udc50\ud835\udc59_\ud835\udc5b\ud835\udc52\ud835\udc64=\ud835\udc65\ud835\udc5b\ud835\udc4e\ud835\udc50\ud835\udc59_\ud835\udc5c\ud835\udc59\ud835\udc51\u2212(\ud835\udc65\ud835\udc5b\ud835\udc4e\ud835\udc50\ud835\udc59_\ud835\udc5c\ud835\udc59\ud835\udc51\u2212\ud835\udc65\ud835\udc5b\ud835\udc4e\ud835\udc50\ud835\udc59_\ud835\udc3f)\u00d7rate\n\nMy question is, how do I return the xnacl_new value to the model for the next time step calculation?",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9799497",
                          "updatedAt": "2024-06-17T22:34:34Z",
                          "publishedAt": "2024-06-17T22:24:15Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "no you should not do this in the material property.\nYou should code this mechanism in the equations, and the material property just reads the current value of xnacl",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9799543",
                          "updatedAt": "2024-06-17T22:35:05Z",
                          "publishedAt": "2024-06-17T22:35:05Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Hello Guillaume Giudicelli, @GiudGiud ,\nThis is quick update after coding the xnacl update equation (\ud835\udc65\ud835\udc5b\ud835\udc4e\ud835\udc50\ud835\udc59_\ud835\udc5b\ud835\udc52\ud835\udc64=\ud835\udc65\ud835\udc5b\ud835\udc4e\ud835\udc50\ud835\udc59_\ud835\udc3f=0.3) for [Kernals]:\nCode for XNaclUpdate.h:\n#pragma once\n\n#include \"Kernel.h\"\n\nclass XNaclUpdate : public Kernel\n{\npublic:\n  static InputParameters validParams();\n  XNaclUpdate(const InputParameters & parameters);\n\nprotected:\n  virtual Real computeQpResidual() override;\n  virtual Real computeQpJacobian() override;\nprivate:\n  const VariableValue & _xnacl;\n  const Real _xnacl_L;\n};\n\nCode for XNaclUpdate.C:\n#include \"XNaclUpdate.h\"\n#include \"MooseVariable.h\"\n\nregisterMooseObject(\"PorousFlowApp\", XNaclUpdate);\n\nInputParameters\nXNaclUpdate::validParams()\n{\n  InputParameters params = Kernel::validParams();\n  params.addCoupledVar(\"xnacl\", \"The salt mass fraction in the brine (kg/kg)\");\n  params.addParam<Real>(\"xnacl_L\", \"nacl solubility limit at specific temp and pressure\");\n  return params;\n}\n\nXNaclUpdate::XNaclUpdate(const InputParameters & parameters) :\n  Kernel(parameters),\n  _xnacl(coupledValue(\"xnacl\")),\n  _xnacl_L(getParam<Real>(\"xnacl_L\"))\n{\n}\n\nReal\nXNaclUpdate::computeQpResidual()\n{\n  // Compute the residual contribution\n  Real residual = 0.0;\n  if (_xnacl[_qp] > _xnacl_L)\n  {\n    residual = (_xnacl_L - _xnacl[_qp]) * _test[_i][_qp];\n  }\n  return residual;\n}\n\nReal\nXNaclUpdate::computeQpJacobian()\n{\n  // Compute the Jacobian contribution\n  Real jacobian = 0.0;\n  if (_xnacl[_qp] > _xnacl_L)\n  {\n    jacobian = -_phi[_j][_qp] * _test[_i][_qp];\n  }\n  return jacobian;\n}\n\nResutls:\n(1) There are on changes for porosity\n\n(2) xnacl can exceed the solubility limit xnacl_L\n\n(3) Not converge after xnacl>xnacl_L, as timestep <e-4\nDo you think what else can we do to further improve the simulation results?\nAppreciate your time and guidance.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9809918",
                          "updatedAt": "2024-06-18T19:48:28Z",
                          "publishedAt": "2024-06-18T19:06:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "that's expected, porosity is averaged and xnacl is on average less than 0.3 still\nit can exceeed because the rate of removal is 1 * (xnacl- limit). Maybe there should be a larger rate? especially if physically it can't exceed the limit. Add a coefficient\nThis is more troubling. Maybe use -pc_type lu to see if you can get it to converge",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9810574",
                          "updatedAt": "2024-06-18T20:40:17Z",
                          "publishedAt": "2024-06-18T20:40:16Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Hi Guillaume Giudicelli, @GiudGiud\nA coefficient of 2 has been added to the 'XNaclUpdate' kernel, and the '-pc_type lu' has already been included in the [Preconditioning] block of the previous input file. However, there is no difference compared to the previous case with the coefficient =1; the three issues mentioned above still persist.\nRegarding the comment that an average xnacl < 0.3 causes no porosity change, I removed the XNaclUpdate  Kernel and allowed the xnacl to increase without restriction. However, this example still yields non-changeable reservoir porosity. Therefore, I suspect that the implementation of 'PorousFlowPorosity_nacl' is incorrect.\n\nFigure 1.  The xnacl profile without maximum solubility restriction still yields non-changeable reservoir porosity",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9812844",
                          "updatedAt": "2024-06-19T04:15:43Z",
                          "publishedAt": "2024-06-19T04:15:09Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "robo-boluo"
                  },
                  "bodyText": "I noticed that both Guillaume Giudicelli and Chris Green (@GiudGiud , @cpgr) contributed to the salt precipitation topic in thread #23701. The final collective conclusion was to modify the porosity and permeability file. Therefore, I believe I am heading in the right direction. I look forward to any updates on this topic.\nMany thanks.",
                  "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9832829",
                  "updatedAt": "2024-06-20T19:55:27Z",
                  "publishedAt": "2024-06-20T19:55:26Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "robo-boluo"
                  },
                  "bodyText": "Hi Guillaume Giudicelli @GiudGiud,\nI have been working on this problem for quite some time and would like to express my sincere appreciation for your continuous attention and guidance during this period. Initially, I was excited to confirm with you that MOOSE has the capability to model the effect of salt precipitation on porosity and permeability by adjusting the material properties. However, developing the App has proven to be much more complicated. Here is a summary of our progress over the past month:\n\n\nTaking \ud835\udc65NaCl  (NaCl mass fraction) as a variable, I developed the 'PorousFlowPorosity_nacl' App based on the existing 'PorousFlowPorosity' App in the MOOSE folder (/moose/modules/porous_flow/). Since the salt precipitation and chemical reaction parts have similar processes affecting porosity, I programmed the salt precipitation by following the format of the chemical part, defining the 'atNegInfinityQp', 'datNegInfinityQp', 'atZeroQp', and 'datZeroQp' sections for my 'PorousFlowPorosity_nacl' app.\n\n\nIn the input file, the variable \ud835\udc65NaCl  is computed using type=PorousFlowMassTimeDerivative, type=PorousFlowAdvectiveFlux, and type=PorousFlowDispersiveFlux in [Kernels].\n\n\nI defined \ud835\udc65NaCl_max as the maximum NaCl solubility in the aquifer. Once \ud835\udc65NaCl>\ud835\udc65NaCl_max, halite starts to precipitate. To avoid  \ud835\udc65NaCl>\ud835\udc65NaCl_max, we applied the ConstantBounds to restrict \ud835\udc65NaCl within [0,\ud835\udc65NaCl_max].  However, the porosity change was not observed in the simulation results. \"Failed\"\n\n\nWe suspected that the ConstantBounds restriction on \ud835\udc65NaCl\u2264\ud835\udc65NaCl_max prevented precipitation from occurring. Therefore, we deleted the ConstantBounds. After precipitation, we should update \ud835\udc65NaCl. Consequently, the \u2018XNaclUpdate\u2019 app (see above) was developed and applied in [Kernels]. However, the expected porosity change was still not achieved. \"Failed\"\n\n\nEven though I increased the \ud835\udc65NaCl removal rate (rate * (\ud835\udc65NaCl\u2212\ud835\udc65NaCl_max)), it still did not result in any porosity change. We also observed \ud835\udc65NaCl>\ud835\udc65NaCl_max and encountered convergence problems at \ud835\udc65NaCl>\ud835\udc65NaCl_max. \"Failed\"\n\n\nGiven your experience in MOOSE development, I trust your assertion that MOOSE can handle salt precipitation-induced porosity changes. Therefore, the issue may lie in my implementation of the 'PorousFlowPorosity_nacl' App. I would sincerely appreciate it if you could review my problem and provide your insights (code link).\nThank you for your time and attention to this matter.",
                  "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9908228",
                  "updatedAt": "2024-06-28T19:07:47Z",
                  "publishedAt": "2024-06-28T19:07:46Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "cpgr"
                          },
                          "bodyText": "Hi @robo-boluo - I'm sorry that I haven't seen this until now. This is something that we have done before! I'm happy to try and help you out with this next week.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9909791",
                          "updatedAt": "2024-06-29T01:40:42Z",
                          "publishedAt": "2024-06-29T01:40:42Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Dear Chris Green @cpgr\nI am grateful to your time and generous assistance on this matter. I am looking forward to the further discussion.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9909926",
                          "updatedAt": "2024-06-29T02:41:02Z",
                          "publishedAt": "2024-06-29T02:41:01Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Hi @robo-boluo - I'm sorry that I haven't seen this until now. This is something that we have done before! I'm happy to try and help you out with this next week.\n\nHi Chris Green @cpgr,\nMay I ask if there are any updates you can share with me at this stage?\nThanks.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-9999825",
                          "updatedAt": "2024-07-09T15:05:55Z",
                          "publishedAt": "2024-07-09T15:05:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Dear Chris Green and Guillaume Giudicell @cpgr @GiudGiud ,\nAre there any updates on this issue that can be shared at this time? I apologize for the frequent inquiries, but my supervisors are requesting information on the feasibility of this method.\nThanks.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-10066418",
                          "updatedAt": "2024-07-16T19:59:47Z",
                          "publishedAt": "2024-07-16T19:59:45Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I'm not a porous flow module developer\nFrom a general MOOSE developer point of view, I think this should be doable\nRemind me of the behavior with the fraction variable? It s supposed to be physically bound? Should it have its own variable?",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-10066484",
                          "updatedAt": "2024-07-16T20:10:09Z",
                          "publishedAt": "2024-07-16T20:10:07Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "cpgr"
                          },
                          "bodyText": "Hi @robo-boluo, sorry, I haven't made much progress due to other commitments. I'll try and take a look this afternoon and get back to you.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-10067509",
                          "updatedAt": "2024-07-16T23:44:13Z",
                          "publishedAt": "2024-07-16T23:44:11Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "cpgr"
                          },
                          "bodyText": "Just as a reminder (like @GiudGiud mentioned), do you want to consider the case where water evaporates into the CO2 gas phase, the salt mass fraction increases until it reaches the solubility limit, then the excess salt precipitates, reducing porosity (from which permeability reduces)?",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-10067556",
                          "updatedAt": "2024-07-16T23:52:28Z",
                          "publishedAt": "2024-07-16T23:52:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "Hi Chris Green @cpgr ,\nI appreciate your time and kind help. Yes, this is exactly what I want to implement. There should be mutual solubility between water and CO2. The reduction in porosity and permeability is caused by NaCl precipitation.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-10068223",
                          "updatedAt": "2024-07-17T02:16:02Z",
                          "publishedAt": "2024-07-17T02:16:01Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "robo-boluo"
                          },
                          "bodyText": "I'm not a porous flow module developer From a general MOOSE developer point of view, I think this should be doable\nRemind me of the behavior with the fraction variable? It s supposed to be physically bound? Should it have its own variable?\n\nThe mechanism process of salt precipitation is clear to me. In my code, xnacl represents the mass fraction variable in Kernel block.",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-10068241",
                          "updatedAt": "2024-07-17T02:20:05Z",
                          "publishedAt": "2024-07-17T02:19:41Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "the salt mass fraction increases until it reaches the solubility limit\n\nhow does this happen in the equations? When the solubility limit is reached, does some sink term sky-rocket or something? Or a property changes to prevent xnacl to keep going?",
                          "url": "https://github.com/idaholab/moose/discussions/27832#discussioncomment-10068774",
                          "updatedAt": "2024-07-17T04:02:05Z",
                          "publishedAt": "2024-07-17T04:02:05Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "\"Negative Jacobian\" when using GapHeatTransfer",
          "author": {
            "login": "WayneX-Wong"
          },
          "bodyText": "Hi there,\nI was using GapHeatTransfer, but encountered a \"negative jacobian\" error.\nModel:\nA cylinder and a hollow cylinder with a 1cm gap between the bottom surface of the former and the top surface of the latter, GapHeatTransfer is set to this gap.\n\nInput:\nShown as main.txt\nError:\nElem Information\n   id()=invalid, unique_id()=invalid, subdomain_id()=1, processor_id()=0\n   type()=QUAD4\n   dim()=2\n   n_nodes()=4\n   mapping=LAGRANGE_MAP\n    0  Node id()=84581, processor_id()=0, Point=(x,y,z)=(-0.0962917, 0.0269797,      0.5)\n    DoFs=(0/0/84581) (1/0/169162) (1/1/169163) \n    1  Node id()=84056, processor_id()=0, Point=(x,y,z)=(-0.112731,   0.0372,      0.5)\n    DoFs=(0/0/84056) (1/0/168112) (1/1/168113) \n    2  Node id()=84451, processor_id()=0, Point=(x,y,z)=(-0.113464, 0.0171475,      0.5)\n    DoFs=(0/0/84451) (1/0/168902) (1/1/168903) \n    3  Node id()=84580, processor_id()=0, Point=(x,y,z)=(-0.0990686, 0.0136167,      0.5)\n    DoFs=(0/0/84580) (1/0/169160) (1/1/169161) \n   n_sides()=4\n    neighbor(0)=nullptr\n    neighbor(1)=nullptr\n    neighbor(2)=nullptr\n    neighbor(3)=nullptr\n   hmin()=0.0136485, hmax()=0.027255\n   volume()=0.000269658\n   active()=1, ancestor()=0, subactive()=0, has_children()=0\n   parent()=nullptr\n   level()=0, p_level()=0\n   refinement_flag()=DO_NOTHING\n   p_refinement_flag()=DO_NOTHING\n   DoFs=\nlibMesh terminating:\nERROR: negative Jacobian -4.1359e-25 at point (x,y,z)=(-0.0533052, 0.0001775,      0.5) in element 18446744073709551615\n\nNegative Jacobian error occurs at the inner hollow on the top surface of the hollow cylinder, with no node exists there\nTroubleshooting attempt:\n\nI first checked the mesh volume and conformality using the MeshDiagnosticsGenerator and found no negative volume or non-confromal issues\n\n*** Info ***\nNumber of elements below prescribed minimum volume : 0\n\n\n*** Info ***\nNumber of elements with negative volume : 0\n\n\n*** Info ***\nNumber of elements above prescribed maximum volume : 0\n\n\n*** Info ***\nNumber of non-conformal nodes: 0\n\n\nI then tried to change the hollow cylinder to a solid cylinder in the model, which was able to run normally without any error, and got a result which seems reasonable.\n\nIs the problem due to the fact that GapHeatTransfer cannot applied to situation when two surfaces have different shapes?\nThanks!",
          "url": "https://github.com/idaholab/moose/discussions/27934",
          "updatedAt": "2024-07-17T03:16:55Z",
          "publishedAt": "2024-06-19T02:46:27Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nWhen using the MeshDiagnosticsGenerator in 1), did you use the element jacobian check?\nIf this reports an error, then your input mesh has a problem.\nA close up to the elements around (-0.0962917, 0.0269797,      0.5)  (from the log) could show the issue\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9812668",
                  "updatedAt": "2024-06-19T03:36:21Z",
                  "publishedAt": "2024-06-19T03:36:20Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "WayneX-Wong"
                          },
                          "bodyText": "Hello Guillaume\nI use the element jacobian check, it reports no error\n*** Info ***\nNumber of elements with a negative Jacobian: 0\n\n*** Info ***\nNumber of element sides with negative Jacobians: 0",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9813925",
                          "updatedAt": "2024-06-19T06:49:05Z",
                          "publishedAt": "2024-06-19T06:49:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Ok good. So the initial mesh is decent.\nThe first step for the element deformation errors is to set the dirichlet BCs to \"preset = false\"",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9818128",
                          "updatedAt": "2024-06-19T13:55:57Z",
                          "publishedAt": "2024-06-19T13:55:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "WayneX-Wong"
                          },
                          "bodyText": "I added \"preset = false\" in DirichletBC, but it didn't work, still same error.",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9823271",
                          "updatedAt": "2024-06-20T01:41:39Z",
                          "publishedAt": "2024-06-20T01:41:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Next step would be to reduce the time step",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9823448",
                          "updatedAt": "2024-06-20T02:10:31Z",
                          "publishedAt": "2024-06-20T02:10:30Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "WayneX-Wong"
                          },
                          "bodyText": "Actually it's a steady execution. My guess is whether GapHeatTransfer can only be used for heat transfer between regular surfaces without holes?",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9823523",
                          "updatedAt": "2024-06-20T02:27:04Z",
                          "publishedAt": "2024-06-20T02:27:04Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Can you turn it into a transient and relax to steady state?\nI m wondering if maybe the solids are expanding and you are getting inter-penetration between the two blocks\nGapHeatTransfer requires a gap and two surfaces in front of each other, there is no radiation going through the large hole.\nBut this is not why the mesh is being deformed and the simulation crashing.",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9823839",
                          "updatedAt": "2024-06-20T03:21:27Z",
                          "publishedAt": "2024-06-20T03:21:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "WayneX-Wong"
                          },
                          "bodyText": "I change my input into a transient one, and use very small time step, but it gives same error before solving.\nFramework Information:\nMOOSE Version:           git commit 82e31844cb on 2024-05-21\nLibMesh Version:         \nPETSc Version:           3.20.3\nSLEPc Version:           3.20.1\nCurrent Time:            Thu Jun 20 13:55:55 2024\nExecutable Timestamp:    Fri Jun  7 12:00:06 2024\n\nParallelism:\n  Num Processors:          1\n  Num Threads:             1\n\nMesh: \n  Parallel Type:           replicated\n  Mesh Dimension:          3\n  Spatial Dimension:       3\n  Nodes:                   84600\n  Elems:                   75648\n  Num Subdomains:          2\n\nNonlinear System:\n  Num DOFs:                84600\n  Num Local DOFs:          84600\n  Variables:               \"T\" \n  Finite Element Types:    \"LAGRANGE\" \n  Approximation Orders:    \"FIRST\" \n\nAuxiliary System:\n  Num DOFs:                169200\n  Num Local DOFs:          169200\n  Variables:               { \"penetration\" \"paired_T\" } \n  Finite Element Types:    \"LAGRANGE\" \n  Approximation Orders:    \"FIRST\" \n\nExecution Information:\n  Executioner:             Transient\n  TimeStepper:             ConstantDT\n  TimeIntegrator:          ImplicitEuler\n  Solver Mode:             Preconditioned JFNK\n\n  Elem Information\n   id()=invalid, unique_id()=invalid, subdomain_id()=1, processor_id()=0\n   type()=QUAD4\n   dim()=2\n   n_nodes()=4\n   mapping=LAGRANGE_MAP\n    0  Node id()=84581, processor_id()=0, Point=(x,y,z)=(-0.0962917, 0.0269797,      0.5)\n    DoFs=(0/0/84581) (1/0/169162) (1/1/169163) \n    1  Node id()=84056, processor_id()=0, Point=(x,y,z)=(-0.112731,   0.0372,      0.5)\n    DoFs=(0/0/84056) (1/0/168112) (1/1/168113) \n    2  Node id()=84451, processor_id()=0, Point=(x,y,z)=(-0.113464, 0.0171475,      0.5)\n    DoFs=(0/0/84451) (1/0/168902) (1/1/168903) \n    3  Node id()=84580, processor_id()=0, Point=(x,y,z)=(-0.0990686, 0.0136167,      0.5)\n    DoFs=(0/0/84580) (1/0/169160) (1/1/169161) \n   n_sides()=4\n    neighbor(0)=nullptr\n    neighbor(1)=nullptr\n    neighbor(2)=nullptr\n    neighbor(3)=nullptr\n   hmin()=0.0136485, hmax()=0.027255\n   volume()=0.000269658\n   active()=1, ancestor()=0, subactive()=0, has_children()=0\n   parent()=nullptr\n   level()=0, p_level()=0\n   refinement_flag()=DO_NOTHING\n   p_refinement_flag()=DO_NOTHING\n   DoFs=\nlibMesh terminating:\nERROR: negative Jacobian -4.1359e-25 at point (x,y,z)=(-0.0533052, 0.0001775,      0.5) in element 18446744073709551615\nStack frames: 21\n0: libMesh::print_trace(std::ostream&)\n1: libMesh::MacroFunctions::report_error(char const*, int, char const*, char const*, std::ostream&)\n2: libMesh::FEMap::compute_single_point_map(unsigned int, std::vector<double, std::allocator<double> > const&, libMesh::Elem const*, unsigned int, std::vector<libMesh::Node const*, std::allocator<libMesh::Node const*> > const&, bool)\n3: libMesh::FEMap::compute_map(unsigned int, std::vector<double, std::allocator<double> > const&, libMesh::Elem const*, bool)\n4: libMesh::FE<2u, (libMesh::FEFamily)0>::reinit(libMesh::Elem const*, std::vector<libMesh::Point, std::allocator<libMesh::Point> > const*, std::vector<double, std::allocator<double> > const*)\n5: Moose::findContactPoint(PenetrationInfo&, libMesh::FEGenericBase<double>*, libMesh::FEGenericBase<double>*, libMesh::FEType&, libMesh::Point const&, bool, double, bool&)\n6: PenetrationThread::createInfoForElem(std::vector<PenetrationInfo*, std::allocator<PenetrationInfo*> >&, std::vector<PenetrationInfo*, std::allocator<PenetrationInfo*> >&, libMesh::Node const*, libMesh::Elem const*, std::vector<libMesh::Node const*, std::allocator<libMesh::Node const*> > const&, bool)\n7: PenetrationThread::operator()(libMesh::StoredRange<__gnu_cxx::__normal_iterator<unsigned long*, std::vector<unsigned long, std::allocator<unsigned long> > >, unsigned long> const&)\n8: /home/lagrange/projects/moose/framework/libmoose-opt.so.0(+0x1139f26) [0x7d98da139f26]\n9: PenetrationLocator::detectPenetration()\n10: GeometricSearchData::update(GeometricSearchData::GeometricSearchType)\n11: FEProblemBase::updateGeomSearch(GeometricSearchData::GeometricSearchType)\n12: FEProblemBase::initialSetup()\n13: Transient::init()\n14: MooseApp::executeExecutioner()\n15: MooseApp::run()\n16: ./pelican-opt(+0x30eb) [0x5557531e60eb]\n17: main\n18: /lib/x86_64-linux-gnu/libc.so.6(+0x29d90) [0x7d98cf829d90]\n19: __libc_start_main\n20: ./pelican-opt(+0x3396) [0x5557531e6396]\n[0] ../src/fe/fe_map.C, line 903, compiled May 15 2024 at 11:58:00\n\napplication called MPI_Abort(MPI_COMM_WORLD, 1) - process 0\n[unset]: write_line error; fd=-1 buf=:cmd=abort exitcode=1\n:\nsystem msg for write_line failure : Bad file descriptor\n\nAnd I didn't add any ThermalExpansion related syntax, just a simple ThermalConduction problem, there shouldn't be solid expansion I think.",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9824701",
                          "updatedAt": "2024-06-20T06:02:57Z",
                          "publishedAt": "2024-06-20T06:02:57Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "maxnezdyur"
                          },
                          "bodyText": "@GiudGiud\nIn the error:  ERROR: negative Jacobian -4.1359e-25 at point (x,y,z)=(-0.0533052, 0.0001775,      0.5) in element 18446744073709551615, the element number seems way too high. Is this some sort of overflow problem or do we actually order elements like that?",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9828098",
                          "updatedAt": "2024-06-20T11:47:54Z",
                          "publishedAt": "2024-06-20T11:47:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Good catch. We are reading out of bounds here.\nCan you share a MWE of this error? We'll take a look",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9830822",
                          "updatedAt": "2024-06-20T15:54:11Z",
                          "publishedAt": "2024-06-20T15:54:09Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "WayneX-Wong"
                          },
                          "bodyText": "Sorry for the late reply, I put this input and mesh at https://github.com/WayneX-Wong/GapTransTestMOOSE.git",
                          "url": "https://github.com/idaholab/moose/discussions/27934#discussioncomment-9854902",
                          "updatedAt": "2024-06-24T01:31:29Z",
                          "publishedAt": "2024-06-24T01:31:28Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Error \"Assertion `i < _size' failed\"",
          "author": {
            "login": "ashishdhole"
          },
          "bodyText": "Hello,\nI am facing this very strange issue where when I run my simulation with no mpirun, the code works, but when I use mpirun the code terminates with segmentation fault. I tried to debug the code and I got following error\nAssertion `i < _size' failed\nAccess out of bounds in MooseArray (i: 4 size: 4)\nat /home/ashish/projects/moose/framework/build/header_symlinks/MooseArray.h, line 275\n\ncan you tell me what is happening? Also I introduced an if-else condition to my defined variable. whenever I run the code with this condition the code fails with mpirun, but if I comment out the condition and give a fixed value to the variable the code works.\nLooking forward.\nThank you\nAshish",
          "url": "https://github.com/idaholab/moose/discussions/28048",
          "updatedAt": "2024-07-16T21:28:55Z",
          "publishedAt": "2024-07-02T16:50:10Z",
          "category": {
            "name": "Q&A Modules: Phase field"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "grmnptr"
                  },
                  "bodyText": "We will need some more detail to be able to help. Source files, input files would all help. This is a generic error, usually MooseArrays hold local quantities on the element you are working on in the integration process.",
                  "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9950190",
                  "updatedAt": "2024-07-03T15:59:02Z",
                  "publishedAt": "2024-07-03T15:59:01Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "ashishdhole"
                          },
                          "bodyText": "I have following if-else condition in my source file.\nReal diff = std::abs(total_energy) - std::abs(friction_energy);\n  Real cond = _condition;\n  if (diff <= 0.0)\n    cond = 0.0;\n  if (diff > 0.0)\n    cond = 1.0;\n\nthis terminates the simulation with exit with Segmentation fault\nTime Step 1, time = 1, dt = 1\n\n===================================================================================\n=   BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES\n=   PID 171389 RUNNING AT ashish-Inspiron-14-5430\n=   EXIT CODE: 139\n=   CLEANING UP REMAINING PROCESSES\n=   YOU CAN IGNORE THE BELOW CLEANUP MESSAGES\n===================================================================================\nYOUR APPLICATION TERMINATED WITH THE EXIT STRING: Segmentation fault (signal 11)\nThis typically refers to a problem with your application.\nPlease see the FAQ page for debugging suggestions\n\nbut, when I remove the if-else condition my code (as shown below) works perfectly.\n  Real diff = std::abs(total_energy) - std::abs(friction_energy);\n  Real cond = _condition;\n  //if (diff <= 0.0)\n  //  cond = 0.0;\n  //if (diff > 0.0)\n  //  cond = 1.0;\n\noutput without if-else\nTime Step 1, time = 1, dt = 1\n 0 Nonlinear |R| = 7.467166e+00\n      0 Linear |R| = 7.467166e+00\n      1 Linear |R| = 9.334315e-01\n      2 Linear |R| = 1.115297e-01\n      3 Linear |R| = 1.617172e-02\n      4 Linear |R| = 2.514307e-03\n 1 Nonlinear |R| = 2.876662e-01\n      0 Linear |R| = 2.876662e-01\n      1 Linear |R| = 3.856408e-02\n      2 Linear |R| = 4.187094e-03\n      3 Linear |R| = 6.045403e-04\n      4 Linear |R| = 1.025084e-04\n 2 Nonlinear |R| = 1.206798e-03\n Solve Converged!\n  Finished Solving\n\nI am not changing anything at all.",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9951313",
                          "updatedAt": "2024-07-03T18:16:53Z",
                          "publishedAt": "2024-07-03T18:16:53Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "grmnptr"
                          },
                          "bodyText": "Hmmm, this feels like some memory corruption somewhere connected to this:\nReal diff = std::abs(total_energy) - std::abs(friction_energy);\n\nI would try to run the application with valgrind. Do you have access to valgrind?",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9952171",
                          "updatedAt": "2024-07-03T20:14:43Z",
                          "publishedAt": "2024-07-03T20:14:16Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "grmnptr"
                          },
                          "bodyText": "How are total_energy and friction_energy computed?",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9952279",
                          "updatedAt": "2024-07-03T20:31:00Z",
                          "publishedAt": "2024-07-03T20:30:59Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ashishdhole"
                          },
                          "bodyText": "Real total_energy = ((_mu[_qp] * (op * op * op - op + (3 * op * SumOPj))) +\n                     (_grad_u[_qp] * _kappa[_qp] * _grad_test[_i][_qp]));\nReal friction_energy = (3 * g * op * SumOPGj);\n\nAm I making a mistake somewhere?",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9954035",
                          "updatedAt": "2024-07-04T02:55:13Z",
                          "publishedAt": "2024-07-04T02:55:13Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ashishdhole"
                          },
                          "bodyText": "I think\n(_grad_u[_qp] * _kappa[_qp] * _grad_test[_i][_qp])\nHas some issue. Do you think I can somehow make it a Real variable?",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9954260",
                          "updatedAt": "2024-07-04T03:42:44Z",
                          "publishedAt": "2024-07-04T03:42:44Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "This should be fine.\nBy any chance, in the header, do you have a reference (or a copy) of _mu and _kappa? Or any of the other variables?\nYou want to take references, because they are computed elsewhere",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9954648",
                          "updatedAt": "2024-07-04T05:11:06Z",
                          "publishedAt": "2024-07-04T05:11:05Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ashishdhole"
                          },
                          "bodyText": "Yes I do have kappa and mu in the header file.",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9954658",
                          "updatedAt": "2024-07-04T05:12:50Z",
                          "publishedAt": "2024-07-04T05:12:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ashishdhole"
                          },
                          "bodyText": "I don't have _grad_u and _grad_test in header file.",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9954667",
                          "updatedAt": "2024-07-04T05:14:33Z",
                          "publishedAt": "2024-07-04T05:14:33Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "that's normal\nhow does _kappa and _mu look like in the header?",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9954691",
                          "updatedAt": "2024-07-04T05:17:38Z",
                          "publishedAt": "2024-07-04T05:17:38Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "ashishdhole"
                          },
                          "bodyText": "const MaterialProperty<Real> & _mu;\nconst MaterialProperty<Real> & _kappa;\n\nI referenced ACGrGrBase.h for these values.",
                          "url": "https://github.com/idaholab/moose/discussions/28048#discussioncomment-9954704",
                          "updatedAt": "2024-07-04T05:19:48Z",
                          "publishedAt": "2024-07-04T05:19:48Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Negative Jacobian - contact using non-conforming mesh",
          "author": {
            "login": "prajwalka"
          },
          "bodyText": "Hi,\nMy problem is similar to #16616. I'm trying a simple contact problem with a softer cylinder compressed using rigid cylindrical grips.  I've made three separate cylinders using Cubit and meshed them separately (so the meshes in the contact region are not the same on the two contact surfaces). As a result, depending on the primary and secondary surfaces I am choosing in the contact action block, there is or isn't a negative jacobian error at the beginning of the simulation.\nI've attached the mesh file and two sample input files, one of which works, while the other doesn't. Any help on the same is really appreciated. Thank you so much.\ncontact.zip",
          "url": "https://github.com/idaholab/moose/discussions/28091",
          "updatedAt": "2024-07-16T21:13:59Z",
          "publishedAt": "2024-07-10T03:25:12Z",
          "category": {
            "name": "Q&A Meshing"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Possibly tied to #27934\nDoes the \"negative Jacobian\" error give a really really high number for the id of the element?\nWhat is the error message?",
                  "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10004947",
                  "updatedAt": "2024-07-10T04:14:24Z",
                  "publishedAt": "2024-07-10T04:14:12Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "prajwalka"
                          },
                          "bodyText": "Yes, the id of the element is large, while the jacobian value is -1e-16 (PFB the error).\nSimilar to #27934, I get 0 elements with negative volume, overlapping elements, elements with negative jacobian, and element sides with negative jacobian when I run the mesh diagnostics. I get a lot of non-planar element sides, but I don't think they are connected to this issue. The error is for a \"sideset\" QUAD4 element on the planar contact surface, which looks fine when I visualize using Paraview.",
                          "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10005009",
                          "updatedAt": "2024-07-10T04:29:29Z",
                          "publishedAt": "2024-07-10T04:29:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "I get a lot of non-planar element sides, but I don't think they are connected to this issue.\n\nyes correct.\n@lindsayad fyi\nI might have time tomorrow.",
                          "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10005079",
                          "updatedAt": "2024-07-10T04:45:31Z",
                          "publishedAt": "2024-07-10T04:45:29Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "What contact formulation are you using? Node-face or mortar? What is driving the blocks into contact?",
                          "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10012166",
                          "updatedAt": "2024-07-10T16:16:32Z",
                          "publishedAt": "2024-07-10T16:16:31Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lindsayad"
                          },
                          "bodyText": "If you are driving the blocks into contact via something like a Dirichlet displacement condition, then this can generate negative jacobians very easily. Imagine forcing boundary nodes to move past the interior nodes and you have a negative Jacobian. The fix in this case is to set your displacement Dirichlet conditions to have preset = false",
                          "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10012187",
                          "updatedAt": "2024-07-10T16:19:55Z",
                          "publishedAt": "2024-07-10T16:19:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "prajwalka"
                          },
                          "bodyText": "I'm using the node/face formulation itself for a 3D simulation. Nope, this error is occurring even before the simulation starts (in the mesh generation stage itself). I've tried a few other meshes as well, and this error occurs in most of them. For this mesh, when I change the primary and secondary faces, the simulation runs fine for the first few steps, but leads to distortions thereafter (I thought that maybe I'm using the smaller surface as the primary and the larger surface as the secondary). So, I don't think the Dirichlet BCs are causing this error.",
                          "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10012295",
                          "updatedAt": "2024-07-10T16:34:05Z",
                          "publishedAt": "2024-07-10T16:34:05Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "I added some code that lets us get past these failures in finding contact nodes\nIt's not perfect yet, I ll be working with Ben to see what I would have missed\n#28149",
                  "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10066190",
                  "updatedAt": "2024-07-16T19:24:39Z",
                  "publishedAt": "2024-07-16T19:24:38Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "prajwalka"
                          },
                          "bodyText": "Thanks a lot for looking into this. I'll check it out.",
                          "url": "https://github.com/idaholab/moose/discussions/28091#discussioncomment-10066854",
                          "updatedAt": "2024-07-16T21:13:59Z",
                          "publishedAt": "2024-07-16T21:13:59Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}