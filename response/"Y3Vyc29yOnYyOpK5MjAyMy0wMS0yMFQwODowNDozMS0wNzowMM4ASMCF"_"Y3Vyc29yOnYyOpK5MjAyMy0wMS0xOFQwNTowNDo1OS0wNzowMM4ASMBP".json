{
  "discussions": {
    "pageInfo": {
      "hasNextPage": true,
      "endCursor": "Y3Vyc29yOnYyOpK5MjAyMy0wMS0xOFQwNTowNDo1OS0wNzowMM4ASMBP"
    },
    "edges": [
      {
        "node": {
          "title": "HHT-alpha time integration vs external forces (Neumann BCs)",
          "author": {
            "login": "rcontinuum"
          },
          "bodyText": "Hello,\nI'm trying to use in (old) TensorMechanics the HHT-alpha time integrator and I want to apply a time dependent external mechanical force (\"dead load\") given as a piecewise linear function.\nI do that with\n[Functions]\n  [load]\n    type = PiecewiseLinear\n    x = '0.0 0.25 0.75 1.0'    # time \n    y = '0.0 2.0 -2.0  0.0'    # value   \n  []\n[]\n\n[BCs]\n [pull_x]\n    type = FunctionNeumannBC\n    boundary = right\n    variable = disp_x\n    function = load\n  []\n[]\n\nIn the documentation of the HHT-alpha method, see Section \"Hilber-Hughes-Taylor time integration\" in\nhttps://mooseframework.inl.gov/moose/modules/tensor_mechanics/Dynamics.html\nthe external force $F_{ext}$ (here FunctionNeumannBC) should be evaluated at time $t_\\alpha = t+(1+\\alpha)\\Delta t$ . $t$ would be $t_{old}$.\nBut I presume, I may be wrong, that the Function type = PiecewiseLinear is always evaluated at the current time which would be $t_{new} = t+\\Delta t$ and not at the (generalised) midpoint time $t_\\alpha$ given by the parameter $\\alpha \\in [-1/3, 0]$.\nAm I right or wrong about this? Any chance to get the parameter $\\alpha$ into type = PiecewiseLinear? Or in any other predefined function, so that the function is evaluated at the midpoint time?\nCheers\nPS:  Other mechanical external forces $F_{ext}$ as, e.g.,  Pressure (follower force)\nhttps://mooseframework.inl.gov/moose/source/bcs/Pressure.html\nand Gravity\nhttps://mooseframework.inl.gov/source/kernels/Gravity.html\nhave an additional parameter (hht_)alpha to evaluate  $F_{ext}$  at the correct midpoint time. Or maybe the evaluation is done by linear interpolation using $\\alpha$ and $F_{ext}(t_{old})$ and $F_{ext}(t_{new})$. I didn't check the implementation.\nPPS: I was able to get $t_{new}, \\Delta t$ and $\\alpha$ into a ParsedFunction, so I could use that to define a PiecewiseLinear\nfunction which is evaluated at the correct midpoint time. That looks a bit \"clunky\" ... but seems to work.",
          "url": "https://github.com/idaholab/moose/discussions/23209",
          "updatedAt": "2023-01-20T15:17:04Z",
          "publishedAt": "2023-01-20T09:30:17Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "hugary1995"
                  },
                  "bodyText": "You are correct in that FunctionNeumannBC does not honor HHT-alpha time integration.\nFor now, there are two workarounds\n\nUse ParsedFunction as you discovered;\nCreate your own class that derives from FunctionNeumannBC, in which you'll handle the time integration by querying the function at time _t + (1 + _alpha ) * _dt.\n\nThis is a design issue, so feel free to open a feature request ticket. I don't guarantee an ETA for the fix though. You'll have to consult with the MOOSE team. As always, pull requests are welcome.",
                  "url": "https://github.com/idaholab/moose/discussions/23209#discussioncomment-4737462",
                  "updatedAt": "2023-01-20T13:38:41Z",
                  "publishedAt": "2023-01-20T13:38:41Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Temperature Dependent Anisotrpic Heat Transfer",
          "author": {
            "login": "bhollra"
          },
          "bodyText": "Greetings all,\nI would like to implement a model for ansiotropic heat transfer with temperature dependent thermal conductivities. I have looked at the AnisoHeatConduction kernel with AnisoHeatConductionMaterial, but it was not clear to me how temperature dependency can be included. The only option I see to create a variable thermal conductivity is with the thermal_conductivity_x_pp parameter, but this accepts only a scalar post processor, so it seems a spatially varying material property is not possible.\nI did not see any other Kernel or Material blocks that looked capable of solving this problem. Is temperature dependent, anisotropic heat transfer possible in MOOSE?\nThank you!",
          "url": "https://github.com/idaholab/moose/discussions/18082",
          "updatedAt": "2023-01-19T21:51:57Z",
          "publishedAt": "2021-06-14T15:38:47Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "singhgp4321"
                  },
                  "bodyText": "#17783 might be what you are planning to use. This pull request is under review and should get merged soon . . . in about a week or so I think.",
                  "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-869742",
                  "updatedAt": "2022-06-11T11:34:34Z",
                  "publishedAt": "2021-06-14T17:50:13Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "bhollra"
                          },
                          "bodyText": "Thanks for the heads up, looking forward to using the new version!",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-869931",
                          "updatedAt": "2022-06-11T11:34:34Z",
                          "publishedAt": "2021-06-14T18:45:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hamedattariani"
                          },
                          "bodyText": "#17783 might be what you are planning to use. This pull request is under review and should get merged soon . . . in about a week or so I think.\n\nDoes this kernel work for user-defined temperature-dependent thermal conductivity and specific heat? I tried to define them as ParsedMaterial, but I am getting errors.",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4627877",
                          "updatedAt": "2023-01-08T22:19:26Z",
                          "publishedAt": "2023-01-08T22:19:26Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "It should but you need to specify anisotropic material properties, so typically vectors or tensors-values, not Real-valued.\nFor this new kernel it seems you need to use a RankTwo tensor\nHow are you defining the ParsedMaterial ?\nYou can try with something like this\nhttps://mooseframework.inl.gov/source/materials/ADGenericFunctionRankTwoTensor.html",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4633144",
                          "updatedAt": "2023-01-09T12:45:17Z",
                          "publishedAt": "2023-01-09T12:45:16Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hamedattariani"
                          },
                          "bodyText": "I used \"DerivativeParsedMaterial\" and also \"ParsedMaterial\" in the input script for  \"Thermal Conductivity\" and \"specific heat\". I got errors for both scenarios. Error\" Unable to find function \"specific heat\"\nThe ADGenericFunctionRankTwoTensor is indeed interesting. But, the issue is the ParsedFunction can be an \"expression as a function of time (t) or coordinate (x, y, or z)\". I need it as a function of the temperature. Please, correct me if I am wrong and making a fundamental mistake here.\nExample:\nI defined KTX, etc as  the \"DerivativeParsedMaterial\" or \"ParsedMaterial\" in the material block\n[Materials]\n[heat1]\ntype = AnisoHeatConductionMaterial\ntemperature = temperature\nspecific_heat = specific_heat\nthermal_conductivity = 'K_TX K_TY K_TZ 0 0 0 0 0 0'\n[]\n[./specific_heat ]\ntype = ParsedMaterial\nf_name = specific_heat\nargs = 'temperature'\nfunction = '(1/(1+exp(-2**(temperature-273))))(483.04+0.215temperature)'\noutputs = exodus\n[../]",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4639236",
                          "updatedAt": "2023-01-09T23:41:25Z",
                          "publishedAt": "2023-01-09T23:41:24Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "So this field should be a function not a material property. That s what the error is complaining about\nyou ll need to rework that material a bit if you want a temperature dependence.\nAlternatively you could try to use another material that supports it, maybe splitting up the three properties in three materials.",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4639933",
                          "updatedAt": "2023-01-10T01:24:31Z",
                          "publishedAt": "2023-01-10T01:24:31Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "singhgp4321"
                          },
                          "bodyText": "@hamedattariani Checkout out #22028 and the included test. Seems like that is what you want? If yes, I will put it on my priority list to get it merged.",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4649459",
                          "updatedAt": "2023-01-10T20:11:22Z",
                          "publishedAt": "2023-01-10T20:11:22Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hamedattariani"
                          },
                          "bodyText": "@singhgp4321 Yessss, thanks, that is exactly what I need.",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4649677",
                          "updatedAt": "2023-01-10T20:42:14Z",
                          "publishedAt": "2023-01-10T20:42:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "singhgp4321"
                          },
                          "bodyText": "Okay, I'll work on it and let you know when it is ready . . . may be 1-2 weeks. If you want it earlier than that then may be you can just copy the code from the PR.",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4650477",
                          "updatedAt": "2023-01-10T22:35:36Z",
                          "publishedAt": "2023-01-10T22:35:35Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "hamedattariani"
                          },
                          "bodyText": "@singhgp4321 Thanks! I just copied the files from PR and compiled the code. It works well.",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4732144",
                          "updatedAt": "2023-01-19T21:50:44Z",
                          "publishedAt": "2023-01-19T21:50:43Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "singhgp4321"
                          },
                          "bodyText": "Excellent! @hamedattariani",
                          "url": "https://github.com/idaholab/moose/discussions/18082#discussioncomment-4732155",
                          "updatedAt": "2023-01-19T21:51:57Z",
                          "publishedAt": "2023-01-19T21:51:57Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Using a same input parameter in different Material",
          "author": {
            "login": "SomnusYu"
          },
          "bodyText": "Hi all,\nI'd like to use the same input parameters in two different source codes of Materials, but I don't want to define these parameters twice. I just want to define these in one of the source codes, the other material code can directly use them. For example, the parameters is shown as:\nMooseEnum b_choice(\"1 2 3 \", \"1\");\nparams.addParam(\"b\",  b_choice, \" \");\nWhat should I do?\nThank you!",
          "url": "https://github.com/idaholab/moose/discussions/23200",
          "updatedAt": "2023-01-19T14:45:01Z",
          "publishedAt": "2023-01-19T13:31:56Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nyou can create a base class that has these parameters.\nthen either one of your material is the base class and the other is a derived class or both are derived classes.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4727716",
                  "updatedAt": "2023-01-19T13:38:23Z",
                  "publishedAt": "2023-01-19T13:38:22Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "SomnusYu"
                          },
                          "bodyText": "Hi\nDo you have an example of the base class material (AD type)? I have tried this way but the computeQpProperties function in the base class may cause the error. I don't know how to fix it.\nThank you!",
                          "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4727787",
                          "updatedAt": "2023-01-19T13:44:49Z",
                          "publishedAt": "2023-01-19T13:44:49Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "what error?\nYou do not necessarily need computeQpProperties defined in the base class as long as it s an abstract class (eg it s not meant to be instantiated in an input file, you dont register it to MooseApp). You will need computeQpProperties defined in all the classes that are registered",
                          "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4727833",
                          "updatedAt": "2023-01-19T13:49:22Z",
                          "publishedAt": "2023-01-19T13:49:21Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "SomnusYu"
                          },
                          "bodyText": "But it is necessary to contain the computeQpProperties if we inherited the ADMaterial. Do you have an example?",
                          "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4727902",
                          "updatedAt": "2023-01-19T13:56:29Z",
                          "publishedAt": "2023-01-19T13:56:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "only if the class is registered. The base class could not define it.\nIf you want you can just define it as an empty routine, but make sure to override it in the derived classes",
                          "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4728100",
                          "updatedAt": "2023-01-19T14:13:36Z",
                          "publishedAt": "2023-01-19T14:13:36Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "SomnusYu"
                          },
                          "bodyText": "Sorry, I'm not clear on what should I do. How to define it as an empty routine? If you kindly offer me an example, it would be clearer.",
                          "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4728307",
                          "updatedAt": "2023-01-19T14:32:18Z",
                          "publishedAt": "2023-01-19T14:32:18Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "void <className>::computeQpProperties() {} \nfor the empty one\nthen in the derived classes:\nvoid <derivedClassName>::computeQpProperties()\n{\n  some_property[_qp] = value it needs;\n}",
                          "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4728350",
                          "updatedAt": "2023-01-19T14:37:03Z",
                          "publishedAt": "2023-01-19T14:36:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "SomnusYu"
                          },
                          "bodyText": "Oh, I see. Thank you very much!",
                          "url": "https://github.com/idaholab/moose/discussions/23200#discussioncomment-4728431",
                          "updatedAt": "2023-01-19T14:44:00Z",
                          "publishedAt": "2023-01-19T14:43:59Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Convergence of advection in PF module",
          "author": {
            "login": "lloyd-5731"
          },
          "bodyText": "I am looking to advect a variable inside the porous flow module.\nThe value has to be limited between 0 and 1, however I am experiencing massive overshooting and instability (resulting in oscillations) when advecting, leading it to be outside this region.\nI have looked at the different stabiliser options, however none seem to be doing the trick. The closest to realistic results I am getting are from the PorousFlowBasicAdvection kernel. It seems logical the upwinding will not work because there are regions where the value is approximately in a steady state, I do not understand why the KT stabilisation is not helping however.\nIn the wider context, this variable will be acted on by other kernels but these have been removed for the MWE below.\nSome of the advection stabilisation options I've tried have been commented out in the MWE.\nAny direction would be appreciated.\nBest wishes,\nLloyd\nMWE:\nP0 = 5e5      # Injection pressure\nrho = 920       # Density\nk = 2.5e-11       # Permeability\nphi = 0.45      # Porosity\nT = 298\n\ninit_variable = 0  \ninput_from_BC = 1\n\n\n[Mesh]\n    [plate]\n        type = GeneratedMeshGenerator\n        dim = 2\n        xmax = 0.01\n        nx = 5\n        ymax = 1.0\n        ny = 100\n    []\n[]\n[UserObjects]\n    [dictator]\n        type = PorousFlowDictator\n        porous_flow_vars = 'porepressure'\n        number_fluid_phases = 1\n        number_fluid_components = 1\n    []\n    [pc]\n        type = CustomCapillaryPressure\n    []\n    [fluid_advective_flux]\n        type = PorousFlowAdvectiveFluxCalculatorUnsaturated\n        flux_limiter_type = superbee\n    []\n[]\n\n[GlobalParams]\n    PorousFlowDictator = dictator\n    gravity = '0 0 0'\n[]\n\n[Variables]\n    [porepressure]\n        initial_condition = 0\n    []\n    [variable_to_advect]\n        initial_condition = ${init_variable}\n    []\n[]\n\n[Kernels]\n    [dmdt]\n        type = PorousFlowMassTimeDerivative\n        variable = porepressure\n    []\n    [flux]\n        type = PorousFlowAdvectiveFlux\n        variable = porepressure\n    []\n    [advect_var_flux]\n        type = PorousFlowBasicAdvection\n        # type = PorousFlowAdvectiveFlux\n        # type = FluxLimitedTVDAdvection\n        # type = PorousFlowFluxLimitedTVDAdvection\n        \n        variable = variable_to_advect\n        \n        # advective_flux_calculator = fluid_advective_flux\n    []\n    [advect_var_time_derivative]\n        type = ADTimeDerivative\n        # type = MassLumpedTimeDerivative\n        \n        # multiply_by_density = false\n        \n        variable = variable_to_advect\n    []\n[]\n\n[AuxVariables]\n    [saturation]\n        family = MONOMIAL\n        order = CONSTANT\n    []\n[]\n\n[AuxKernels]\n    [saturation]\n        type = PorousFlowPropertyAux\n        variable = saturation\n        property = saturation\n    []\n[]\n\n[BCs]\n    [injection]\n        type = DirichletBC\n        variable = porepressure\n        boundary = 'top'\n        value = ${P0}\n    []\n\n    [DOC_in]\n        type = DirichletBC\n        variable = variable_to_advect\n        boundary = 'top'\n        value = ${input_from_BC}\n    []\n[]\n\n[Modules]\n    [FluidProperties]\n        [resin]\n            type = SimpleFluidProperties\n            density0 = ${rho}\n        []\n    []\n[]\n\n[Materials]\n    [porosity]\n        type = PorousFlowPorosity\n        porosity_zero = ${phi}\n    []\n    [permeability]\n        type = PorousFlowPermeabilityConst\n        permeability = '${k} 0 0   0 ${k} 0   0 0 ${k}'\n    []\n    [saturation_calculator]\n        type = PorousFlow1PhaseP\n        porepressure = porepressure\n        capillary_pressure = pc\n    []\n    [temperature]\n        type = PorousFlowTemperature\n        temperature = ${T}\n    []\n    [massfrac]\n        type = PorousFlowMassFraction\n    []\n    [resin]\n        type = PorousFlowSingleComponentFluid\n        fp = resin\n        phase = 0\n    []\n    [relperm]\n        type = PorousFlowRelativePermeabilityCorey\n        n = 3\n        s_res = 0.1\n        sum_s_res = 0.1\n        phase = 0\n    []\n    [darcy_velocity]\n        type = PorousFlowDarcyVelocityMaterial\n    []\n[]\n\n[Preconditioning]\n    [smp]\n        type = SMP\n        full = true\n        petsc_options_iname = '-pc_type -pc_factor_mat_solver_package'\n        petsc_options_value = ' lu       mumps'\n    []\n    \n[]\n\n[Executioner]\n    type = Transient\n    solve_type = 'NEWTON'\n    end_time = 2000\n\n    [TimeStepper]\n        type = SolutionTimeAdaptiveDT\n        dt = 0.001\n    []\n\n    automatic_scaling = true\n    nl_abs_tol = 1e-9\n    nl_rel_tol = 1e-9\n[]\n\n[Outputs]\n    exodus = true\n    print_linear_residuals = false\n[]",
          "url": "https://github.com/idaholab/moose/discussions/23082",
          "updatedAt": "2023-01-19T16:16:48Z",
          "publishedAt": "2023-01-05T15:37:53Z",
          "category": {
            "name": "Q&A Modules: General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "lloyd-5731"
                  },
                  "bodyText": "Here is an example of it working well with the PorousFlowBasicAdvection and ADTimeDerivative :\n\nAnd here is an example of the advection acting strangely with PorousFlowFluxLimitedTVDAdvection and MassLumpedTimeDerivative using superbee which to my understanding should be better:\n\nin a post from @hugary1995 #21598 he mentions -pc_type lu should not be used with DirichletBC. Could this be a source of the error.",
                  "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4603424",
                  "updatedAt": "2023-01-05T17:18:33Z",
                  "publishedAt": "2023-01-05T16:38:34Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": []
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "WilkAndy"
                  },
                  "bodyText": "The PorousFlow TVD schemes are mostly designed to work within a PorousFlow context only, and i can't really guarantee that they'll work outside of it.   Your current setup has PorousFlow creating the advective velocity, but a separate variable advecting via that velocity.   If that separate variable is supposed to be a fluid component, then i'd make it such (using number_fluid_components = 2 in the Dictator and following something like modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_1D.i , but probably using the https://mooseframework.inl.gov/source/actions/PorousFlowUnsaturated.html Action instead of Kernels).  However, if the separate variable is not a fluid component, then I think i'd use the https://mooseframework.inl.gov/source/kernels/ConservativeAdvection.html Kernel",
                  "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4605568",
                  "updatedAt": "2023-01-05T21:02:21Z",
                  "publishedAt": "2023-01-05T21:02:20Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "lloyd-5731"
                          },
                          "bodyText": "Hi Andy,\nThanks for the comment and the help!\n\n\nThe variable is an attribute of the fluid that im looking to advect at the Darcy velocity, rather than a separate fluid component so it is my understanding that using a different fluid component wouldn't work. Is this right?\n\n\nUnfortunately I don't think I can use the action system as I need to add my custom kernels in, as this is only a MWE>\n\n\nI will have a look at ConservativeAdvection, will this still advect at the Darcy velocity as it does when I use the porous flow advection kernels?\n\n\nIll get back to you and let you know the outcome!\nLloyd",
                          "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4606395",
                          "updatedAt": "2023-01-05T22:44:46Z",
                          "publishedAt": "2023-01-05T22:44:46Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "WilkAndy"
                          },
                          "bodyText": "(1) You could treat it as a fluid component, and have all the fluid properties, etc, not depend on it, and PorousFlow will work fine, BUT it seems an overkill - i think your current approach is better\n(3) Yes, ConservativeAdvection will advect at the Darcy velocity - you just have to define an AuxVariable that is the Darcy velocity.   The slight problem is that you'll miss terms in the Jacobian, because ConservativeAdvection won't calculate the derivatives of the Darcy velocity with respect to the porepressure, so you'll get poorer convergence.  However, in many real-life situations, the porepressure rapidly goes to steadystate, so the Darcy velocity doesn't change much anyway, so it's likely you won't see many problems, except for during the first few timesteps.\nA",
                          "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4609530",
                          "updatedAt": "2023-01-06T07:54:47Z",
                          "publishedAt": "2023-01-06T07:54:47Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lloyd-5731"
                          },
                          "bodyText": "Thanks Andy, that's made a real difference and is looking much better.\nI have slightly changed the ConservativeAdvection kernel so that it takes the Darcy velocity as the velocity (scaled by 1/ porosity) and it is now advecting with the flow front.\nThe instability at the start however is causing the instability to ripple through the rest of the solve.\nI suppose the solution to this is to write the proper Jacobian, but im not sure why the existing Jacobian is incorrect is I have just replace the viscosity with the Darcy Velocity?\nThe relevant part of the .C file looks like this:\n Real\nLSConservativeAdvection::negSpeedQp() const\n{\n  return -_grad_test[_i][_qp] * _darcy_velocity[_qp][0] / _porosity;\n}\n\nReal\nLSConservativeAdvection::computeQpResidual()\n{\n  // This is the no-upwinded version\n  // It gets called via Kernel::computeResidual()\n  return negSpeedQp() * _u[_qp];\n}\n\nReal\nLSConservativeAdvection::computeQpJacobian()\n{\n  // This is the no-upwinded version\n  // It gets called via Kernel::computeJacobian()\n  return negSpeedQp() * _phi[_j][_qp];\n}\n\nThanks for the help,\nLloyd",
                          "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4632347",
                          "updatedAt": "2023-01-09T12:12:25Z",
                          "publishedAt": "2023-01-09T11:05:14Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "WilkAndy"
                          },
                          "bodyText": "I'm glad that works.  Regarding your LSConservativeAdvection, I think that it would be better to do one of the following\n\nInherit from ConservativeAdvection, and just override the single function negSpeedQp by including your porosity.  No other coding should be necessary.  Then you get all the goodness of ConservativeAdvection, viz the tests that guarantee it is correct, and the upwinding.   (Perhaps this is what you've done already - i couldn't really tell from the above code snippets.)\nUse ConservativeAdvection (ie, don't do any C++ coding at all) but create an AuxVariable that is Darcy / porosity.   I think that's what i'd do, as it keep code modifications to a minimum (actually, zero modifications in this case!).\n\nI think the instability is due to not using upwinding_type = full, but i could easily be wrong!",
                          "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4638129",
                          "updatedAt": "2023-01-09T21:05:59Z",
                          "publishedAt": "2023-01-09T21:05:58Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "lloyd-5731"
                  },
                  "bodyText": "Hi Andy, I had previously had 1) implemented initially but I have now implemented 2) (upwinding_type = full is activated)\nI have realised that the source of my error is that because I am saturating the fibre, the darcy velocity is zero in the unsaturated part, the advection velocity to be discontinuous.\nI am trying to come up a plan to tackle this. My current idea is to create a subapp that slightly diffuses the darcy velocity at each time step to make it continuous. - Is this reasonable or would you recommend something else?\nWhen trying to do this I am currently taking out the components of the darcy velocity, passing them into my sub app and then trying to diffuse them. This won't work however, I think because the PorousFlowDarcyVelocityComponent is a Constant Monomial, and therefore I cannot get the gradient for the diffusion.\nI'd love to hear your thoughts.\nLloyd",
                  "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4667856",
                  "updatedAt": "2023-01-12T13:51:18Z",
                  "publishedAt": "2023-01-12T13:51:18Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "WilkAndy"
                          },
                          "bodyText": "What do you think happens in real life, @lloyd-5731 ?",
                          "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4681293",
                          "updatedAt": "2023-01-13T20:01:40Z",
                          "publishedAt": "2023-01-13T20:01:39Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "lloyd-5731"
                          },
                          "bodyText": "So I think that the variable should advect with the saturation front as it is a property of the fluid. Obviously it doesn't diffuse in reality, as it is a property of the fluid and the fluid is not diffusing, but it seems to be a work around at the minute. Now I have that working Im going to explore a couple of different more representative methods \ud83d\udc4d",
                          "url": "https://github.com/idaholab/moose/discussions/23082#discussioncomment-4728425",
                          "updatedAt": "2023-01-19T14:43:08Z",
                          "publishedAt": "2023-01-19T14:43:08Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "MOOSE update error - undefined reference",
          "author": {
            "login": "LukeFisherUKAEA"
          },
          "bodyText": "After a standard update of MOOSE using the commands in the Update MOOSE and Conda page, I am receiving the following error during execution of the make command.  I have checked and the 'libtiff' package is installed in the moose environment.  Any help would be much appreciated.  Thanks.",
          "url": "https://github.com/idaholab/moose/discussions/23191",
          "updatedAt": "2023-01-19T08:53:22Z",
          "publishedAt": "2023-01-18T15:51:06Z",
          "category": {
            "name": "Q&A Getting Started"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nThis is odd, it comes from a dependency not really from us.\nI d consider wiping the environment and installing it again. It's likely easier than debugging it.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/23191#discussioncomment-4719128",
                  "updatedAt": "2023-01-18T16:19:23Z",
                  "publishedAt": "2023-01-18T16:19:22Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "LukeFisherUKAEA"
                          },
                          "bodyText": "Hello Guillaume,\nMany thanks for this.  I'll go ahead with a new installation.\nLuke",
                          "url": "https://github.com/idaholab/moose/discussions/23191#discussioncomment-4725481",
                          "updatedAt": "2023-01-19T08:53:20Z",
                          "publishedAt": "2023-01-19T08:53:20Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "How to add a self-defined state variable in moose source codes",
          "author": {
            "login": "pshen20127"
          },
          "bodyText": "Hello all\nI want to add a internal state variable in the file 'CrystalPlasticityKalidindiUpdate.C'. But I met this error message as below.  What should I do to fix it? The 'shearstrain' in error message is the state variable I defined.\napplication called MPI_Abort(MPI_COMM_WORLD, 1) - process 3\n*** ERROR ***\nThe following error occurred in the object \"MOOSE Problem\", of type \"FEProblem\".\nMaterial property 'shearstrain', requested by 'shearstrain_0' is not defined on block GRAIN105_SET_QUAD4\nMaterial property 'shearstrain', requested by 'shearstrain_1' is not defined on block GRAIN105_SET_QUAD4\nMaterial property 'shearstrain', requested by 'shearstrain_10' is not defined on block GRAIN105_SET_QUAD4\nMaterial property 'shearstrain', requested by 'shearstrain_11' is not defined on block GRAIN105_SET_QUAD4\nMaterial property 'shearstrain', requested by 'shearstrain_2' is not defined on block GRAIN105_SET_QUAD4\nMaterial property 'shearstrain', requested by 'shearstrain_3' is not defined on block GRAIN105_SET_QUAD4\nMaterial property 'shearstrain', requested by 'shearstrain_4' is not defined on block GRAIN105_SET_QUAD4\nMaterial property 'shearstrain', requested by 'shearstrain_5' is not defined on block GRAIN105_SET_QUAD4\nThanks\npshen20127",
          "url": "https://github.com/idaholab/moose/discussions/23182",
          "updatedAt": "2023-01-18T21:15:22Z",
          "publishedAt": "2023-01-17T18:42:50Z",
          "category": {
            "name": "Q&A Modules: Solid mechanics"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYou need to make sure this property shearstrain is being defined on the relevant block.\nHow is it being defined currently?\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4710380",
                  "updatedAt": "2023-01-17T19:33:59Z",
                  "publishedAt": "2023-01-17T19:33:59Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "pshen20127"
                          },
                          "bodyText": "Thanks for your reply. I attached modified source codes and input file. You can search for 'shearstrain' in these files. In input file, all shearstrain-related settings follow the 'slip increment'. I am not sure if I should use type = MaterialStdVectorAux for shearstrain in AuxKernels.\nmodified source codes.zip",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4711633",
                          "updatedAt": "2023-01-17T22:29:01Z",
                          "publishedAt": "2023-01-17T22:29:01Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "We try to avoid downloading zip files from the internet. Can you please make a github repo?\nI ll try to check it out next week.",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4711697",
                          "updatedAt": "2023-01-17T22:35:56Z",
                          "publishedAt": "2023-01-17T22:35:55Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "pshen20127"
                          },
                          "bodyText": "Thank you so much. please see the link: https://github.com/pshen20127/IN625.git\nForgot to mention that when I modified the source codes, I copied the orginal files and change the filename and corresponding classes in codes by adding a suffix 'AddStateVar'. So don't be surprised these filenames are different from original ones.",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4711922",
                          "updatedAt": "2023-01-17T23:15:29Z",
                          "publishedAt": "2023-01-17T23:15:28Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Shearstrain has been declared like this\n    _shearstrain(declareProperty<std::vector<Real>>(_base_name + \"_shearstrain\")),\n\nso it s name is never shearstrain.\nIt's either base_name_shearstrain OR if base_name is not used in the input file it's _shearstrain with the underscore",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4711991",
                          "updatedAt": "2023-01-17T23:28:07Z",
                          "publishedAt": "2023-01-17T23:28:06Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "pshen20127"
                          },
                          "bodyText": "Thank you so much. I fix it. What is the '_base_name' in\n_shearstrain(declareProperty<std::vector<Real>>(_base_name + \"_shearstrain\")),\nI don't know where it is used.",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4712213",
                          "updatedAt": "2023-01-18T00:12:02Z",
                          "publishedAt": "2023-01-18T00:10:27Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "it's to prefix material properties if you had multiple phases in the grains or something. Let's you define the same type of properties multiple times",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4712221",
                          "updatedAt": "2023-01-18T00:12:43Z",
                          "publishedAt": "2023-01-18T00:12:42Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "pshen20127"
                          },
                          "bodyText": "Got it. Do you know how to define type in Auxkernels and postprocessor? I dont' know how many do they have and how to choose.\n\n[shearstrain_1]\ntype = MaterialStdVectorAux\nvariable = shearstrain_1\nproperty = shearstrain\nindex = 1\nexecute_on = timestep_end\n[]\n[shearstrain_1]\ntype = ElementAverageValue\nvariable = shearstrain_1\n[]",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4713373",
                          "updatedAt": "2023-01-18T04:55:17Z",
                          "publishedAt": "2023-01-18T04:16:59Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "If you just want to output the material properties to exodus you should use the 'outputs' parameter of the material.\nOtherwise you will need to define many auxkernels and many posptprocessors for all the ones you care about",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4716895",
                          "updatedAt": "2023-01-18T12:18:10Z",
                          "publishedAt": "2023-01-18T12:18:10Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "pshen20127"
                          },
                          "bodyText": "Is there a file in source codes recording which material properties I can output? Or where I can learn this content?\nIf I define a new variable,  how do I set types in auxkernels and postprocessors.  I'm always struggled with this part.",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4719323",
                          "updatedAt": "2023-01-18T16:40:42Z",
                          "publishedAt": "2023-01-18T16:40:41Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "for any material you can specify material outputs parameters. Look at the list of parameters of any materials.",
                          "url": "https://github.com/idaholab/moose/discussions/23182#discussioncomment-4719740",
                          "updatedAt": "2023-01-18T17:16:59Z",
                          "publishedAt": "2023-01-18T17:16:59Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Is there any kernel or auxkernel solving the (\\psi, f u)?",
          "author": {
            "login": "hhy2022"
          },
          "bodyText": "I am trying to solve a self-defined problem. When I tranlate the strong form to the weak form, there is a term in the format like (\\psi, f u), where \\psi is the test function, f is a known function and u is the variable I want to solve.\nI checked the lists of kernels and could not find a corresponding one to represent it. Does it mean I need to use auxkernel to represent the 'fu' and then use it as a auxvariable and then combine it to the kernel system?\nI might misundertand something. If so, please correct me.\nThank you so much for any help.",
          "url": "https://github.com/idaholab/moose/discussions/23177",
          "updatedAt": "2023-01-18T17:54:30Z",
          "publishedAt": "2023-01-17T09:51:13Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nUsing an auxkernel to define f u would make it difficult to compute the contribution to the Jacobian.\nYou should use either Force or Reaction (difference is whether u is the variable being solved for in the equation) kernels here.\nThere's unfornately none that I can find that uses a function for the coefficient, only either constants or material properties.\nYou can convert the function to a material property using the GenericFunctionMaterial\nhttps://mooseframework.inl.gov/source/kernels/ADMatReaction.html\nhttps://mooseframework.inl.gov/source/kernels/MatCoupledForce.html\nhttps://mooseframework.inl.gov/source/materials/GenericFunctionMaterial.html\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/23177#discussioncomment-4708865",
                  "updatedAt": "2023-01-17T16:53:07Z",
                  "publishedAt": "2023-01-17T16:53:06Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "hhy2022"
                          },
                          "bodyText": "That makes sense. Thank you so much for the information.",
                          "url": "https://github.com/idaholab/moose/discussions/23177#discussioncomment-4720077",
                          "updatedAt": "2023-01-18T17:54:28Z",
                          "publishedAt": "2023-01-18T17:54:28Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Compiling issues on macOS Ventura 13.1",
          "author": {
            "login": "Raven-pro"
          },
          "bodyText": "Hello everyone!\nI am using macOS, and recently I have run into compiling issues.\nWhen I compile moose and my applications, the process stops with the errors below:\nLinking Library /Users/providence/MOOSE_Ubuntu_to_MAC/moose/modules/fluid_properties/lib/libfluid_properties-opt.la...\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/auxkernels_Unity.C\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/kernels_Unity.C\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/kernels_old_Unity.C\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/materials_Unity.C\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/bcs_Unity.C\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/bcs_old_Unity.C\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/dgkernels_Unity.C\nCreating Unity /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/userobject_Unity.C\nCompiling C++ (in opt mode) /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/auxkernels_Unity.C...\nCompiling C++ (in opt mode) /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/kernels_Unity.C...\nCompiling C++ (in opt mode) /Users/providence/MOOSE_Ubuntu_to_MAC/singlephase/build/unity_src/kernels_old_Unity.C...\nld: library not found for -lomp\nclang-12: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [/Users/providence/MOOSE_Ubuntu_to_MAC/moose/framework/app.mk:345: /Users/providence/MOOSE_Ubuntu_to_MAC/moose/modules/fluid_properties/lib/libfluid_properties-opt.la] Error 1\nmake: *** Waiting for unfinished jobs....\n\nThe compilation went well half a month ago, and I don't know if it's because I've updated my system and downloaded gcc from homebrew or anything else.\nCould anyone please help fix it? Much Thanks!!",
          "url": "https://github.com/idaholab/moose/discussions/23180",
          "updatedAt": "2023-01-18T14:46:50Z",
          "publishedAt": "2023-01-17T17:35:34Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nif you are using macOS then you need to use the conda environment to build moose.\nI think right now you are trying to build with your systems compiler\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4709823",
                  "updatedAt": "2023-01-17T18:23:04Z",
                  "publishedAt": "2023-01-17T18:23:03Z",
                  "isAnswer": false,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "Raven-pro"
                          },
                          "bodyText": "I am using conda environment to build moose.\nBefore compiling, I used\nmamba init\nmamba activate moose\n\nI have also reinstalled the mamba environment, but it didn't work.",
                          "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4712819",
                          "updatedAt": "2023-01-18T02:09:14Z",
                          "publishedAt": "2023-01-18T02:09:13Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Raven-pro"
                          },
                          "bodyText": "When I use\nclang -v\n\nIt comes out\nclang version 12.0.1\nTarget: arm64-apple-darwin22.2.0\nThread model: posix\nInstalledDir: /Users/providence/mambaforge3/envs/moose/bin\n\nSo I think the compiler I am using is in the moose environment directory.",
                          "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4712849",
                          "updatedAt": "2023-01-18T02:14:55Z",
                          "publishedAt": "2023-01-18T02:14:54Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "Ok that's good.\nCan you please paste the output of the diagnostics script in moose/scripts",
                          "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4713017",
                          "updatedAt": "2023-01-18T02:48:49Z",
                          "publishedAt": "2023-01-18T02:48:48Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Raven-pro"
                          },
                          "bodyText": "Of course.\nI ran diagnostics.sh\nHere is the outcome.\nSystem Arch: Darwin Kernel Version 22.2.0: Fri Nov 11 02:04:44 PST 2022; root:xnu-8792.61.2~4/RELEASE_ARM64_T8103\n\nMOOSE Package Version: Custom Build\n\nCPU Count: 8\n\nMemory Free: 900.641 MB\n\nVariable `which $CC` check:\n/opt/homebrew/bin/mpicc\n\n$CC --version:\nclang version 12.0.1\nTarget: arm64-apple-darwin22.2.0\nThread model: posix\nInstalledDir: /Users/providence/mambaforge3/envs/moose/bin\n\nMPICC:\nwhich mpicc:\n\t/opt/homebrew/bin/mpicc\nmpicc -show:\n\tclang -g -Wl,-commons,use_dylibs -I/opt/homebrew/Cellar/mpich/4.0.3/include -L/opt/homebrew/Cellar/mpich/4.0.3/lib -lmpi -lpmpi\n\nCOMPILER clang:\nclang version 12.0.1\nTarget: arm64-apple-darwin22.2.0\nThread model: posix\nInstalledDir: /Users/providence/mambaforge3/envs/moose/bin\n\nPython:\n\t/Users/providence/mambaforge3/envs/moose/bin/python\n\tPython 3.10.8\n\nMODULES NOT AVAILABLE\n\nPETSc configure:\nstatic const char *petscconfigureoptions = \"--download-hypre=1 --with-shared-libraries=1 --with-hdf5-dir=${PREFIX}  --with-make-np=8  --with-debugging=no --download-fblaslapack=1 --download-metis=1 --download-ptscotch=1 --download-parmetis=1 --download-superlu_dist=1 --download-mumps=1 --download-strumpack=1 --download-scalapack=1 --download-slepc=1 --with-mpi=1 --with-openmp=1 --with-cxx-dialect=C++11 --with-fortran-bindings=0 --with-sowing=0 --with-64-bit-indices --COPTFLAGS=-O3 --CXXOPTFLAGS=-O3 --FOPTFLAGS=-O3 --with-x=0 --with-ssl=0 CC=mpicc CXX=mpicxx FC=mpif90 FC=mpif90 FC=mpif77 AR=arm64-apple-darwin20.0.0-ar RANLIB=arm64-apple-darwin20.0.0-ranlib CFLAGS=\"-ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include   -mcpu=apple-a12\" CXXFLAGS=\"-ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -stdlib=libc++ -fvisibility-inlines-hidden -fmessage-length=0 -isystem ${PREFIX}/include -std=c++17 -mcpu=apple-a12\" CPPFLAGS=\"-D_FORTIFY_SOURCE=2 -isystem /Users/providence/mambaforge3/envs/moose/include -mmacosx-version-min=11.3\" FFLAGS=\"-march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include   -march=armv8.3-a\" FCFLAGS=\"-march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include   -march=armv8.3-a\" LDFLAGS=\"-Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/providence/mambaforge3/envs/moose/lib -L/Users/providence/mambaforge3/envs/moose/lib\" --prefix=/Users/providence/mambaforge3/envs/moose\";\n\nPETSc linked libraries:\n/Users/providence/mambaforge3/envs/moose/lib/libpetsc.dylib:\n\t@rpath/libpetsc.3.16.dylib (compatibility version 3.16.0, current version 3.16.6)\n\t@rpath/libHYPRE-2.23.0.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t@rpath/libstrumpack.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t@rpath/libsuperlu_dist.7.dylib (compatibility version 7.0.0, current version 7.1.1)\n\t@rpath/libhdf5.200.dylib (compatibility version 202.0.0, current version 202.0.0)\n\t@rpath/libparmetis.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t@rpath/libmetis.dylib (compatibility version 0.0.0, current version 0.0.0)\n\t@rpath/libc++.1.dylib (compatibility version 1.0.0, current version 1.0.0)\n\t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1292.100.5)\n\t@rpath/libmpifort.12.dylib (compatibility version 15.0.0, current version 15.2.0)\n\t@rpath/libmpi.12.dylib (compatibility version 15.0.0, current version 15.2.0)\n\t@rpath/libgfortran.5.dylib (compatibility version 6.0.0, current version 6.0.0)\n\t@rpath/libomp.dylib (compatibility version 5.0.0, current version 5.0.0)\n\nENVIRONMENT:\nAS=arm64-apple-darwin20.0.0-as\nLDFLAGS=-Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/providence/mambaforge3/envs/moose/lib -L/Users/providence/mambaforge3/envs/moose/lib\nAR=arm64-apple-darwin20.0.0-ar\nMOOSE_NO_CODESIGN=true\nac_cv_func_malloc_0_nonnull=yes\nHDF5_DIR=/Users/providence/mambaforge3/envs/moose\nVTKINCLUDE_DIR=/Users/providence/mambaforge3/envs/moose/libmesh-vtk/include/vtk-9.1\nTERM_PROGRAM=iTerm.app\nac_cv_func_realloc_0_nonnull=yes\nOBJC=arm64-apple-darwin20.0.0-clang\nSHELL=/bin/zsh\nTERM=xterm-256color\nHOST=arm64-apple-darwin20.0.0\nNM=arm64-apple-darwin20.0.0-nm\nHOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles\nCPPFLAGS=-D_FORTIFY_SOURCE=2 -isystem /Users/providence/mambaforge3/envs/moose/include\nTMPDIR=/var/folders/3j/332tsm6940n1fm80jlfl_dx40000gn/T/\nPAGESTUFF=arm64-apple-darwin20.0.0-pagestuff\nCONDA_SHLVL=2\nLIPO=arm64-apple-darwin20.0.0-lipo\nTERM_PROGRAM_VERSION=3.4.12\nCONDA_PROMPT_MODIFIER=(moose)\nSIZE=arm64-apple-darwin20.0.0-size\nNMEDIT=arm64-apple-darwin20.0.0-nmedit\nSDKROOT=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk\nTERM_SESSION_ID=w0t0p0:C3B2A1E9-2D64-4F12-B4A5-FE93A024D242\nCXX_FOR_BUILD=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-clang++\nINSTALL_NAME_TOOL=arm64-apple-darwin20.0.0-install_name_tool\nSEGEDIT=arm64-apple-darwin20.0.0-segedit\nGFORTRAN=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-gfortran\nZSH=/Users/providence/.oh-my-zsh\nSEG_HACK=arm64-apple-darwin20.0.0-seg_hack\nUSER=providence\nEigen3_DIR=/Users/providence/mambaforge3/envs/moose/libmesh/include/Eigen\nCLANGXX=arm64-apple-darwin20.0.0-clang++\nLIBTOOL=arm64-apple-darwin20.0.0-libtool\nCOMMAND_MODE=unix2003\nCONDA_BACKUP_HOST=ProVidence-cjy.local\nCONDA_TOOLCHAIN_BUILD=arm64-apple-darwin20.0.0\nFC_FOR_BUILD=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-gfortran\nCONDA_EXE=/Users/providence/mambaforge3/bin/conda\nOTOOL=arm64-apple-darwin20.0.0-otool\nSSH_AUTH_SOCK=/private/tmp/com.apple.launchd.UmQ0DaJHYQ/Listeners\nDEBUG_FORTRANFLAGS=-march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include -march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -Og -g -Wall -Wextra -fcheck=all -fbacktrace -fimplicit-none -fvar-tracking-assignments\n__CF_USER_TEXT_ENCODING=0x0:25:52\nCXXFLAGS=-ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -stdlib=libc++ -fvisibility-inlines-hidden -fmessage-length=0 -isystem /Users/providence/mambaforge3/envs/moose/include -std=c++17\nPAGER=less\nSTRINGS=arm64-apple-darwin20.0.0-strings\nCONDA_TOOLCHAIN_HOST=arm64-apple-darwin20.0.0\n_CE_CONDA=\nLSCOLORS=Gxfxcxdxbxegedabagacad\nCHECKSYMS=arm64-apple-darwin20.0.0-checksyms\nCONDA_PREFIX_1=/Users/providence/mambaforge3\nPATH=/opt/homebrew/sbin:/opt/homebrew/bin:/Applications/CMake.app/Contents/bin:/Users/providence/mambaforge3/envs/moose/bin:/Users/providence/mambaforge3/condabin:/usr/local/bin:/System/Cryptexes/App/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Apple/usr/bin\nMESON_ARGS=--buildtype release\nC_INCLUDE_PATH=/Users/providence/mambaforge3/envs/moose/include\nDEBUG_CXXFLAGS=-ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -stdlib=libc++ -fvisibility-inlines-hidden -fmessage-length=0 -Og -g -Wall -Wextra -isystem /Users/providence/mambaforge3/envs/moose/include\nBUILD=arm64-apple-darwin20.0.0\nLD=arm64-apple-darwin20.0.0-ld\n__CFBundleIdentifier=com.googlecode.iterm2\nCONDA_PREFIX=/Users/providence/mambaforge3/envs/moose\nF90=mpif90\nPWD=/Users/providence/MOOSE_Ubuntu_to_MAC/moose/scripts\nLIBMESH_DIR=/Users/providence/mambaforge3/envs/moose/libmesh\nSTRIP=arm64-apple-darwin20.0.0-strip\nCMAKE_ARGS=-DCMAKE_AR=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-ar -DCMAKE_CXX_COMPILER_AR=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-ar -DCMAKE_C_COMPILER_AR=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-ar -DCMAKE_RANLIB=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-ranlib -DCMAKE_CXX_COMPILER_RANLIB=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-ranlib -DCMAKE_C_COMPILER_RANLIB=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-ranlib -DCMAKE_LINKER=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-ld -DCMAKE_STRIP=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-strip -DCMAKE_INSTALL_NAME_TOOL=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-install_name_tool -DCMAKE_LIBTOOL=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-libtool -DCMAKE_OSX_DEPLOYMENT_TARGET= -DCMAKE_BUILD_TYPE=Release -DCMAKE_OSX_SYSROOT=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk\nF95=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-gfortran\nLANG=zh_CN.UTF-8\nITERM_PROFILE=Default\nDEBUG_FFLAGS=-march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include -march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -Og -g -Wall -Wextra -fcheck=all -fbacktrace -fimplicit-none -fvar-tracking-assignments\nXPC_FLAGS=0x0\nF77=mpif77\nREDO_PREBINDING=arm64-apple-darwin20.0.0-redo_prebinding\nCXX=mpicxx\nCC_FOR_BUILD=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-clang\nCLANG=arm64-apple-darwin20.0.0-clang\nXPC_SERVICE_NAME=0\n_CE_M=\nCOLORFGBG=15;0\nHOME=/Users/providence\nSHLVL=4\nFORTRANFLAGS=-march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include\nLC_TERMINAL_VERSION=3.4.12\nCFLAGS=-ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include\nMPIHOME=/Users/providence/mambaforge3/envs/moose\n_CONDA_PYTHON_SYSCONFIGDATA_NAME=_sysconfigdata_arm64_apple_darwin20_0_0\nFC=mpif90\nVTKLIB_DIR=/Users/providence/mambaforge3/envs/moose/libmesh-vtk/lib\nITERM_SESSION_ID=w0t0p0:C3B2A1E9-2D64-4F12-B4A5-FE93A024D242\nLOGNAME=providence\nCONDA_PYTHON_EXE=/Users/providence/mambaforge3/bin/python\nLESS=-R\nbuild_alias=arm64-apple-darwin20.0.0\nCONDA_DEFAULT_ENV=moose\nDEBUG_CFLAGS=-ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -Og -g -Wall -Wextra -isystem /Users/providence/mambaforge3/envs/moose/include\nRANLIB=arm64-apple-darwin20.0.0-ranlib\nCMAKE_PREFIX_PATH=:/Users/providence/mambaforge3/envs/moose\nCC=mpicc\nSEG_ADDR_TABLE=arm64-apple-darwin20.0.0-seg_addr_table\nLC_TERMINAL=iTerm2\nhost_alias=arm64-apple-darwin20.0.0\nLDFLAGS_LD=-pie -headerpad_max_install_names -dead_strip_dylibs -rpath /Users/providence/mambaforge3/envs/moose/lib -L/Users/providence/mambaforge3/envs/moose/lib\nPETSC_DIR=/Users/providence/mambaforge3/envs/moose\nOBJC_FOR_BUILD=/Users/providence/mambaforge3/envs/moose/bin/arm64-apple-darwin20.0.0-clang\nFFLAGS=-march=armv8.3-a -ftree-vectorize -fPIC -fno-stack-protector -O2 -pipe -isystem /Users/providence/mambaforge3/envs/moose/include\nCOLORTERM=truecolor\n_=/usr/bin/env",
                          "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4713227",
                          "updatedAt": "2023-01-18T03:35:31Z",
                          "publishedAt": "2023-01-18T03:35:31Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              },
              {
                "node": {
                  "author": {
                    "login": "Raven-pro"
                  },
                  "bodyText": "OMG, I think I know the reason...\nI downloaded another mpich from homebrew, and when I compiled the moose application, it used homebrew-mpich rather than moose-mpich...\nI have just uninstalled homebrew-mpich and then the compilation succeeds.\nThe thing is, I need homebrew-mpich to compile other programs. Any suggestion on maintaining both types of mpich without compilation errors?",
                  "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4713261",
                  "updatedAt": "2023-01-18T03:46:24Z",
                  "publishedAt": "2023-01-18T03:46:23Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "GiudGiud"
                          },
                          "bodyText": "You should be able to find a working mpi compiler from mamba.\nHomebrew doesnt let you deactivate things easily, you will have to set environment variables to point to what you want to use all the time",
                          "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4713292",
                          "updatedAt": "2023-01-18T03:54:25Z",
                          "publishedAt": "2023-01-18T03:54:25Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "Raven-pro"
                          },
                          "bodyText": "Thank you! I will later try setting environmental variables.",
                          "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4713328",
                          "updatedAt": "2023-01-18T04:03:05Z",
                          "publishedAt": "2023-01-18T04:03:05Z",
                          "isAnswer": false
                        }
                      },
                      {
                        "node": {
                          "author": {
                            "login": "milljm"
                          },
                          "bodyText": "I want to add:\nYou're welcome to use any compiler you like (so long as it constrains to our minimums: https://mooseframework.inl.gov/sqa/minimum_requirements.html). Please keep in mind when not using our prepackaged binaries of libMesh, PETSc, etc... you'll need to build these on your own, and each time you see us post an update to either of the two.\nWe provide a script for such purposes, and we will happily support folks using Homebrew:\nbrew install mpich\nexport CC=mpicc CXX=mpicxx, etc # basically all things necessary to use the MPI wrapper \ngcc|clang --version             # verify the compiler is something we support\n\ncd ~/projects/moose/scripts\nexport MOOSE_JOBS=6             # or however many cores your machine has\n./update_and_rebuild_petsc.sh\n./update_and_rebuild_libmesh.sh\nAs @GiudGiud mentioned, it is not easy to maintain both. With Conda, you can switch things off with: conda deactivate, or activate some other special environment (like ours with conda activate moose).",
                          "url": "https://github.com/idaholab/moose/discussions/23180#discussioncomment-4718189",
                          "updatedAt": "2023-01-18T14:46:51Z",
                          "publishedAt": "2023-01-18T14:46:50Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "Scalability",
          "author": {
            "login": "selarem"
          },
          "bodyText": "Hi all,\nI would like to know if anyone has a scalability curve of moose.\nI will ask for computing time on a national computing center and would like to give them\nan approximation of our needs.\nOur simulations couple Crystal plasticity (1000 grains) with phase field damage and CZM.\nThe number of DOF goes from 2 millions to 20 millions.\nthanks for any help\nregards,\nsab",
          "url": "https://github.com/idaholab/moose/discussions/23187",
          "updatedAt": "2023-02-04T15:55:39Z",
          "publishedAt": "2023-01-18T10:11:57Z",
          "category": {
            "name": "Q&A Tools"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nScalability is application dependent as the numerical system is not solved the same way for every physics.\n@permcody might know the right paper for scalability of the phase field module\nThe rule of thumb we use is 20k dofs at least per processor, so for 20M we would say use less than 1,000 processors but it's likely to work with much less.\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/23187#discussioncomment-4716809",
                  "updatedAt": "2023-01-18T12:10:09Z",
                  "publishedAt": "2023-01-18T12:10:08Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": [
                      {
                        "node": {
                          "author": {
                            "login": "hugary1995"
                          },
                          "bodyText": "See the moose softwarex paper. The framework scales very, very well to tens of thousands cores. However, I have limited success in scaling a crystalplasiticity + czm simulation. The bottleneck is a scalable linear solver. I think you might go to several hundreds cores, beyond that is gonna be a hard stretch. There's something else that didn't scale well when I have both czm (mesh broken) and periodic strain conditions. I can't recall exactly what that was on top of my head right now.",
                          "url": "https://github.com/idaholab/moose/discussions/23187#discussioncomment-4717050",
                          "updatedAt": "2023-01-18T12:37:28Z",
                          "publishedAt": "2023-01-18T12:37:28Z",
                          "isAnswer": false
                        }
                      }
                    ]
                  }
                }
              }
            ]
          }
        }
      },
      {
        "node": {
          "title": "execute_on second time step",
          "author": {
            "login": "mangerij"
          },
          "bodyText": "I am wondering if it is possible to evaluate an AuxVariable at the second time step (as opposed to the first with execute_on = 'initial').",
          "url": "https://github.com/idaholab/moose/discussions/23186",
          "updatedAt": "2023-02-04T15:55:31Z",
          "publishedAt": "2023-01-18T09:55:24Z",
          "category": {
            "name": "Q&A General"
          },
          "comments": {
            "edges": [
              {
                "node": {
                  "author": {
                    "login": "GiudGiud"
                  },
                  "bodyText": "Hello\nYou can. You ll want to execute on timestep_begin and use a Control (this one I think: https://mooseframework.inl.gov/source/controls/ConditionalFunctionEnableControl.html)\nto turn the auxkernel on then off\nGuillaume",
                  "url": "https://github.com/idaholab/moose/discussions/23186#discussioncomment-4716757",
                  "updatedAt": "2023-01-18T12:04:59Z",
                  "publishedAt": "2023-01-18T12:04:59Z",
                  "isAnswer": true,
                  "replies": {
                    "edges": []
                  }
                }
              }
            ]
          }
        }
      }
    ]
  }
}